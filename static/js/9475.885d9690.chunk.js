"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[9475],{2933:(t,e,n)=>{n.d(e,{C:()=>r,c:()=>s});var o=n(4709);let a=null;function s(t){t.origin||(t.origin=null),t.botId||(t.botId=null);try{const{origin:e,botId:n}=t;a=new BroadcastChannel("lp_web_chat");const s=function(t){let{onHistoryChange:e,getHistory:n,origin:a=null,botId:s=null}=t;return t=>{const i=t.data||{};if(i.origin===a&&i.botId===s)try{if("GetConversationId"===i.action){r(n(),a,s)}else if("SetConversationId"===i.action){const{conversationId:t,history:n}=i;t?o.d6(t||void 0):o.oy(),n&&(null===e||void 0===e||e(n))}}catch(l){console.log("Error occurred when trying to handle session sharing:",l)}}}(t);return a.addEventListener("message",s),a.postMessage({action:"GetConversationId",origin:e,botId:n}),()=>{a&&(a.removeEventListener("message",s),a.close(),a=null)}}catch(e){console.error("Unable to start session sharing:",e)}}function r(t,e,n,s){if(a)try{const r=o.Db()||"";if(!s&&!r)return;a.postMessage({action:"SetConversationId",origin:e,botId:n,conversationId:r,history:t})}catch(r){console.error("Error sharing session:",r)}}},13938:()=>{},14623:(t,e,n)=>{n.d(e,{A:()=>s});var o=n(9950),a=n(44414);const s=function(t){let{text:e="We are Online!",onHide:n,design:s,isLeft:r}=t;const i=function(t,e){let{spacingCorner:n,spacingBottom:o}=(null===t||void 0===t?void 0:t.launcher)||{};n=parseFloat(n)||void 0,o=parseFloat(o)||void 0,n&&(n+=5);o&&(o+=75);if(n||o)return{bottom:o,[e?"left":"right"]:n}}(s,r),[l,c]=o.useState(!0),d=o.useCallback(t=>{t.preventDefault(),t.stopPropagation(),c(!1),null===n||void 0===n||n()},[n]);return l?(0,a.jsxs)("div",{className:"button-tooltip",style:i,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("img",{draggable:!1,className:"chat-hand",alt:"\ud83d\udc4b",src:"https://cwc.livserv.in/uploads/Templates/cwc_trend1/hand.png"}),(0,a.jsx)("b",{children:e}),(0,a.jsx)("br",{})]}),(0,a.jsx)("a",{className:"close-indicator",onClick:d,children:(0,a.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M1490 1245q0 40-24 68l-136 136q-24 24-68 24t-68-28l-294-294-294 294q-24 24-68 24t-68-28l-136-136q-24-24-24-68t24-68l294-294-294-294q-24-24-24-68t24-68l136-136q24-24 68-24t68 28l294 294 294-294q24-24 68-28t68 28l136 136q28 24 24 68t-24 68l-294 294 294 294q24 24 24 68z",fill:"#fff"})})})]}):null}},26038:(t,e,n)=>{n.d(e,{CZ:()=>d,If:()=>c,SF:()=>u,TO:()=>r,o9:()=>i});var o=n(44364),a=n(8478),s=n(4709);function r(){return{role:"assistant",type:"text",content:"Hello, greetings for the day, how may I assist you?"}}function i(t,e,n){var r,i,c;const{updateContact:d,onReceiveChatResponse:u,bot:g,locationDetails:h,onCallback:p,recipientId:v,history:b,chatFlowId:f,preferredLanguage:m}=e,{flowId:w,flowType:C}=(null===b||void 0===b||null===(r=b[b.length-1])||void 0===r?void 0:r.media)||{};return"string"===typeof t&&w&&(t={method:"flow-response",type:C,flowId:w,answer:t}),"customForm"===(null===(i=t)||void 0===i?void 0:i.type)&&null!==(c=t)&&void 0!==c&&c.answer&&(t={method:"flow-response",type:C,flowId:w,answer:t.answer}),n?async function(t,e,n,a){let{onReceiveChatResponse:r,updateContact:i,onCallback:c,recipientId:d,chatFlowId:u,language:g}=n;const h=s.Db(),{_id:p,organizationId:v,botSettings:b}=e,f={userQuery:t,recipientDetails:{recipientId:d,conversationId:h,language:g,...a},chatFlowId:u};r&&(f.testMode=!0);try{const t=await fetch(`${o.Rc}voicebot/voiceChat?organizationId=${v}&botId=${p}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),e=await t.json();null===r||void 0===r||r(e.data);return{data:l(e.data,{updateContact:i,botSettings:b,onCallback:c}),audioUri:e.data.audioUri}}catch(m){return console.log(m,"error"),[{role:"assistant",type:"text",content:m.message||"Unknown Server error"}]}}(t,g,{onReceiveChatResponse:u,updateContact:d,onCallback:p,recipientId:v,chatFlowId:f,language:m},h):async function(t,e,n,o){let{onReceiveChatResponse:r,updateContact:i,onCallback:c,recipientId:d,chatFlowId:u,language:g}=n;const h=s.Db(),{_id:p,organizationId:v,botSettings:b}=e,f={userQuery:t,recipientDetails:{recipientId:d,conversationId:h,language:g,...o},chatFlowId:u};r&&(f.testMode=!0);try{const t=await a.bE(`/bot/${v}/${p}/chat`,f,{noAuth:!0});return null===r||void 0===r||r(t),l(t,{updateContact:i,botSettings:b,onCallback:c})}catch(m){return[{role:"assistant",type:"text",content:m.message||"Unknown Server error"}]}}(t,g,{onReceiveChatResponse:u,updateContact:d,onCallback:p,recipientId:v,chatFlowId:f,language:m},h)}function l(t,e){let{updateContact:n,botSettings:o,onCallback:a}=e;const{chatRefId:r,recipientId:i,messages:l}=t;return s.d6(r),null===a||void 0===a||a("set-visitor-id",{recipientId:i}),c(l,{updateContact:n,botSettings:o})}function c(t,e){let{updateContact:n,botSettings:o}=e;if(null===t||void 0===t||!t.length)return t;const a=t[t.length-1];return"form"===a.type&&t.push({role:"user",type:"lead",content:"",profile:a.media,updateContact:n,botSettings:o}),"customForm"===a.type&&("assistant"===a.role&&(a.role="user"),Object.assign(a,{type:"customForm",content:"",media:a.media,updateContact:n,botSettings:o})),t}async function d(t){try{const e=new URLSearchParams(window.location.search),n=e.get("token"),o={authToken:n,recipientId:t,sourceUrl:e.get("sourceUrl")},{startupFlow:s,hideChatWindow:r,googleTagManagerId:i,...l}=await a.Jt("/bot/get-bot-details-by-auth-token",o,{noAuth:!0});return{startupFlow:s,hideChatWindow:r,googleTagManagerId:i,bot:l}}catch(e){console.log("Failed to init chat:-",e)}}async function u(t,e,n,o){let{autoLaunch:r,startupMessages:i}=o;const{_id:l,organizationId:d,botSettings:u={}}=t,g=s.Db();if(!e||!g)return r?i||[{role:"assistant",type:"text",content:"Hello, greetings for the day, how may I assist you?"}]:[];try{const t=await a.Jt(`/bot/${d}/${l}/chat/history/${e}/${g}`,null,{noAuth:!0}),{messages:o}=t||{};return c(o,{updateContact:n,botSettings:u})}catch(h){console.error("Failed to fetch chat history:-",h)}return r?[{role:"assistant",type:"text",content:"Hello, greetings for the day, how may I assist you?"}]:[]}},31739:(t,e,n)=>{n.d(e,{J:()=>s,u:()=>a});const o="lp-vid";function a(t,e){if("set-visitor-id"===t){const{recipientId:t}=e||{};t&&function(t){try{localStorage.setItem(o,t)}catch(e){console.error("Unable to use browser cache",e)}}(t)}}function s(){try{return localStorage.getItem(o)||void 0}catch(t){console.error("Unable to use browser cache",t)}}},47014:(t,e,n)=>{n.d(e,{A:()=>v});var o=n(9950),a=n(15820),s=n(4709),r=n(78023),i=n(26038),l=n(2933),c=n(96651),d=n(90410),u=n(72438),g=(n(13938),n(44414));const h={window:{spacingCorner:"0px",spacingBottom:"7px"},launcher:{spacingCorner:"0px",spacingBottom:"7px"}},p=["lead","options","customForm","stop"];const v=function(t){var e,n;const{botDetails:v,botDesign:b,startupFlow:f,onReceiveChatResponse:m,autoLaunch:w,recipientId:C,origin:y,onCallback:I,optionsRenderer:x,fullscreen:S,customChatWindow:k}=t,[j,L]=o.useState(w||!1),[T,F]=o.useState(b),[B,M]=o.useState(!1),[A,H]=o.useState(v),[R,E]=o.useState(f),[_,D]=o.useState(null===f||void 0===f?void 0:f.messages),[N,U]=o.useState(C),[$,O]=o.useState([]),[z,q]=o.useState(),[W,J]=o.useState(),[P,G]=o.useState(null),Q=o.useRef({autoLaunch:w});if(S)try{const t=window.innerWidth+"px",e=window.innerHeight+"px";T.window.width=t,T.window.height=e,T.window.spacingBottom="0px",T.window.spacingCorner="0px",T.launcher.spacingBottom="0px",T.launcher.spacingCorner="0px"}catch(ot){}Q.current.recipientId=N,Q.current.bot=A,Q.current.chatFlowId=null===R||void 0===R?void 0:R.flowId,Q.current.startupMessages=_,Q.current.origin=y,Q.current.preferredLanguage=W;const Z=o.useCallback(t=>{s.eB(t),J(t)},[]);Q.current.setAndBroadcastHistory=o.useCallback(t=>{var e;"function"===typeof t?O(e=>{var n;const o=t(e);return(0,l.C)(o,Q.current.origin,null===(n=Q.current.bot)||void 0===n?void 0:n._id,!0),o}):(O(t),(0,l.C)(t,Q.current.origin,null===(e=Q.current.bot)||void 0===e?void 0:e._id,!0))},[]),Q.current.onCallback=o.useCallback((t,e)=>{"set-visitor-id"===t&&e.recipientId&&U(e.recipientId),null===I||void 0===I||I(t,e)},[I]),Q.current.history=$,Q.current.showBot=j,Q.current.design=T,Q.current.locationDetails=z,Q.current.onReceiveChatResponse=m,Q.current.isLoadedInConsole=!!m,o.useEffect(()=>{H(v)},[v]),o.useEffect(()=>{var t;const{updateContact:e,bot:n}=Q.current;E(f),null!==f&&void 0!==f&&null!==(t=f.messages)&&void 0!==t&&t.length?D((0,i.If)([...f.messages],{updateContact:e,botSettings:n.botSettings})):D(!1)},[f]),o.useEffect(()=>{if(A&&!Q.current.isLoadedInConsole)return(0,l.c)({botId:A._id,origin:Q.current.origin,onHistoryChange:t=>{var e;(null!==t&&void 0!==t&&t.length||null!==(e=Q.current.history)&&void 0!==e&&e.length)&&O(t)},getHistory:()=>Q.current.history})},[A]),o.useEffect(()=>{F(b)},[b]),o.useEffect(()=>{J(s.cO());const{updateContact:t,bot:e,recipientId:n,autoLaunch:o,setAndBroadcastHistory:a,startupMessages:l}=Q.current;e?(0,i.SF)(e,n,t,{autoLaunch:o,startupMessages:(0,i.If)(l,{updateContact:t,botSettings:e.botSettings})}).then(a):(0,i.CZ)(n).then(e=>{let{bot:s,startupFlow:l,hideChatWindow:c,googleTagManagerId:d}=e;if(c)window.top.postMessage({lsMessage:"hide_ls_window"},"*");else{G(d),H(s),E(l);const e=(0,i.If)(null===l||void 0===l?void 0:l.messages,{updateContact:t,botSettings:s.botSettings});D(e);const{design:c,isLoadedInConsole:u}=Q.current;!c&&s.botDesign&&F((0,r.Y)(s.botDesign,u?void 0:h)),(0,i.SF)(s,n,t,{autoLaunch:o,startupMessages:(0,i.If)(e,{updateContact:t,botSettings:s.botSettings})}).then(a)}}),s.a().then(q)},[]);const Y=o.useCallback((t,e)=>{var n,o,a,s;let{showBot:r,design:i,onCallback:l}=Q.current;r=t?!r:r,null===l||void 0===l||l("windowToggle",{state:r,design:r?{width:null===i||void 0===i||null===(n=i.window)||void 0===n?void 0:n.width,height:null===i||void 0===i||null===(o=i.window)||void 0===o?void 0:o.height,spacingBottom:null===i||void 0===i||null===(a=i.window)||void 0===a?void 0:a.spacingBottom,spacingCorner:null===i||void 0===i||null===(s=i.window)||void 0===s?void 0:s.spacingCorner}:e})},[]),K=o.useCallback(async t=>{var e;null!==(e=Q.current.history)&&void 0!==e&&e.length||setTimeout(()=>{var t;if(null!==(t=Q.current.startupMessages)&&void 0!==t&&t.length)return void Q.current.setAndBroadcastHistory(t=>t.concat(...Q.current.startupMessages));const e=(0,i.TO)();Q.current.setAndBroadcastHistory(t=>t?t.concat(e):[e])},t||1700)},[]),V=o.useCallback(()=>{Y(!0),L(t=>!t),M(!0),setTimeout(()=>M(!1),1e3),K()},[Y,K]);o.useLayoutEffect(()=>{T&&Y(!1,!0)},[T,Y]);const X=o.useCallback(async function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,i.o9)(t,Q.current,e)},[]);Q.current.updateContact=o.useCallback(async t=>{const e=await X(t);Q.current.setAndBroadcastHistory(t=>t.filter(t=>!p.includes(t.type)).concat(...e))},[X]);const tt=o.useCallback(()=>{Q.current.setAndBroadcastHistory([]),s.oy(),delete Q.current.history,K(700)},[K]);if(!A||!z)return null;let et="hide-chat";j&&B?et="opening":j&&!B?et="show-chat":!j&&B&&(et="closing"),et+="bottomLeft"===(null===T||void 0===T||null===(e=T.window)||void 0===e?void 0:e.align)?" bottom-left ":" bottom-right ",m&&(et+=" test-console");const nt=$&&p.includes(null===(n=$[$.length-1])||void 0===n?void 0:n.type);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.A,{design:T}),(0,g.jsx)(d.A,{googleTagManagerId:P}),(0,g.jsxs)("div",{className:"chat-handler "+et,children:[j&&!!A&&(0,g.jsx)(a.A,{botDesign:T,messages:$,showTime:!0,onUserMessage:X,disabledMessage:nt,onHistoryChange:Q.current.setAndBroadcastHistory,onClear:tt,onHide:V,onCallback:Q.current.onCallback,optionsRenderer:x,language:W,setLanguage:Z,fullscreen:S,customChatWindow:k}),!j&&!B&&(0,g.jsx)(u.A,{design:T,onToggle:V})]})]})}},72438:(t,e,n)=>{n.d(e,{A:()=>i});var o=n(28891),a=n(14623),s=n(93436),r=n(44414);const i=function(t){let{design:e,onToggle:n}=t;const{launcher:{launcherType:i,buttonLogoUrl:l,buttonOnMobile:c,barText:d,fontSize:u,spacingCorner:g,spacingBottom:h,showMinimizeButtonToolTip:p=!0}={},header:{bgColor:v,secBgColor:b,fontColor:f}={},window:{fontFamily:m,align:w}={}}=e||{},C="bottomLeft"===w,y={bottom:h,[C?"left":"right"]:g};return"icon"===i||c?(0,r.jsxs)("div",{id:"lp-launcher",className:"lp-launcher button"+(l?"":" bordered"),onClick:n,style:{borderColor:v,color:f,background:l?"transparent":"linear-gradient(to right,"+v+", "+b+")",verticalAlign:"middle",padding:l?void 0:"16px",display:"flex",...y},children:[p&&(0,r.jsx)(a.A,{design:e,isLeft:C}),l&&(0,r.jsx)("img",{src:l,alt:"Live Chat"}),!l&&o.Or]}):"expand"===i?(0,r.jsx)(s.A,{isLeft:C,color:f,style:y,bgColor:v,secBgColor:b,imageUrl:l,chatIcon:o.Or,barText:d,fontSize:u,onClick:n}):(0,r.jsxs)("div",{id:"lp-launcher",className:"lp-launcher bar",onClick:n,style:{background:"linear-gradient(to right, "+v+", "+b+")",color:f,fontFamily:m,...y},children:[o.Or,(0,r.jsx)("span",{children:d||"Live Chat"})]})}},90410:(t,e,n)=>{n.d(e,{A:()=>a});var o=n(9950);const a=function(t){let{googleTagManagerId:e}=t;return(0,o.useEffect)(()=>{if(!e)return;const t=document.createElement("script");t.innerHTML=`\n          (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n          new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n          j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n          'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n          })(window,document,'script','dataLayer','${e}');\n        `,document.head.appendChild(t);const n=document.createElement("noscript");return n.innerHTML=`\n          <iframe src="https://www.googletagmanager.com/ns.html?id=${e}"\n            height="0" width="0" style="display:none;visibility:hidden" title="Google Tag Manager"></iframe>\n        `,document.body.appendChild(n),()=>{document.head.removeChild(t),document.body.removeChild(n)}},[e]),null}},93436:(t,e,n)=>{n.d(e,{A:()=>s});var o=n(9950),a=n(44414);const s=function(t){let{isLeft:e,bgColor:n,secBgColor:s,imageUrl:r,chatIcon:i,barText:l="Live Chat",fontSize:c,color:d,autoAnimate:u=!0,style:g,onClick:h}=t;const p=e?"bottom-left":"bottom-right",v={backgroundColor:n},b={backgroundImage:`linear-gradient(90deg, ${n}, ${s})`},f=o.useRef(null);return o.useEffect(()=>{if(u){const t=setInterval(()=>{var t;null===(t=f.current)||void 0===t||t.classList.remove("bar-hide"),setTimeout(()=>{var t;return null===(t=f.current)||void 0===t?void 0:t.classList.add("bar-hide")},7e3)},35e3);return()=>clearInterval(t)}},[u]),(0,a.jsxs)("div",{className:`lp-launcher expand-button ${p}`,onClick:h,style:g,children:[(0,a.jsx)("div",{ref:f,className:"text-container bar-hide",style:b,children:(0,a.jsx)("div",{className:"bar-text",style:{minWidth:"150px",fontSize:c,color:d},children:(0,a.jsxs)("p",{children:["Hi there, ",(0,a.jsx)("img",{draggable:!1,className:"chat-hand",alt:"\ud83d\udc4b",src:"https://cwc.livserv.in/uploads/Templates/cwc_trend1/hand.png"})," We are online!"]})})}),(0,a.jsx)("div",{className:"image-container",style:v,children:(0,a.jsxs)("div",{className:"image-sub-container",children:[r&&(0,a.jsx)("img",{src:r,alt:l}),!r&&i]})})]})}},96651:(t,e,n)=>{n.d(e,{A:()=>s});var o=n(17119),a=n(44414);const s=function(t){let{design:e}=t;const n=null===e||void 0===e?void 0:e.remoteFontLink;return n?o.createPortal((0,a.jsx)("link",{rel:"stylesheet",href:n}),document.head,"remoteFont"):null}}}]);