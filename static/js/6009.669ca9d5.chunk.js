"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[6009],{28564:(e,t,s)=>{s.d(t,{C7:()=>d,CC:()=>m,EO:()=>r,EZ:()=>n,Ek:()=>c,Gl:()=>i,Jc:()=>l});var a=s(33340),o=s(8478);async function r(e){const{selectedBotId:t,organizationId:s}=a.nc.getState();return await i(s,t,e)}async function i(e,t,s){return await o.Jt(`/bot/${e}/${t}/chat-flow/${s}`)}async function l(e){try{const{selectedBotId:t,organizationId:s}=a.nc.getState(),r=await o.Jt(`/bot/${s}/${t}/chat-flow/${e}/startup`);if("string"===typeof r&&r.startsWith("<"))throw new Error("Invalid JSON response, received HTML");return r}catch(t){return console.error("Error fetching startup with Flow ID:",t),null}}async function n(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=a.nc.getState();e||(e=i.organizationId),t||(t=i.selectedBotId);const l=`/bot/${e}/${t}/chat-flow${r?"?deploy=true":""}`;return await o.bE(l,s)}async function d(e,t,s){return await o.TF(`/bot/${e}/${t}/chat-flow/${s}`)}async function c(){const{selectedBotId:e,organizationId:t}=a.nc.getState();return(await o.Jt(`/bot/${t}/${e}/chat-flow`)).map(m).sort((e,t)=>e.label.includes("Draft")?-1:t.label.includes("Draft")?1:0)}function m(e){return{value:e._id,label:`v${e.version} - ${e.deployedAt?"Deployed":"Draft"}`}}},43983:(e,t,s)=>{s.d(t,{Ay:()=>n,Yl:()=>i,qo:()=>l,u4:()=>c,uV:()=>d});var a=s(8478),o=s(33340),r=s(21788);async function i(e){const t=await a.Jt(`/integrations/${e.organizationId}/${e.botId}/list`),{botId:s}=e;((e,t)=>{o.nc.setState(s=>{const a=s.botsList.map(s=>s._id===e?{...s,integrations:t}:s);return{...s,botsList:a}})})(s,t)}async function l(e){await a.TF(`/integrations/${e.organizationId}/${e.botId}/${e._id}`,e);try{await i(e)}catch(t){(0,r.i)(!0,"Not able to fetch all integrations. Try after sometime!","error")}}async function n(e){const t=await a.bE(`/integrations/${e.organizationId}/${e.botId}/crm-callback-integration`,e),s={organizationId:t.organizationId,botId:t.botId};try{await i(s)}catch(o){(0,r.i)(!0,"Not able to fetch all integrations. Try after sometime!","error")}}async function d(e){const t=await a.bE(`/integrations/${e.organizationId}/${e.botId}`,e),s={organizationId:t.organizationId,botId:t.botId};try{await i(s)}catch(o){(0,r.i)(!0,"Not able to fetch all integrations. Try after sometime!","error")}}async function c(e){const{organizationId:t,selectedBotId:s}=o.nc.getState();await a.bE(`/integrations/${t}/${s}/whatsapp`,e);try{await i({organizationId:t,botId:s})}catch(l){(0,r.i)(!0,"Not able to fetch all integrations. Try after sometime!","error")}}},46009:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Dt});var a=s(9950),o=s(28564),r=s(39320),i=s(37630),l=s(85668),n=(s(522),s(59051)),d=s.n(n),c=s(80609);const m={jpg:"image/*",jpeg:"image/*",png:"image/*",gif:"image/*",mp4:"video/*",avi:"video/*",mov:"video/*",wmv:"video/*",mp3:"audio/*",wav:"audio/*",pdf:"application/pdf"},u=[{id:g(),type:"start",data:{message:"Chat Window Opened"},position:{x:10,y:10}}];let p=g(),h=g();function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t="abcdefghijklmnopqrstuvwxyz0123456789";let s="";const a=Date.now().toString(36);for(let o=0;o<e;o++)s+=t.charAt(Math.floor(36*Math.random()));return a+s}const y=e=>{if(e&&e.flows.length>0){let t=x(e);const s=k(e);return t=[...u,...t],{flowNodes:t,flowEdges:s}}return{flowNodes:[...u],flowEdges:[]}},x=e=>e.flows.map((t,s)=>({id:t.flowId,type:t.type,data:w(t),position:f(t,s,e)})),w=e=>{var t,s,a,o,r,i,l,n,d;const m={};switch(["message","leadForm","gpt","leadFlow","stop","file","map","question","callConnect","otp","customForm","options"].includes(e.type)&&(m.message="string"===typeof e.content?e.content:e.content[0]),e.type){case"options":m.fieldLabel=e.fieldLabel,m.fallback=e.fallback?e.fallback:null===(t=e.meta)||void 0===t?void 0:t.fallback,m.dataSource=e.dataSource?e.dataSource:null===(s=e.meta)||void 0===s?void 0:s.dataSource,m.property=e.property,m.subOptions=v(e.children);break;case"file":var u,p;if(m.fileType=null===(a=e.meta)||void 0===a?void 0:a.type,null===(o=e.meta)||void 0===o||!o.media||!b(e.meta.media,e)&&e.meta.media[0].name){if(m.urls=[],m.files=null!==(u=e.meta)&&void 0!==u&&u.media?e.meta.media:[],!m.fileType)m.fileType=null!==(p=e.meta)&&void 0!==p&&p.media?C(e.meta.media):""}else m.urls=e.meta.media.map(e=>e.url),m.files=[];break;case"map":m.url=null===(r=e.meta)||void 0===r||null===(i=r.url)||void 0===i?void 0:i.trim();break;case"question":m.fieldLabel=e.fieldLabel,m.property=e.property,m.dateFormat=(null===(l=e.meta)||void 0===l?void 0:l.dateFormat)||"",m.errorMessage=(null===(n=e.meta)||void 0===n?void 0:n.errorMessage)||"";const D=e.fieldType?e.fieldType:null===(d=e.meta)||void 0===d?void 0:d.type;var h,y,x,w,f,k,N,T,E;if(m.fieldType=D,D&&D===c.bh.DATE||D===c.bh.DATETIME)m.min=null!==(h=e.meta)&&void 0!==h&&h.min?M(e,"min"):m.min,m.max=null!==(y=e.meta)&&void 0!==y&&y.max?M(e,"max"):m.max;if(D&&D===c.bh.TIME)m.min=null!==(x=e.meta)&&void 0!==x&&x.min?S(null===(w=e.meta)||void 0===w?void 0:w.min):null===(f=e.meta)||void 0===f?void 0:f.min,m.max=null!==(k=e.meta)&&void 0!==k&&k.min?S(null===(N=e.meta)||void 0===N?void 0:N.max):null===(T=e.meta)||void 0===T?void 0:T.max;else if(D&&D===c.bh.STRING||D===c.bh.NUMBER){var F,I;m.min=e.min?e.min:null===(F=e.meta)||void 0===F?void 0:F.min,m.max=e.min?e.min:null===(I=e.meta)||void 0===I?void 0:I.max}if(D===c.bh.CUSTOM)m.custom=e.custom?e.custom:null===(E=e.meta)||void 0===E?void 0:E.custom;break;case"http":if(m.property=e.property||"",e.meta){var L,O;m.displayText=e.meta.displayText||"",m.requestType=e.meta.requestType||"",m.hideData=e.meta.hideData||!1,m.url=(null===(L=e.meta.url)||void 0===L?void 0:L.trim())||"",m.params=e.meta.params||[],m.headers=e.meta.headers||[],m.successFlowId=e.meta.successFlowId?e.meta.successFlowId:g(),m.failureFlowId=e.meta.failureFlowId?e.meta.failureFlowId:g();const t=null===(O=e.meta.statusWiseFlowId)||void 0===O?void 0:O.map(e=>({statusCode:e.statusCode||"",id:e.flowId||""}));m.statusWiseFlow=t||[]}break;case"callConnect":e.meta&&(m.callConnectId=e.meta.callConnectId,m.callAccepted=e.meta.callAccepted,m.callRejected=e.meta.callRejected,m.successMessage=e.meta.successMessage,m.failureMessage=e.meta.failureMessage);break;case"otp":e.meta&&(m.otpType=e.meta.otpType);break;case"customForm":m.property=e.property,e.meta&&(m.customFields=j(e.meta.customFields))}return m},b=(e,t)=>!(null===e||void 0===e||!e.files)&&(t.meta.media=e.files,!0),j=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(e=>({id:e.id,title:e.title,property:e.property,whatsAppQuestion:e.whatsAppQuestion,fieldType:e.fieldType,dateFormat:null===e||void 0===e?void 0:e.dateFormat,min:null===e||void 0===e?void 0:e.min,max:null===e||void 0===e?void 0:e.max,custom:null===e||void 0===e?void 0:e.custom,isCollapsed:!1}))},v=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(e=>({id:e.flowId?e.flowId:e.id,title:e.title,subTitle:e.subTitle,value:e.value,imageUrl:e.imageUrl,category:e.category,isLink:e.isLink,description:e.description,leadEmailTo:e.leadEmailTo?e.leadEmailTo:"",leadEmailCc:e.leadEmailCc?[...e.leadEmailCc]:[],isCollapsed:!1}))},f=(e,t,s)=>{let a={x:t+150,y:t+50};var o;e.flowId&&s.positions&&(a=(null===(o=s.positions.find(t=>t.nodeId===e.flowId))||void 0===o?void 0:o.position)||a);return a},k=e=>{let t={};null!==e&&void 0!==e&&e.startFlowId&&(t={id:u[0].id,source:u[0].id,target:null===e||void 0===e?void 0:e.startFlowId,type:"custom"});const s=e.flows;let a=s.filter(e=>e.nextFlowId).map(e=>({id:`e-${e.flowId}-${e.nextFlowId}`,source:e.flowId,target:e.nextFlowId,type:"custom"}));return s.forEach(e=>{if(e.children&&e.children.length>0&&e.children.forEach(t=>{t.nextFlowId&&a.push({id:`e-${t.flowId?t.flowId:t.id}-${t.nextFlowId}`,source:e.flowId,target:t.nextFlowId,type:"custom",sourceHandle:t.flowId?t.flowId:t.id})}),"http"===e.type&&e.meta){var t;let s=e.meta;s.successFlowId&&a.push({id:`e-${p}-${s.successFlowId}`,source:e.flowId,target:s.successFlowId,type:"custom",sourceHandle:s.successFlowId}),s.failureFlowId&&a.push({id:`e-${h}-${s.failureFlowId}`,source:e.flowId,target:s.failureFlowId,type:"custom",sourceHandle:s.failureFlowId}),null===(t=s.statusWiseFlowId)||void 0===t||t.forEach(t=>{t.nextFlowId&&a.push({id:`e-${t.flowId?t.flowId:""}-${t.nextFlowId}`,source:e.flowId,target:t.nextFlowId,type:"custom",sourceHandle:t.flowId})})}}),s.forEach(e=>{e.children&&e.children.length>0&&e.children.forEach(t=>{t.nextFlowId&&a.push({id:`e-${t.flowId?t.flowId:t.id}-${t.nextFlowId}`,source:e.flowId,target:t.nextFlowId,type:"custom",sourceHandle:t.flowId?t.flowId:t.id})})}),a=Object.keys(t).length>0?[t,...a]:[...a],a},N=e=>m[e.toLowerCase()]||"",C=e=>{const t=new Set;for(const s of e){const e=s.name.split(".").pop();if(e){const s=N(e);s&&t.add(s)}}return Array.from(t).join(", ")},T={pdf:"application/pdf",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",mp4:"video/mp4",mov:"video/mp4",avi:"video/mp4"},E=e=>{const t=F(e);return T[t]||""},F=e=>{const t=(e=>(new URL(e).pathname.split("/").pop()||"").split("?")[0])(e),s=t.lastIndexOf(".");return s>-1?t.substring(s+1).toLowerCase():""},M=(e,t)=>{var s;let a=new Date;const o="min"===t?"min":"max",r=e[o]||(null===(s=e.meta)||void 0===s?void 0:s[o]);if(r){const[e,t]=r.split("T");a=new Date(e);const[s,o,i]=t.split(":");a.setHours(s||0),a.setMinutes(o||0),a.setSeconds(i.split(".")[0]||0)}return a||""},S=e=>{const t=new Date;let s;if(/^([01]\d|2[0-3]):([0-5]\d)$/.test(e)){const[a,o]=e.split(":").map(Number);s=new Date(t),s.setHours(a,o,0,0)}else s=new Date(t),s.setHours(23,59,59,999);return s},I=(e,t,s)=>{const a=e=>e<10?"0"+e:e;t&&e&&(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)),s&&(e.setHours(23),e.setMinutes(59),e.setSeconds(59),e.setMilliseconds(99));return`${e.getFullYear()}-${a(e.getMonth()+1)}-${a(e.getDate())}T${a(e.getHours())}:${a(e.getMinutes())}:${a(e.getSeconds())}.${(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)}Z`},L=e=>{if(e){return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}return""},O=(e,t,s)=>{const a=[e],o=new Set,r=[];for(;a.length>0;){const e=a.pop();if(o.has(e))continue;o.add(e);const i=t.filter(t=>t.target===e).map(e=>e.source),l=s.filter(e=>i.includes(e.id));r.push(...l),a.push(...i)}return r},D=(e,t)=>e.filter(e=>t?e.type===t:["options","question","http"].includes(e.type)).map(e=>e.data.property).filter(e=>{if(!e||""===e.trim())return!1;return/^[a-zA-Z0-9-_]+$/.test(e.trim())}),A=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);const $=e=>{const t={};return e.errors={},e.message?(e.message.length<3||e.message.length>1500)&&(t.message="Error in Message Node",e.errors.message="Message must be between 3 and 1500 characters"):(t.message="Error in Message Node",e.errors.message="Message is required"),t},B=(e,t,s,a)=>{const o={};t.errors={};let r=[];const i=O(e.id,a,s);r=D(i,"http"),n(t.message||"","message",-1,o,t.errors),l("dataSource",t.dataSource||"",-1,r,t.dataSource,o,t.errors);function l(e,t,s,a,o,r,i,l){if(l){if(!l(t,e,s,r,i))return}if(o){const o=t.indexOf("."),l=-1!==o?t.slice(0,o):t;a.includes(l)||(r[`${e}_${s}`]=`Invalid property: ${l} is not in the properties list`,i[e]=`Invalid property: ${l} is not in the properties list`)}}function n(e,t,s,a,o){if(!e||e.length<1||e.length>500){const e=`${r=t,r.charAt(0).toUpperCase()+r.slice(1)} must be between 1 and 500 characters`;return a[`${t}_${s}`]=e,o[t]=e,!1}var r;return!0}return(t.subOptions||[]).forEach((e,s)=>{const a={};l("title",e.title,s,r,null,o,a,(e,t,s,a,o)=>n(e,t,s,a,o)),t.dataSource&&!e.isLink&&l("value",e.value,s,r,null,o,a,(e,t,s,a,o)=>n(e,t,s,a,o));const i=new Set;if(e.leadEmailTo){const t=e.leadEmailTo.trim();A(t)?i.has(t)?(o[`leadEmailTo_${s}`]="Duplicate Lead Email To",a.leadEmailTo="Duplicate Lead Email To"):i.add(t):(o[`leadEmailTo_${s}`]="Lead Email To must be a valid email",a.leadEmailTo="Lead Email To must be a valid email")}e.leadEmailCc&&Array.isArray(e.leadEmailCc)&&e.leadEmailCc.forEach((e,t)=>{const r=e.trim();A(r)?i.has(r)?(o[`subOptions[${s}].leadEmailCc[${t}]`]="Duplicate email in Lead Email Cc",a.leadEmailCc="Duplicate email in Lead Email Cc"):i.add(r):(o[`subOptions[${s}].leadEmailCc[${t}]`]="Invalid email format",a.leadEmailCc="Invalid email format")}),t.subOption=a}),o},H=e=>{var t;const s={};e.errors={},e.message?(e.message.length<3||e.message.length>1500)&&(s.message="Error in File Node",e.errors.message="Message must be between 3 and 1500 characters"):(s.message="Error in File Node",e.errors.message="Message is required");const a=Array.isArray(e.urls)&&e.urls.every(e=>R(e));a||(s.message="Error in File Node",e.errors.urls="Invalid image URL"),e.fileType||(s.message="Error in File Node",e.errors.fileType="File type is required");const o=e.files&&P(e.files,e.fileType);return(a&&0===(null===(t=e.urls)||void 0===t?void 0:t.length)&&!o||!a&&!o)&&(s.message="Error in File Node",e.errors.fileOrUrl="Either valid URLs or valid files must be provided"),s},z=e=>{const t={};return e.errors={},e.message?(e.message.length<3||e.message.length>500)&&(t.message="Error in Maps Node",e.errors.message="Message must be between 3 and 500 characters"):(t.message="Error in Maps Node",e.errors.message="Message is required"),e.url&&R(e.url)||(t.message="Error in Maps Node",e.errors.url="URL must be valid"),t},P=(e,t)=>{if(!e||0===e.length)return!1;const s={pdf:["pdf","application/pdf"],"application/pdf":["pdf","application/pdf"],images:["jpg","jpeg","png","gif"],"image/*":["jpg","jpeg","png","gif"],video:["mp4","avi","mov"],"video/*":["mp4","avi","mov"]}[t];return e.every(e=>{var t;const a=null===(t=e.name.split(".").pop())||void 0===t?void 0:t.toLowerCase();return Array.isArray(s)?s.includes(a||""):a===s})},R=e=>/^(http|https|ftp):\/\/[^\s/$.?#].[^\s]*$/i.test(e),q=(e,t)=>{var s;switch(t=null===(s=t)||void 0===s?void 0:s.trim(),e){case"message":if(!t)return"Message is required";if(t.length<3)return"Message must be at least 3 characters";if(t.length>500)return"Message must be at most 500 characters";break;case"title":if(!t)return"Title is required";if(t.length<1)return"Title must be at least 1 characters";if(t.length>500)return"Title must be at most 500 characters";break;case"leadEmailTo":if(t&&!/\S+@\S+\.\S+/.test(t))return"Lead Email To is invalid";break;case"leadEmailCc":if(t&&!/\S+@\S+\.\S+/.test(t))return"Lead Email CC is invalid"}return""},W=e=>{const t={};if(e.errors={},e.message||(t.message="Error in Question Node",e.errors.message="A message is required"),e.fieldType||(t.message="Error in Question Node",e.errors.fieldType="Question Type is required"),e.property){/^[a-zA-Z0-9-_]+$/.test(e.property.trim())||(t.message="Error in Question Node",e.errors.property="Property can only contain alphanumeric characters, hyphens (-), and underscores (_), and should not have spaces.")}switch(e.fieldType){case c.bh.DATE:{const s=d()().startOf("day"),a=d()().add(3,"months").endOf("day"),o=e.min?d()(e.min).startOf("day"):s,r=e.max?d()(e.max).endOf("day"):a;o&&o.isBefore(s)&&(t.message="Error in Question Node",e.errors.min="Min date cannot be before today."),r&&r.isAfter(a)&&(t.message="Error in Question Node",e.errors.max="Max date cannot be more than 3 months from today."),o&&r&&o.isAfter(r)&&(t.message="Error in Question Node",e.errors.min="Min date cannot be after Max date.");break}case c.bh.DATETIME:{const s=e.min?d()(e.min):null,a=e.max?d()(e.max):null,o=d()().startOf("day"),r=d()().add(3,"months").endOf("day");s&&s.isBefore(o)&&(t.message="Error in Question Node",e.errors.min="Min datetime cannot be before today."),a&&a.isAfter(r)&&(t.message="Error in Question Node",e.errors.max="Max datetime cannot be more than 3 months from today."),s&&a&&s.isAfter(a)&&(t.message="Error in Question Node",e.errors.min="Min datetime cannot be after Max datetime.");break}case c.bh.TIME:{const s=e.min?d()(e.min):null,a=e.max?d()(e.max):null,o=d()().startOf("day"),r=d()().endOf("day");s&&s.isBefore(o)&&(t.message="Error in Question Node",e.errors.min="Min time cannot be before today."),a&&a.isAfter(r)&&(t.message="Error in Question Node",e.errors.max="Max time cannot be after today."),s&&a&&s.isAfter(a)&&(t.message="Error in Question Node",e.errors.min="Min time cannot be after Max time.");break}case"custom":e.custom||(t.message="Error in Question Node",e.errors.custom="A custom regex is required.");break;case"string":case"number":case"age":{const s=e.min?parseInt(e.min,10):void 0,a=e.max?parseInt(e.max,10):void 0,o=U(s,a,e.fieldType);o&&(t.message="Error in Question Node",e.errors.answer=o);break}}return t},U=(e,t,s)=>{if(e&&"number"!==typeof e||t&&"number"!==typeof t)return`Both min and max values must be valid numbers for ${s}.`;if(e&&t&&e>t)return`Min value cannot be greater than Max value for ${s}.`;if("string"===s){if(e&&e<3)return"Min length for string must be at least 3.";if(t&&t>2500)return"Max length for string must not exceed 500."}if("number"===s){const a=1,o=9999999999;if(e&&(e<a||e>o))return`Min value for ${s} must be between ${a} and ${o}.`;if(t&&(t<a||t>o))return`Max value for ${s} must be between ${a} and ${o}.`}return""},V=e=>{const t={};return e.errors={},["message","successMessage","failureMessage"].forEach(s=>X(e[s],s,t,"Call Connect",e)),["callConnectId","callAccepted","callRejected"].forEach(s=>X(e[s],s,t,"Call Connect",e,!1)),t},_=e=>{const t={};return e.errors={},X(e.message,"message",t,"OTP",e),X(e.otpType,"otpType",t,"OTP",e,!1),t},Q=(e,t,s,a,o)=>{let r="";switch(e){case"message":t?t.length<3?r="Message must be at least 3 characters":t.length>500&&(r="Message must be at most 500 characters"):r="Message is required";break;case"property":t?t.length<3?r="Property must be at least 3 characters":t.length>500?r="Property must be at most 500 characters":/^[A-Za-z][\w]*$/.test(t)?null!==o&&void 0!==o&&o.has(t)&&(r="Property name must be unique"):r="Property must start with a letter, cannot contain spaces, or special characters like '@', and should not start with a number":r="Property is required";break;case"title":t?t.length<3?r="Title must be at least 1 character":t.length>500&&(r="Title must be at most 500 characters"):r="Title is required";break;case"whatsAppQuestion":t?t.length<3?r="whatsAppQuestion must be at least 1 character":t.length>500&&(r="whatsAppQuestion must be at most 500 characters"):r="whatsAppQuestion is required";break;case"fieldType":t||(r="Field Type is required");break;case"custom":s===e&&(t||(r="A custom regex is required."));break;case"min":case"max":if(!c.bh.PHONE_NUMBER&&!c.bh.EMAIL)switch(t||(r="Field Type is required"),s){case"string":case"number":{const e=null!==a&&void 0!==a&&a.min?parseInt(a.min,10):void 0,t=null!==a&&void 0!==a&&a.max?parseInt(a.max,10):void 0,o=U(e,t,s);o&&(r=o);break}case c.bh.DATE:{const e=d()().startOf("day"),t=d()().add(3,"months").endOf("day"),s=null!==a&&void 0!==a&&a.min?d()(null===a||void 0===a?void 0:a.min).startOf("day"):e,o=null!==a&&void 0!==a&&a.max?d()(null===a||void 0===a?void 0:a.max).endOf("day"):t;s.isBefore(e)&&(r="Min date cannot be before today."),o.isAfter(t)&&(r="Max date cannot be more than 3 months from today."),s.isAfter(o)&&(r="Min date cannot be after Max date.");break}case c.bh.DATETIME:{const e=null!==a&&void 0!==a&&a.min?d()(a.min):null,t=null!==a&&void 0!==a&&a.max?d()(a.max):null,s=d()().startOf("day"),o=d()().add(3,"months").endOf("day");e&&e.isBefore(s)&&(r="Min datetime cannot be before today."),t&&t.isAfter(o)&&(r="Max datetime cannot be more than 3 months from today."),e&&t&&e.isAfter(t)&&(r="Min datetime cannot be after Max datetime.");break}case c.bh.TIME:{const e=null!==a&&void 0!==a&&a.min?d()(a.min):null,t=null!==a&&void 0!==a&&a.max?d()(a.max):null,s=d()().startOf("day"),o=d()().endOf("day");e&&e.isBefore(s)&&(r="Min time cannot be before today."),t&&t.isAfter(o)&&(r="Max time cannot be after today."),e&&t&&e.isAfter(t)&&(r="Min time cannot be after Max time.");break}}}return r};function X(e,t,s,a,o){e?(!(arguments.length>5&&void 0!==arguments[5])||arguments[5])&&(e.length<3||e.length>500)&&(s.message=`Error in ${t} Node`,o.errors[t]=`${t} must be between 3 and 500 characters`):(s.message=`Error in ${a} Node`,o.errors[t]=`${t} is required`)}const G=(e,t,s)=>{const a=e.data,o={},r={};a.errors={};let i=[];const l=O(e.id,s,t);if(i=D(l),a.url&&0!==a.url.length){const e=a.url.match(/\{(.*?)\}/);if(e){var n;const t=null===(n=e[1])||void 0===n?void 0:n.trim();/^[a-zA-Z0-9-_]+$/.test(t)&&0!=i.length&&i.includes(t)||(r.url="HTTP Node - Property can only contain alphanumeric characters, hyphens (-), and underscores (_), and should not have spaces.")}}else o.message="Error in HTTP Node";return a.requestType&&0!==a.requestType.length||(o.message="Error in HTTP Node"),a.statusWiseFlow.length&&a.statusWiseFlow.forEach(e=>{e.statusCode||(o.message="Error in HTTP Node")}),a.params.length&&(a.errors.params=[],a.params.forEach((e,t)=>{const s=Z(e,t,i,"Param",o);s&&Object.keys(s).length>0&&a.errors.params.push({index:t,errors:s.errors})})),a.headers.length&&(a.errors.headers=[],a.headers.forEach((e,t)=>{const s=Z(e,t,i,"Header",o);s&&Object.keys(s).length>0&&a.errors.headers.push({index:t,errors:s.errors})})),a.successFlowId||(o.message="Error in HTTP Node",a.errors.successFlowStatusCode="HTTP Node - Success flow statusCode is mandatory"),a.failureFlowId||(o.message="Error in HTTP Node",a.errors.failureFlowStatusCode="HTTP Node - Failure flow statusCode is mandatory"),a.statusWiseFlow&&a.statusWiseFlow.length>0&&(a.errors.statusWiseFlow=[],a.statusWiseFlow.forEach((e,t)=>{e.statusCode||a.errors.statusWiseFlow.push({index:t,message:"HTTP Node - Status code is mandatory"})})),{newErrors:o,newWarnings:r}},Z=(e,t,s,a,o)=>{var r;const i={},{key:l,valueType:n,value:d}=e;if(l||(i.key=`${a} - Key is mandatory`,o.message="Error in HTTP Node"),n||(i.valueType=`${a} - ValueType is mandatory`,o.message="Error in HTTP Node"),d?"number"===n&&isNaN(Number(d))?(i.value=`${a} - Value is not a valid Number`,o.message="Error in HTTP Node"):"date"!==n||d instanceof Date||(i.value=`${a} - Value is not a valid Date`,o.message="Error in HTTP Node"):(i.value=`${a} - Value is mandatory`,o.message="Error in HTTP Node"),("param"==n||"header"==n)&&0===(null===(r=Object.keys(i))||void 0===r?void 0:r.length)){const e=d.trim();if(e){/^[A-Za-z][\w]*$/.test(e)&&0!==s.length&&s.includes(e)||(i.property=`${a} - Property must contain only alphanumeric characters, hyphens (-), underscores (_), and no spaces.`,o.message="Error in HTTP Node")}else i.property=`${a} - Property must contain only alphanumeric characters, hyphens (-), underscores (_), and no spaces.`,o.message="Error in HTTP Node"}return Object.keys(i).length>0?{index:t,errors:i}:null};var J=s(74248);const Y={Smileys:[{emoji:"\ud83d\ude00",keywords:["grinning","happy","smile"]},{emoji:"\ud83d\ude01",keywords:["grin","smiley","cheerful"]},{emoji:"\ud83d\ude02",keywords:["joy","tears","laugh"]},{emoji:"\ud83e\udd23",keywords:["rofl","roll","laughing"]},{emoji:"\ud83d\ude03",keywords:["smile","happy","joy"]},{emoji:"\ud83d\ude04",keywords:["smiling","joy","happy"]},{emoji:"\ud83d\ude05",keywords:["sweat","relief","nervous"]},{emoji:"\ud83d\ude06",keywords:["laugh","happy","joy"]},{emoji:"\ud83d\ude09",keywords:["wink","flirt","playful"]},{emoji:"\ud83d\ude0a",keywords:["blush","happy","smile"]},{emoji:"\ud83d\ude0b",keywords:["yum","delicious","tasty"]},{emoji:"\ud83d\ude0e",keywords:["cool","sunglasses","chill"]},{emoji:"\ud83d\ude0d",keywords:["love","heart","eyes","romantic"]},{emoji:"\ud83d\ude18",keywords:["kiss","heart","love"]},{emoji:"\ud83d\ude17",keywords:["kiss","face","blowing"]},{emoji:"\ud83d\ude19",keywords:["kiss","smiling","love"]},{emoji:"\ud83d\ude1a",keywords:["kiss","closed","eyes"]},{emoji:"\ud83d\ude42",keywords:["smile","slight","happy"]},{emoji:"\ud83e\udd17",keywords:["hug","face","smile","embrace"]},{emoji:"\ud83e\udd29",keywords:["star","struck","amazed"]},{emoji:"\ud83e\udd14",keywords:["thinking","hmm","curious"]},{emoji:"\ud83e\udd28",keywords:["face","eyebrow","raised"]},{emoji:"\ud83d\ude10",keywords:["neutral","meh","blank"]},{emoji:"\ud83d\ude11",keywords:["expressionless","blank","deadpan"]},{emoji:"\ud83d\ude36",keywords:["silence","no","mouth"]},{emoji:"\ud83d\ude44",keywords:["eye","roll","annoyed"]},{emoji:"\ud83d\ude0f",keywords:["smirk","sly","looking"]},{emoji:"\ud83d\ude23",keywords:["persevere","struggling","face"]},{emoji:"\ud83d\ude25",keywords:["relieved","sweat","exhaled"]},{emoji:"\ud83d\ude2e",keywords:["face","surprise","wow"]},{emoji:"\ud83e\udd24",keywords:["drooling","yum","delicious"]},{emoji:"\ud83d\ude2a",keywords:["sleepy","tired","exhausted"]},{emoji:"\ud83d\ude2f",keywords:["hushed","quiet","speechless"]},{emoji:"\ud83d\ude2b",keywords:["tired","sleepy","exhausted"]},{emoji:"\ud83d\ude34",keywords:["sleeping","zzz","sleep"]},{emoji:"\ud83e\udd22",keywords:["nauseated","sick","face"]},{emoji:"\ud83e\udd75",keywords:["hot","sweating","face"]},{emoji:"\ud83e\udd76",keywords:["cold","freezing","face"]},{emoji:"\ud83d\ude13",keywords:["sweat","sad","disappointed"]},{emoji:"\ud83d\ude20",keywords:["angry","mad","annoyed"]},{emoji:"\ud83d\ude21",keywords:["rage","pout","angry"]},{emoji:"\ud83e\udd2c",keywords:["swearing","angry","censored"]},{emoji:"\ud83d\ude14",keywords:["sad","disappointed","down"]},{emoji:"\ud83d\ude15",keywords:["confused","meh","puzzled"]},{emoji:"\ud83d\ude41",keywords:["frowning","sad","unhappy"]},{emoji:"\ud83d\ude1f",keywords:["worried","anxious","concerned"]},{emoji:"\ud83d\ude16",keywords:["confounded","distressed","upset"]},{emoji:"\ud83d\ude22",keywords:["crying","sad","tears"]},{emoji:"\ud83d\ude2d",keywords:["sob","cry","tear"]},{emoji:"\ud83d\ude29",keywords:["weary","tired","exhausted"]},{emoji:"\ud83d\ude23",keywords:["persevere","struggle","sad"]},{emoji:"\ud83d\ude1e",keywords:["disappointed","sad","upset"]},{emoji:"\ud83d\ude24",keywords:["triumph","proud","smug"]},{emoji:"\ud83d\ude2b",keywords:["tired","exhausted","sad"]},{emoji:"\ud83d\ude30",keywords:["anxious","sad","worried"]},{emoji:"\ud83d\ude31",keywords:["screaming","shock","scared"]},{emoji:"\ud83d\ude33",keywords:["flushed","embarrassed","shocked"]},{emoji:"\ud83e\udd2f",keywords:["mind","blown","shock"]},{emoji:"\ud83e\udd20",keywords:["cowboy","hat","cheerful"]},{emoji:"\ud83e\udd73",keywords:["party","celebrating","fun"]},{emoji:"\ud83d\ude0e",keywords:["cool","shade","sunglasses"]},{emoji:"\ud83e\udd13",keywords:["nerd","smart","studious"]},{emoji:"\ud83e\uddd0",keywords:["monocle","curious","inspect"]},{emoji:"\ud83d\ude26",keywords:["frowning","sad","upset"]},{emoji:"\ud83d\ude27",keywords:["anguished","distressed","sad"]},{emoji:"\ud83d\ude32",keywords:["astonished","surprised","shocked"]},{emoji:"\ud83e\udd7a",keywords:["pleading","sad","cute"]},{emoji:"\ud83d\ude35",keywords:["dizzy","confused","woozy"]},{emoji:"\ud83e\udd10",keywords:["zipper","mouth","shutup"]},{emoji:"\ud83e\udd15",keywords:["head","injury","sick"]}],Animals:[{emoji:"\ud83d\udc31",keywords:["cat","pet","feline"]},{emoji:"\ud83d\udc36",keywords:["dog","pet","puppy"]},{emoji:"\ud83d\udc2d",keywords:["mouse","rodent","small"]},{emoji:"\ud83d\udc39",keywords:["hamster","pet","small"]},{emoji:"\ud83d\udc30",keywords:["rabbit","bunny","pet"]},{emoji:"\ud83e\udd8a",keywords:["fox","wild","animal"]},{emoji:"\ud83d\udc3b",keywords:["bear","wild","animal"]},{emoji:"\ud83d\udc3c",keywords:["panda","bear","animal"]},{emoji:"\ud83d\udc28",keywords:["koala","bear","animal"]},{emoji:"\ud83d\udc2f",keywords:["tiger","wild","bigcat"]},{emoji:"\ud83e\udd81",keywords:["lion","wild","king"]},{emoji:"\ud83d\udc2e",keywords:["cow","farm","animal"]},{emoji:"\ud83d\udc37",keywords:["pig","farm","animal"]},{emoji:"\ud83d\udc38",keywords:["frog","amphibian","animal"]},{emoji:"\ud83d\udc35",keywords:["monkey","animal","primate"]},{emoji:"\ud83e\udd84",keywords:["unicorn","mythical","animal"]},{emoji:"\ud83d\udc34",keywords:["horse","equine","animal"]},{emoji:"\ud83d\udc24",keywords:["chick","baby","bird"]},{emoji:"\ud83e\udd9c",keywords:["parrot","bird","talking"]},{emoji:"\ud83e\udda2",keywords:["swan","bird","majestic"]},{emoji:"\ud83e\udd89",keywords:["owl","bird","night"]},{emoji:"\ud83e\udd87",keywords:["bat","night","animal"]},{emoji:"\ud83d\udc3a",keywords:["wolf","animal","wild"]},{emoji:"\ud83d\udc17",keywords:["boar","wild","animal"]},{emoji:"\ud83d\udc39",keywords:["hamster","animal","pet"]},{emoji:"\ud83e\udd94",keywords:["hedgehog","animal","cute"]},{emoji:"\ud83d\udc26",keywords:["bird","animal","flying"]},{emoji:"\ud83d\udc27",keywords:["penguin","bird","cold"]},{emoji:"\ud83e\udd80",keywords:["crab","sea","animal"]},{emoji:"\ud83e\udd9e",keywords:["lobster","sea","animal"]},{emoji:"\ud83e\udd90",keywords:["shrimp","sea","animal"]},{emoji:"\ud83d\udc22",keywords:["turtle","reptile","animal"]},{emoji:"\ud83e\udd8e",keywords:["lizard","reptile","animal"]},{emoji:"\ud83d\udc0d",keywords:["snake","reptile","animal"]},{emoji:"\ud83e\udd95",keywords:["sauropod","dinosaur","extinct"]},{emoji:"\ud83e\udd96",keywords:["T-Rex","dinosaur","extinct"]},{emoji:"\ud83d\udc19",keywords:["octopus","sea","animal"]},{emoji:"\ud83d\udc2c",keywords:["dolphin","sea","animal"]},{emoji:"\ud83d\udc33",keywords:["whale","sea","animal"]},{emoji:"\ud83d\udc1f",keywords:["fish","sea","animal"]},{emoji:"\ud83d\udc20",keywords:["tropical","fish","sea"]},{emoji:"\ud83d\udc21",keywords:["blowfish","sea","animal"]},{emoji:"\ud83d\udc2c",keywords:["dolphin","sea","animal"]},{emoji:"\ud83e\udd88",keywords:["shark","sea","animal"]},{emoji:"\ud83d\udc0a",keywords:["crocodile","reptile","animal"]},{emoji:"\ud83d\udc05",keywords:["tiger","wild","animal"]},{emoji:"\ud83d\udc06",keywords:["leopard","wild","animal"]},{emoji:"\ud83e\udd93",keywords:["zebra","wild","animal"]},{emoji:"\ud83e\udd8d",keywords:["gorilla","wild","animal"]},{emoji:"\ud83e\udda7",keywords:["orangutan","wild","animal"]},{emoji:"\ud83e\udd8f",keywords:["rhinoceros","wild","animal"]},{emoji:"\ud83e\udd9b",keywords:["hippopotamus","wild","animal"]},{emoji:"\ud83d\udc03",keywords:["water buffalo","wild","animal"]},{emoji:"\ud83d\udc02",keywords:["ox","farm","animal"]},{emoji:"\ud83e\udd92",keywords:["giraffe","wild","animal"]},{emoji:"\ud83d\udc18",keywords:["elephant","wild","animal"]},{emoji:"\ud83e\udd8f",keywords:["rhinoceros","wild","animal"]},{emoji:"\ud83e\udd87",keywords:["bat","wild","animal"]},{emoji:"\ud83d\udc2b",keywords:["camel","desert","animal"]},{emoji:"\ud83e\udd99",keywords:["llama","animal","farm"]},{emoji:"\ud83e\udd98",keywords:["kangaroo","wild","animal"]},{emoji:"\ud83e\udda1",keywords:["badger","wild","animal"]},{emoji:"\ud83d\udc29",keywords:["poodle","dog","animal"]},{emoji:"\ud83d\udc15",keywords:["dog","animal","pet"]},{emoji:"\ud83d\udc08",keywords:["cat","animal","pet"]},{emoji:"\ud83d\udc13",keywords:["rooster","farm","bird"]},{emoji:"\ud83d\udc08\u200d\u2b1b",keywords:["black cat","animal","pet"]},{emoji:"\ud83d\udc16",keywords:["pig","farm","animal"]},{emoji:"\ud83d\udc09",keywords:["dragon","mythical","animal"]},{emoji:"\ud83d\udc07",keywords:["rabbit","animal","pet"]},{emoji:"\ud83e\udda2",keywords:["swan","bird","majestic"]},{emoji:"\ud83d\udc15\u200d\ud83e\uddba",keywords:["service dog","animal","service"]},{emoji:"\ud83e\udda1",keywords:["badger","wild","animal"]},{emoji:"\ud83d\udc16",keywords:["pig","animal","farm"]},{emoji:"\ud83e\udda8",keywords:["skunk","wild","animal"]},{emoji:"\ud83e\udda1",keywords:["badger","wild","animal"]},{emoji:"\ud83e\udda6",keywords:["otter","wild","animal"]},{emoji:"\ud83e\udda8",keywords:["skunk","wild","animal"]},{emoji:"\ud83e\udda6",keywords:["otter","wild","animal"]},{emoji:"\ud83e\udda5",keywords:["sloth","wild","animal"]},{emoji:"\ud83e\udda9",keywords:["flamingo","wild","bird"]},{emoji:"\ud83e\udda9",keywords:["flamingo","wild","bird"]},{emoji:"\ud83e\udd92",keywords:["giraffe","wild","animal"]}],Food:[{emoji:"\ud83c\udf4f",keywords:["apple","green apple","fruit"]},{emoji:"\ud83c\udf4e",keywords:["apple","red apple","fruit"]},{emoji:"\ud83c\udf50",keywords:["pear","fruit"]},{emoji:"\ud83c\udf4a",keywords:["tangerine","orange","fruit"]},{emoji:"\ud83c\udf4b",keywords:["lemon","fruit"]},{emoji:"\ud83c\udf4c",keywords:["banana","fruit"]},{emoji:"\ud83c\udf49",keywords:["watermelon","fruit"]},{emoji:"\ud83c\udf47",keywords:["grapes","fruit","vineyard"]},{emoji:"\ud83c\udf53",keywords:["strawberry","fruit"]},{emoji:"\ud83c\udf48",keywords:["melon","fruit"]},{emoji:"\ud83c\udf52",keywords:["cherries","fruit"]},{emoji:"\ud83c\udf51",keywords:["peach","fruit"]},{emoji:"\ud83c\udf4d",keywords:["pineapple","fruit"]},{emoji:"\ud83e\udd6d",keywords:["mango","fruit"]},{emoji:"\ud83e\udd65",keywords:["coconut","fruit"]},{emoji:"\ud83e\udd5d",keywords:["kiwi","fruit"]},{emoji:"\ud83c\udf45",keywords:["tomato","vegetable"]},{emoji:"\ud83c\udf46",keywords:["eggplant","vegetable"]},{emoji:"\ud83e\udd51",keywords:["avocado","fruit"]},{emoji:"\ud83e\udd52",keywords:["cucumber","vegetable"]},{emoji:"\ud83e\udd6c",keywords:["leafy greens","vegetable","lettuce"]},{emoji:"\ud83e\udd66",keywords:["broccoli","vegetable"]},{emoji:"\ud83c\udf3d",keywords:["corn","vegetable"]},{emoji:"\ud83c\udf36",keywords:["hot pepper","vegetable","spicy"]},{emoji:"\ud83e\udd55",keywords:["carrot","vegetable"]},{emoji:"\ud83e\uddc4",keywords:["garlic","vegetable"]},{emoji:"\ud83e\uddc5",keywords:["onion","vegetable"]},{emoji:"\ud83e\udd54",keywords:["potato","vegetable"]},{emoji:"\ud83c\udf60",keywords:["yam","vegetable","sweet potato"]},{emoji:"\ud83e\udd50",keywords:["croissant","bread"]},{emoji:"\ud83c\udf5e",keywords:["bread","loaf"]},{emoji:"\ud83e\udd56",keywords:["baguette","bread"]},{emoji:"\ud83e\udd68",keywords:["pretzel","bread","snack"]},{emoji:"\ud83e\udd6f",keywords:["bagel","bread"]},{emoji:"\ud83e\udd5e",keywords:["pancakes","breakfast"]},{emoji:"\ud83e\uddc7",keywords:["waffle","breakfast"]},{emoji:"\ud83e\uddc0",keywords:["cheese","dairy"]},{emoji:"\ud83c\udf56",keywords:["meat","bone","food"]},{emoji:"\ud83c\udf57",keywords:["poultry leg","chicken leg","food"]},{emoji:"\ud83e\udd69",keywords:["cut of meat","steak","food"]},{emoji:"\ud83c\udf64",keywords:["fried shrimp","seafood"]},{emoji:"\ud83e\udd5a",keywords:["egg","food","breakfast"]},{emoji:"\ud83c\udf73",keywords:["cooking","egg","fried egg"]},{emoji:"\ud83e\udd53",keywords:["bacon","meat","breakfast"]},{emoji:"\ud83e\udd57",keywords:["salad","food","healthy"]},{emoji:"\ud83c\udf72",keywords:["pot of food","soup","stew"]},{emoji:"\ud83c\udf7f",keywords:["popcorn","snack","movies"]},{emoji:"\ud83e\uddc8",keywords:["butter","food"]},{emoji:"\ud83c\udf71",keywords:["bento box","sushi","Japanese food"]},{emoji:"\ud83c\udf63",keywords:["sushi","Japanese food"]},{emoji:"\ud83c\udf5b",keywords:["curry","rice","food"]},{emoji:"\ud83c\udf5c",keywords:["noodles","ramen","bowl"]},{emoji:"\ud83c\udf5d",keywords:["spaghetti","pasta","food"]},{emoji:"\ud83e\udd5f",keywords:["dumpling","food"]},{emoji:"\ud83c\udf60",keywords:["sweet potato","food"," roasted"]},{emoji:"\ud83c\udf64",keywords:["shrimp","food","fried"]},{emoji:"\ud83c\udf62",keywords:["oden","food","skewer"]},{emoji:"\ud83c\udf75",keywords:["tea","cup"]},{emoji:"\ud83e\udd5b",keywords:["milk","glass"]},{emoji:"\u2615",keywords:["coffee","cup"]},{emoji:"\ud83c\udf70",keywords:["cake","dessert","birthday"]},{emoji:"\ud83c\udf82",keywords:["birthday cake","dessert"]},{emoji:"\ud83c\udf69",keywords:["doughnut","dessert"]},{emoji:"\ud83c\udf6a",keywords:["cookie","dessert"]},{emoji:"\ud83c\udf6d",keywords:["lollipop","candy"]},{emoji:"\ud83c\udf6b",keywords:["chocolate","bar","dessert"]},{emoji:"\ud83c\udf6c",keywords:["candy","sweet"]},{emoji:"\ud83c\udf6f",keywords:["honey","honey pot","sweet"]},{emoji:"\ud83e\uddc2",keywords:["salt","condiment"]}],Activity:[{emoji:"\u26bd",keywords:["soccer","football","goal"]},{emoji:"\ud83c\udfc0",keywords:["basketball","hoops","dunk"]},{emoji:"\ud83c\udfc8",keywords:["football","rugby","gridiron"]},{emoji:"\u26be",keywords:["baseball","pitch","bat"]},{emoji:"\ud83c\udfbe",keywords:["tennis","racket","serve"]},{emoji:"\ud83c\udfd0",keywords:["volleyball","spike","serve"]},{emoji:"\ud83c\udfc9",keywords:["rugby","ball","scrum"]},{emoji:"\ud83c\udfb1",keywords:["pool","billiards","eight ball"]},{emoji:"\ud83c\udfd3",keywords:["ping pong","table tennis","paddle"]},{emoji:"\ud83c\udff8",keywords:["badminton","shuttlecock","racket"]},{emoji:"\ud83e\udd45",keywords:["goal","net","hockey"]},{emoji:"\ud83c\udfd2",keywords:["hockey","ice hockey","puck"]},{emoji:"\ud83c\udfd1",keywords:["field hockey","stick","ball"]},{emoji:"\ud83e\udd4d",keywords:["lacrosse","stick","ball"]},{emoji:"\ud83c\udfcf",keywords:["cricket","bat","ball"]},{emoji:"\u26f3",keywords:["golf","flag","hole in one"]},{emoji:"\ud83c\udff9",keywords:["archery","bow","arrow"]},{emoji:"\ud83c\udfa3",keywords:["fishing","fish","rod"]},{emoji:"\ud83e\udd3f",keywords:["scuba","diving","snorkeling"]},{emoji:"\ud83d\udef7",keywords:["sled","sledge","toboggan"]},{emoji:"\ud83e\udd4c",keywords:["curling","stone","sweep"]},{emoji:"\ud83d\udef9",keywords:["skateboard","skating","skate"]},{emoji:"\ud83d\udefc",keywords:["roller skate","skating","rolling"]},{emoji:"\u26f8\ufe0f",keywords:["ice skate","skating","ice"]},{emoji:"\ud83d\udef6",keywords:["canoe","kayak","paddle"]},{emoji:"\u26bd",keywords:["soccer","football","goal"]},{emoji:"\ud83c\udfcb\ufe0f\u200d\u2642\ufe0f",keywords:["weight lifting","gym","workout"]},{emoji:"\ud83c\udfcb\ufe0f\u200d\u2640\ufe0f",keywords:["weight lifting","gym","workout"]},{emoji:"\ud83c\udfcb\ufe0f",keywords:["weight lifting","gym","workout"]},{emoji:"\ud83e\udd3a",keywords:["fencing","sword","duel"]},{emoji:"\ud83e\udd3c\u200d\u2642\ufe0f",keywords:["wrestling","grappling","fight"]},{emoji:"\ud83e\udd3c\u200d\u2640\ufe0f",keywords:["wrestling","grappling","fight"]},{emoji:"\ud83e\udd38\u200d\u2642\ufe0f",keywords:["gymnastics","flip","somersault"]},{emoji:"\ud83e\udd38\u200d\u2640\ufe0f",keywords:["gymnastics","flip","somersault"]},{emoji:"\ud83e\udd3e\u200d\u2642\ufe0f",keywords:["handball","goalie","ball"]},{emoji:"\ud83e\udd3e\u200d\u2640\ufe0f",keywords:["handball","goalie","ball"]},{emoji:"\ud83e\udd39\u200d\u2642\ufe0f",keywords:["juggle","performance","circus"]},{emoji:"\ud83e\udd39\u200d\u2640\ufe0f",keywords:["juggle","performance","circus"]},{emoji:"\ud83e\uddd8\u200d\u2642\ufe0f",keywords:["yoga","meditation","relax"]},{emoji:"\ud83e\uddd8\u200d\u2640\ufe0f",keywords:["yoga","meditation","relax"]},{emoji:"\ud83e\uddd8",keywords:["yoga","meditation","relax"]},{emoji:"\ud83c\udfc4\u200d\u2642\ufe0f",keywords:["surfing","waves","ocean"]},{emoji:"\ud83c\udfc4\u200d\u2640\ufe0f",keywords:["surfing","waves","ocean"]},{emoji:"\ud83c\udfc2",keywords:["snowboarding","snowboard","snow"]},{emoji:"\u26f7\ufe0f",keywords:["skiing","snow","slope"]},{emoji:"\ud83c\udfc7",keywords:["horse racing","jockey","race"]},{emoji:"\ud83d\udeb4\u200d\u2642\ufe0f",keywords:["biking","cycling","bicycle"]},{emoji:"\ud83d\udeb4\u200d\u2640\ufe0f",keywords:["biking","cycling","bicycle"]},{emoji:"\ud83d\udeb5\u200d\u2642\ufe0f",keywords:["mountain biking","cycling","bike"]},{emoji:"\ud83d\udeb5\u200d\u2640\ufe0f",keywords:["mountain biking","cycling","bike"]},{emoji:"\ud83c\udfc7",keywords:["horse racing","jockey","race"]},{emoji:"\ud83e\udd47",keywords:["gold medal","winner","first place"]},{emoji:"\ud83e\udd48",keywords:["silver medal","second place","runner-up"]},{emoji:"\ud83e\udd49",keywords:["bronze medal","third place","winner"]},{emoji:"\ud83c\udfc6",keywords:["trophy","winner","champion"]},{emoji:"\ud83c\udfc5",keywords:["medal","reward","achievement"]},{emoji:"\ud83c\udf96\ufe0f",keywords:["military","decoration","award"]},{emoji:"\ud83c\udff5\ufe0f",keywords:["rosette","badge","award"]},{emoji:"\ud83c\udf97\ufe0f",keywords:["ribbon","cause","support"]}],Travel:[{emoji:"\ud83d\ude97",keywords:["car","automobile","travel","vehicle"]},{emoji:"\ud83d\ude95",keywords:["taxi","cab","transport","vehicle"]},{emoji:"\ud83d\ude99",keywords:["suv","vehicle","travel","transportation"]},{emoji:"\ud83d\ude8c",keywords:["bus","transport","vehicle","travel"]},{emoji:"\ud83d\ude8e",keywords:["trolleybus","public transport","vehicle"]},{emoji:"\ud83c\udfce\ufe0f",keywords:["racecar","racing","vehicle","sport"]},{emoji:"\ud83d\ude93",keywords:["police car","law enforcement","vehicle"]},{emoji:"\ud83d\ude91",keywords:["ambulance","emergency","hospital","vehicle"]},{emoji:"\ud83d\ude92",keywords:["fire truck","firefighter","emergency","vehicle"]},{emoji:"\ud83d\ude90",keywords:["minibus","van","transport","vehicle"]},{emoji:"\ud83d\ude9a",keywords:["delivery truck","cargo","shipping","vehicle"]},{emoji:"\ud83d\ude9b",keywords:["articulated lorry","semi truck","transport"]},{emoji:"\ud83d\ude9c",keywords:["tractor","farming","vehicle","agriculture"]},{emoji:"\ud83c\udfcd\ufe0f",keywords:["motorcycle","bike","riding","vehicle"]},{emoji:"\ud83d\udeb2",keywords:["bicycle","bike","cycling","vehicle"]},{emoji:"\ud83d\udef4",keywords:["kick scooter","scooter","ride","vehicle"]},{emoji:"\ud83d\udef5",keywords:["motor scooter","vespa","vehicle","ride"]},{emoji:"\ud83d\ude8f",keywords:["bus stop","transport","station","public transport"]},{emoji:"\ud83d\udee4\ufe0f",keywords:["railway track","train","rail","travel"]},{emoji:"\u26fd",keywords:["fuel pump","gas station","fuel","transport"]},{emoji:"\ud83d\udea8",keywords:["police light","emergency","alarm","vehicle"]},{emoji:"\ud83d\udea5",keywords:["horizontal traffic light","stoplight","signal"]},{emoji:"\ud83d\udea6",keywords:["vertical traffic light","stoplight","signal"]},{emoji:"\ud83d\uded1",keywords:["stop sign","warning","traffic"]},{emoji:"\ud83d\udea7",keywords:["construction","roadwork","warning"]},{emoji:"\u2693",keywords:["anchor","sailing","maritime","nautical"]},{emoji:"\u26f5",keywords:["sailboat","boat","sailing","watercraft"]},{emoji:"\ud83d\udef6",keywords:["canoe","kayak","paddling","boat"]},{emoji:"\ud83d\udea4",keywords:["speedboat","boat","speed","watercraft"]},{emoji:"\ud83d\udef3\ufe0f",keywords:["passenger ship","cruise","travel","boat"]},{emoji:"\u26f4\ufe0f",keywords:["ferry","boat","nautical","sea"]},{emoji:"\ud83d\udee5\ufe0f",keywords:["motor boat","yacht","boat","watercraft"]},{emoji:"\ud83d\udea2",keywords:["ship","ocean liner","travel","boating"]},{emoji:"\u2708\ufe0f",keywords:["airplane","flight","travel","plane"]},{emoji:"\ud83d\udee9\ufe0f",keywords:["small airplane","flight","aviation","plane"]},{emoji:"\ud83d\udeeb",keywords:["airplane departure","airport","takeoff","flight"]},{emoji:"\ud83d\udeec",keywords:["airplane arrival","landing","airport","flight"]},{emoji:"\ud83e\ude82",keywords:["parachute","skydiving","falling","activity"]},{emoji:"\ud83d\udcba",keywords:["seat","sitting","airline","travel"]},{emoji:"\ud83d\ude81",keywords:["helicopter","chopper","aviation","vehicle"]},{emoji:"\ud83d\ude9f",keywords:["suspension railway","train","transport","public transit"]},{emoji:"\ud83d\udea0",keywords:["mountain cableway","cable car","transport"]},{emoji:"\ud83d\udea1",keywords:["aerial tramway","cable car","transport","travel"]},{emoji:"\ud83d\udef0\ufe0f",keywords:["satellite","space station","orbit","communication"]},{emoji:"\ud83d\ude80",keywords:["rocket","space","launch","spaceship"]},{emoji:"\ud83d\udef8",keywords:["flying saucer","UFO","vehicle","alien"]},{emoji:"\ud83d\udef3\ufe0f",keywords:["passenger ship","cruise","voyage","boat"]},{emoji:"\ud83e\ude82",keywords:["parachute","skydiving","falling","sport"]},{emoji:"\ud83d\udeec",keywords:["landing","airplane","arrival","airport"]},{emoji:"\ud83d\udeeb",keywords:["takeoff","airplane","departure","airport"]},{emoji:"\u2708\ufe0f",keywords:["airplane","flight","travel","plane"]},{emoji:"\ud83d\ude89",keywords:["station","train","subway","transport"]},{emoji:"\ud83d\ude82",keywords:["locomotive","steam train","rail","engine"]},{emoji:"\ud83d\ude83",keywords:["railway car","train car","public transport"]},{emoji:"\ud83d\ude84",keywords:["high-speed train","shinkansen","transport"]},{emoji:"\ud83d\ude85",keywords:["bullet train","high-speed rail","transport"]},{emoji:"\ud83d\ude86",keywords:["train","rail","commuter","public transport"]},{emoji:"\ud83d\ude87",keywords:["subway","metro","underground","public transport"]},{emoji:"\ud83d\ude88",keywords:["light rail","tram","train","public transport"]},{emoji:"\ud83d\ude8a",keywords:["tram","streetcar","public transport","rail"]}],Objects:[{emoji:"\ud83d\udce6",keywords:["box","package"]},{emoji:"\ud83d\udcea",keywords:["mailbox","closed"]},{emoji:"\ud83d\udceb",keywords:["mailbox","open","mail"]},{emoji:"\ud83d\udcec",keywords:["mail","incoming"]},{emoji:"\ud83d\udced",keywords:["mail","outgoing"]},{emoji:"\ud83d\udcee",keywords:["postbox","mail"]},{emoji:"\ud83d\udcef",keywords:["postal horn"]},{emoji:"\ud83d\udcdc",keywords:["scroll","paper"]},{emoji:"\ud83d\udcc3",keywords:["page","curl","document"]},{emoji:"\ud83d\udcd1",keywords:["bookmark","tabs"]},{emoji:"\ud83d\udcc8",keywords:["chart","graph","up"]},{emoji:"\ud83d\udcc9",keywords:["chart","graph","down"]},{emoji:"\ud83d\udcca",keywords:["bar chart","graph"]},{emoji:"\ud83d\udcc7",keywords:["index card"]},{emoji:"\ud83d\udcc1",keywords:["file folder"]},{emoji:"\ud83d\udcc2",keywords:["open file folder"]},{emoji:"\ud83d\uddc2\ufe0f",keywords:["card","file","folders"]},{emoji:"\ud83d\udccb",keywords:["clipboard"]},{emoji:"\ud83d\udce4",keywords:["outbox","mail"]},{emoji:"\ud83d\udce5",keywords:["inbox","mail"]},{emoji:"\ud83d\udce6",keywords:["package","box"]},{emoji:"\ud83d\udce7",keywords:["email","envelope"]},{emoji:"\ud83d\udce8",keywords:["incoming mail"]},{emoji:"\ud83d\udce9",keywords:["envelope","arrow"]},{emoji:"\ud83d\udce4",keywords:["outbox","tray"]},{emoji:"\ud83d\udce5",keywords:["inbox","tray"]},{emoji:"\ud83d\udce6",keywords:["package"]},{emoji:"\ud83d\udce5",keywords:["inbox"]},{emoji:"\ud83d\udce7",keywords:["email"]},{emoji:"\ud83d\udce8",keywords:["incoming"]},{emoji:"\ud83d\udce9",keywords:["envelope"]},{emoji:"\ud83d\udce4",keywords:["outbox"]},{emoji:"\ud83d\udce1",keywords:["satellite","antenna"]},{emoji:"\ud83d\udd0b",keywords:["battery"]},{emoji:"\ud83d\udd0c",keywords:["plug"]},{emoji:"\ud83d\udca1",keywords:["bulb"]},{emoji:"\ud83d\udd26",keywords:["flashlight"]},{emoji:"\ud83d\udd6f\ufe0f",keywords:["candle"]},{emoji:"\ud83e\ude7a",keywords:["stethoscope","doctor"]},{emoji:"\ud83d\udd11",keywords:["key"]},{emoji:"\ud83d\udd12",keywords:["lock"]},{emoji:"\ud83d\udd13",keywords:["unlock"]},{emoji:"\ud83d\udd10",keywords:["lock","key"]},{emoji:"\ud83d\udd0f",keywords:["lock","pen"]},{emoji:"\ud83d\udcce",keywords:["paperclip"]},{emoji:"\ud83d\udd87\ufe0f",keywords:["linked","paperclips"]},{emoji:"\u2702\ufe0f",keywords:["scissors"]},{emoji:"\ud83d\uddc3\ufe0f",keywords:["file box"]},{emoji:"\ud83d\uddf3\ufe0f",keywords:["ballot box"]},{emoji:"\ud83d\uddc4\ufe0f",keywords:["file cabinet"]},{emoji:"\ud83d\udcc5",keywords:["calendar"]},{emoji:"\ud83d\udcc6",keywords:["tear-off calendar"]},{emoji:"\ud83d\uddd3\ufe0f",keywords:["spiral calendar"]},{emoji:"\ud83d\udcc7",keywords:["card index"]},{emoji:"\ud83d\udcc8",keywords:["chart increasing"]},{emoji:"\ud83d\udcc9",keywords:["chart decreasing"]},{emoji:"\ud83d\udcca",keywords:["bar chart"]},{emoji:"\ud83d\udccc",keywords:["pushpin"]},{emoji:"\ud83d\udccd",keywords:["round pushpin"]},{emoji:"\ud83d\udccf",keywords:["straight edge"]},{emoji:"\ud83d\udcd0",keywords:["triangular ruler"]},{emoji:"\u270f\ufe0f",keywords:["pencil"]},{emoji:"\ud83d\udd8d\ufe0f",keywords:["crayon"]},{emoji:"\ud83d\udd8c\ufe0f",keywords:["paintbrush"]},{emoji:"\ud83d\udd8a\ufe0f",keywords:["pen"]},{emoji:"\ud83d\udd8b\ufe0f",keywords:["fountain pen"]},{emoji:"\ud83d\udccf",keywords:["straight edge"]},{emoji:"\ud83d\udcd0",keywords:["triangular ruler"]}],Symbols:[{emoji:"\ud83d\udc49\ud83c\udffb",keywords:["point right","hand","gesture"]},{emoji:"\ud83d\udc48\ud83c\udffb",keywords:["point left","hand","gesture"]},{emoji:"\ud83d\udc46\ud83c\udffb",keywords:["point up","hand","gesture"]},{emoji:"\ud83d\udc47\ud83c\udffb",keywords:["point down","hand","gesture"]},{emoji:"\ud83d\udc4d\ud83c\udffb",keywords:["thumbs up","approval","hand","gesture"]},{emoji:"\ud83d\udc4e\ud83c\udffb",keywords:["thumbs down","disapproval","hand","gesture"]},{emoji:"\ud83d\udc4c\ud83c\udffb",keywords:["okay","hand","gesture","perfect"]},{emoji:"\u270c\ud83c\udffb",keywords:["victory","peace","hand","gesture"]},{emoji:"\ud83e\udd1e\ud83c\udffb",keywords:["crossed fingers","luck","hand","gesture"]},{emoji:"\ud83d\udd90\ud83c\udffb",keywords:["raised hand","hi","hand","gesture"]},{emoji:"\ud83e\udd1a\ud83c\udffb",keywords:["raised back hand","hi","hand","gesture"]},{emoji:"\ud83d\udd96\ud83c\udffb",keywords:["vulcan salute","hand","gesture","Spock"]},{emoji:"\ud83d\udc4b\ud83c\udffb",keywords:["waving hand","hello","goodbye","gesture"]},{emoji:"\ud83d\udc4f\ud83c\udffb",keywords:["clapping hands","applause","gesture"]},{emoji:"\ud83d\ude4c\ud83c\udffb",keywords:["raising hands","praise","gesture"]},{emoji:"\ud83d\udc50\ud83c\udffb",keywords:["open hands","gesture","offering"]},{emoji:"\ud83e\udd32\ud83c\udffb",keywords:["palms up together","offering","asking"]},{emoji:"\ud83e\udd1d\ud83c\udffb",keywords:["handshake","agreement","partnership","gesture"]},{emoji:"\ud83d\ude4f\ud83c\udffb",keywords:["folded hands","prayer","thanks","gesture"]},{emoji:"\u270b\ud83c\udffb",keywords:["raised hand","stop","gesture"]},{emoji:"\u27a1\ufe0f",keywords:["right arrow","direction","next"]},{emoji:"\u2b05\ufe0f",keywords:["left arrow","direction","previous"]},{emoji:"\u2b06\ufe0f",keywords:["up arrow","direction","above"]},{emoji:"\u2b07\ufe0f",keywords:["down arrow","direction","below"]},{emoji:"\u2194\ufe0f",keywords:["left-right arrow","direction"]},{emoji:"\u2195\ufe0f",keywords:["up-down arrow","direction"]},{emoji:"\ud83d\udd3c",keywords:["up triangle","arrow","direction"]},{emoji:"\ud83d\udd3d",keywords:["down triangle","arrow","direction"]},{emoji:"\ud83d\udd3b",keywords:["red down triangle","arrow","direction"]},{emoji:"\ud83d\udd3a",keywords:["red up triangle","arrow","direction"]},{emoji:"\u26ab",keywords:["black circle","bullet","point"]},{emoji:"\ud83d\udd34",keywords:["red circle","bullet","point"]},{emoji:"\ud83d\udd35",keywords:["blue circle","bullet","point"]},{emoji:"\ud83d\udfe2",keywords:["green circle","bullet","point"]},{emoji:"\ud83d\udfe1",keywords:["yellow circle","bullet","point"]},{emoji:"\ud83d\udfe3",keywords:["purple circle","bullet","point"]},{emoji:"\ud83d\udfe0",keywords:["orange circle","bullet","point"]},{emoji:"\ud83d\udfe4",keywords:["brown circle","bullet","point"]},{emoji:"\ud83d\udd38",keywords:["orange diamond","bullet"]},{emoji:"\ud83d\udd39",keywords:["blue diamond","bullet"]},{emoji:"\u2666\ufe0f",keywords:["diamonds","card suit"]},{emoji:"\u2665\ufe0f",keywords:["hearts","card suit"]},{emoji:"\u2663\ufe0f",keywords:["clubs","card suit"]},{emoji:"\u2660\ufe0f",keywords:["spades","card suit"]},{emoji:"\ud83d\udd32",keywords:["black square","bullet","point"]},{emoji:"\ud83d\udd33",keywords:["white square","bullet","point"]},{emoji:"\u25aa\ufe0f",keywords:["small black square","bullet"]},{emoji:"\u25ab\ufe0f",keywords:["small white square","bullet"]},{emoji:"\u25aa",keywords:["large black square","bullet"]},{emoji:"\u25ab",keywords:["large white square","bullet"]},{emoji:"\ud83d\udd18",keywords:["radio button","bullet","point"]},{emoji:"\u2b50",keywords:["star","highlight","point"]},{emoji:"\ud83d\udca0",keywords:["diamond shape","point"]},{emoji:"\u2733\ufe0f",keywords:["eight-pointed star","highlight","bullet"]},{emoji:"\u2747\ufe0f",keywords:["sparkle","highlight","point"]},{emoji:"\u2764\ufe0f",keywords:["love","heart","red","passion","valentine"]},{emoji:"\ud83d\udc9b",keywords:["love","heart","yellow","friendship","sunshine"]},{emoji:"\ud83d\udc9a",keywords:["love","heart","green","environment","jealousy"]},{emoji:"\ud83d\udc99",keywords:["love","heart","blue","calm","loyalty"]},{emoji:"\ud83d\udc9c",keywords:["love","heart","purple","royalty","romance"]},{emoji:"\ud83d\udda4",keywords:["love","heart","black","mystery","gothic"]},{emoji:"\ud83d\udc94",keywords:["broken","heartbreak","sad","love"]},{emoji:"\u2763\ufe0f",keywords:["exclamation","heart","love","emotion"]},{emoji:"\ud83d\udc95",keywords:["two hearts","love","affection","romance"]},{emoji:"\ud83d\udc9e",keywords:["revolving hearts","love","romance","affection"]},{emoji:"\ud83d\udc93",keywords:["beating heart","love","heartbeat","emotion"]},{emoji:"\ud83d\udc97",keywords:["growing heart","love","affection","emotion"]},{emoji:"\ud83d\udc96",keywords:["sparkling heart","love","affection","emotion"]},{emoji:"\ud83d\udc98",keywords:["heart with arrow","love","cupid","valentine"]},{emoji:"\ud83d\udc9d",keywords:["heart with ribbon","love","gift","present"]},{emoji:"\ud83d\udc9f",keywords:["heart decoration","love","affection","decoration"]},{emoji:"\u262e\ufe0f",keywords:["peace","symbol","pacifism"]},{emoji:"\u271d\ufe0f",keywords:["cross","christianity","religion","faith"]},{emoji:"\u262a\ufe0f",keywords:["star","crescent","islam","religion"]},{emoji:"\ud83d\udd49\ufe0f",keywords:["om","hinduism","religion","chant"]},{emoji:"\u2638\ufe0f",keywords:["wheel of dharma","buddhism","religion","spirituality"]},{emoji:"\u2721\ufe0f",keywords:["star of david","judaism","religion"]},{emoji:"\ud83d\udd2f",keywords:["star","hexagram","religion","jewish"]},{emoji:"\ud83d\udd4e",keywords:["menorah","hanukkah","religion","jewish"]},{emoji:"\u262f\ufe0f",keywords:["yin","yang","balance","taoism"]},{emoji:"\u2626\ufe0f",keywords:["orthodox cross","christianity","religion","faith"]},{emoji:"\ud83d\uded0",keywords:["place of worship","religion","faith","prayer"]},{emoji:"\u26ce",keywords:["ophiuchus","zodiac","astrology","sign"]},{emoji:"\u2648",keywords:["aries","zodiac","astrology","sign"]},{emoji:"\u2649",keywords:["taurus","zodiac","astrology","sign"]},{emoji:"\u264a",keywords:["gemini","zodiac","astrology","sign"]},{emoji:"\u264b",keywords:["cancer","zodiac","astrology","sign"]},{emoji:"\u264c",keywords:["leo","zodiac","astrology","sign"]},{emoji:"\u264d",keywords:["virgo","zodiac","astrology","sign"]},{emoji:"\u264e",keywords:["libra","zodiac","astrology","sign"]},{emoji:"\u264f",keywords:["scorpio","zodiac","astrology","sign"]},{emoji:"\u2650",keywords:["sagittarius","zodiac","astrology","sign"]},{emoji:"\u2651",keywords:["capricorn","zodiac","astrology","sign"]},{emoji:"\u2652",keywords:["aquarius","zodiac","astrology","sign"]},{emoji:"\u2653",keywords:["pisces","zodiac","astrology","sign"]},{emoji:"\ud83c\udd94",keywords:["ID","identification","label"]},{emoji:"\u269b\ufe0f",keywords:["atom","science","chemistry"]},{emoji:"\ud83c\ude51",keywords:["acceptable","kanji","japanese"]},{emoji:"\u2622\ufe0f",keywords:["radioactive","hazard","warning"]},{emoji:"\u2623\ufe0f",keywords:["biohazard","hazard","warning"]},{emoji:"\ud83d\udcf4",keywords:["mobile","off","phone"]},{emoji:"\ud83d\udcf3",keywords:["mobile","vibration","mode"]},{emoji:"\ud83c\ude36",keywords:["have","kanji","japanese"]},{emoji:"\ud83c\ude1a",keywords:["free","not","kanji"]},{emoji:"\ud83c\ude37\ufe0f",keywords:["monthly","kanji","japanese"]},{emoji:"\ud83c\ude38",keywords:["application","kanji","japanese"]},{emoji:"\ud83c\ude3a",keywords:["open","kanji","japanese"]},{emoji:"\ud83c\ude2f",keywords:["reserved","kanji","japanese"]},{emoji:"\u3299\ufe0f",keywords:["secret","kanji","japanese"]},{emoji:"\u3297\ufe0f",keywords:["congratulations","kanji","japanese"]},{emoji:"\ud83c\ude34",keywords:["passing","kanji","japanese"]},{emoji:"\ud83c\ude35",keywords:["full","kanji","japanese"]},{emoji:"\ud83c\ude39",keywords:["discount","kanji","japanese"]},{emoji:"\ud83c\ude32",keywords:["prohibited","kanji","japanese"]},{emoji:"\ud83c\udd70\ufe0f",keywords:["A","blood type","letter"]},{emoji:"\ud83c\udd71\ufe0f",keywords:["B","blood type","letter"]},{emoji:"\ud83c\udd8e",keywords:["AB","blood type","letter"]},{emoji:"\ud83c\udd91",keywords:["CL","clear","letter"]},{emoji:"\ud83c\udd7e\ufe0f",keywords:["O","blood type","letter"]},{emoji:"\ud83c\udd98",keywords:["SOS","help","emergency"]},{emoji:"\u26d4",keywords:["no","entry","forbidden","stop"]},{emoji:"\ud83d\udcdb",keywords:["badge","label","name"]},{emoji:"\ud83d\udeab",keywords:["no","prohibited","forbidden"]},{emoji:"\ud83d\udcaf",keywords:["100","score","perfect"]},{emoji:"\ud83d\udd1e",keywords:["18","age","restriction"]},{emoji:"\ud83c\udd7f\ufe0f",keywords:["P","parking","letter"]},{emoji:"\ud83c\udd93",keywords:["free","available","letter"]},{emoji:"\u267b\ufe0f",keywords:["recycle","environment","symbol"]},{emoji:"\u203c\ufe0f",keywords:["exclamation","mark","important"]},{emoji:"\u2049\ufe0f",keywords:["exclamation","question","confusion"]},{emoji:"\u2757",keywords:["exclamation","mark"]},{emoji:"\u2755",keywords:["white exclamation","mark"]},{emoji:"\u2753",keywords:["question","mark"]},{emoji:"\u2754",keywords:["white question","mark"]},{emoji:"\ud83d\udd05",keywords:["dim","brightness","low"]},{emoji:"\ud83d\udd06",keywords:["bright","brightness","high"]},{emoji:"\u303d\ufe0f",keywords:["part alternation","mark"]},{emoji:"\u269c\ufe0f",keywords:["fleur-de-lis"]},{emoji:"\ud83d\udd31",keywords:["trident","emblem","symbol"]},{emoji:"\u26a0\ufe0f",keywords:["warning","caution"]},{emoji:"\ud83d\udeb8",keywords:["children","crossing","school"]},{emoji:"\ud83d\udd30",keywords:["beginner","japanese"]},{emoji:"\u267f",keywords:["wheelchair","accessible","disability"]},{emoji:"\ud83d\udead",keywords:["no smoking","cigarette","prohibited"]}]};var K=s(44414);const ee=function(e){let{onSelect:t}=e;const[s,o]=(0,a.useState)(""),r=a.useMemo(()=>Object.entries(Y).reduce((e,t)=>{let[a,o]=t;const r=o.filter(e=>e.keywords.some(e=>e.toLowerCase().includes(s.toLowerCase())));return r.length>0&&(e[a]=r),e},{}),[s]);return(0,K.jsxs)("div",{className:"emoji-picker",children:[(0,K.jsx)("input",{type:"text",placeholder:"Search...",value:s,onChange:e=>o(e.target.value),className:"emoji-search"}),(0,K.jsx)("div",{className:"emoji-categories",children:Object.entries(r).map(e=>{let[s,a]=e;return(0,K.jsxs)("div",{className:"emoji-category",children:[(0,K.jsx)("h3",{className:"emoji-category-title",children:s}),(0,K.jsx)("div",{className:"emoji-list",children:a.map((e,s)=>(0,K.jsx)("span",{onClick:()=>t(e.emoji),title:e.keywords.join(", "),className:"emoji-item",children:e.emoji},s))})]},s)})})]})};function te(e,t){const s=e.selectionStart,a=e.selectionEnd;e.setRangeText(t,s,a,"end")}const se=function(e){let{message:t,onChange:s,onClick:o,minLength:r=2,maxLength:i=1500,placeHolder:l}=e;const[n,d]=a.useState(t),[c,m]=a.useState(!1),u=a.useRef(null);(0,a.useEffect)(()=>{u.current&&(u.current.style.height="auto",u.current.style.height=`${u.current.scrollHeight+2}px`)},[n]);const p=e=>{d(e.target.value),s(e.target.value)},h=e=>{const t=u.current;let s="";switch(e){case"bold":s=`*${t.value.substring(t.selectionStart,t.selectionEnd)}*`;break;case"italic":s=`_${t.value.substring(t.selectionStart,t.selectionEnd)}_`;break;case"strikethrough":s=`~${t.value.substring(t.selectionStart,t.selectionEnd)}~`;break;case"bullet":s=`\u2022 ${t.value.substring(t.selectionStart,t.selectionEnd)}`;break;case"numbered":s=`\n1. ${t.value.substring(t.selectionStart,t.selectionEnd)}`}te(t,s),p({target:t})};return(0,K.jsxs)("div",{className:"message-editor",title:"Message",children:[(0,K.jsxs)("div",{className:"toolbar",children:[(0,K.jsx)("button",{title:"Bold","data-format":"bold",onClick:()=>h("bold"),children:"B"}),(0,K.jsx)("button",{title:"Italic","data-format":"italic",onClick:()=>h("italic"),children:"I"}),(0,K.jsx)("button",{title:"Strikethrough","data-format":"strikethrough",onClick:()=>h("strikethrough"),children:"S"}),(0,K.jsx)("button",{title:"Bullet","data-format":"bullet",onClick:()=>h("bullet"),children:"\u26ab"}),(0,K.jsx)("button",{title:"Numbered","data-format":"numbered",onClick:()=>h("numbered"),children:"\ud83d\udd22"}),(0,K.jsx)("button",{title:"Smiley","data-format":"smiley",onClick:()=>m(e=>!e),children:"\ud83d\ude00"})]}),(0,K.jsx)("textarea",{ref:u,value:n,onChange:p,placeholder:l,onClick:o,className:"nodrag rounded-md",onBlur:e=>{d(e.target.value),s(e.target.value)},minLength:r,maxLength:i}),c&&(0,K.jsx)(ee,{onSelect:e=>{const t=u.current;te(t,e),p({target:t})}})]})},ae=e=>{let{data:t}=e;const{node:s,handleChange:o,onDelete:i,setNodes:l}=t,[n,d]=(0,a.useState)(!1),c=(0,a.useRef)(null),m=(0,a.useCallback)(()=>{l(e=>e.map(e=>e.selected?{...e,selected:!1}:e))},[l]),u=(0,a.useCallback)(e=>{c.current&&!c.current.contains(e.target)&&d(!1)},[]);return(0,a.useEffect)(()=>(document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)),[u]),(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)("div",{ref:c,className:"flow-node bg-gray-800 text-white rounded-md shadow-lg "+(s.data.errors&&Object.keys(s.data.errors).length?"error-in-node":""),children:[(0,K.jsxs)("div",{className:"flex justify-between items-center border-b py-1 px-2 border-b-4 border-indigo-500",children:[(0,K.jsx)("h3",{className:"text-sm font-semibold",children:"Message"}),(0,K.jsx)("button",{className:"text-white bg-red-500 hover:bg-red-700 rounded-full h-6 w-6 flex items-center justify-center text-xl font-extrabold",title:"Delete Message Node",onClick:e=>{e.stopPropagation(),i(s.id)},children:"\xd7"})]}),(0,K.jsxs)("div",{className:"space-y-2 py-2 px-2 pb-3 min-w-36",children:[n?(0,K.jsx)(se,{message:s.data.message,onChange:e=>{delete s.data.errors;const t={...s,data:{...s.data,message:e}};o(s.id,t.data)},onClick:m}):(0,K.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer",onDoubleClick:()=>{d(!0),m()},title:"Double Click ro Enter/Edit the Message",children:[(0,K.jsx)("span",{children:s.data.message||"Enter your message"}),(0,K.jsx)("svg",{className:"w-4 h-4 text-white ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,K.jsx)("path",{d:"M7.127 22.562l-7.127 1.438 1.438-7.128 5.689 5.69zm1.414-1.414l11.228-11.225-5.69-5.692-11.227 11.227 5.689 5.69zm9.768-21.148l-2.816 2.817 5.691 5.691 2.816-2.819-5.691-5.689z"})})]}),s.data.errors&&(0,K.jsx)("small",{className:"text-red-500",children:s.data.errors.message})]})]}),(0,K.jsx)(r.h7,{type:"target",position:r.yX.Top,className:"w-2 h-2 bg-white border-none"}),(0,K.jsx)(r.h7,{type:"source",position:r.yX.Bottom,className:"w-2 h-2 bg-white border-none"})]})},oe=(0,a.memo)(ae),re=e=>{let{data:t,id:s}=e;const{onDelete:a}=t;return(0,K.jsxs)("div",{className:"flow-node bg-gray-800 text-white rounded-md shadow-lg",children:[(0,K.jsxs)("div",{className:"flex justify-between items-center border-b py-1 px-2 border-b-4 border-indigo-500",children:[(0,K.jsx)("h3",{className:"text-sm font-semibold",children:"Lead Form"}),(0,K.jsx)("button",{title:"Delete Lead Form Node",className:"text-white bg-red-500 hover:bg-red-700 rounded-full h-6 w-6 flex items-center justify-center text-xl font-extrabold pt-px",onClick:()=>a(s),children:"\xd7"})]}),(0,K.jsx)("div",{className:"space-y-2 py-2 px-2 pb-3",children:(0,K.jsx)("p",{className:"nodrag",children:"This will display lead form for the visitor"})}),(0,K.jsx)(r.h7,{type:"source",position:r.yX.Bottom,className:"w-2 h-2 bg-white border-none"}),(0,K.jsx)(r.h7,{type:"target",position:r.yX.Top,className:"w-2 h-2 bg-white border-none"})]})},ie=(0,a.memo)(re),le=e=>{let{data:t,id:s}=e;const{onDelete:a}=t;return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("div",{className:"flow-node bg-gray-800 text-white rounded-md shadow-lg",children:(0,K.jsxs)("div",{className:"flex justify-between items-center pb-2 py-2 px-4",children:[(0,K.jsx)("h3",{className:"text-sm font-semibold",children:"Lead Flow"}),(0,K.jsx)("button",{title:"Delete Lead Flow Node",className:"text-white bg-red-500 hover:bg-red-700 rounded-full h-6 w-6 flex items-center justify-center text-xl font-extrabold pt-px",onClick:()=>a(s),children:"\xd7"})]})}),(0,K.jsx)(r.h7,{type:"source",position:r.yX.Bottom,className:"w-2 h-2 bg-white border-none"}),(0,K.jsx)(r.h7,{type:"target",position:r.yX.Top,className:"w-2 h-2 bg-white border-none"})]})},ne=(0,a.memo)(le);s(4064);const de=e=>{let{data:t,id:s}=e;const{onDelete:a}=t;return(0,K.jsxs)("div",{className:"flow-node bg-gray-800 text-white rounded-md shadow-lg",children:[(0,K.jsxs)("div",{className:"flex justify-between items-center border-b py-1 px-2 border-b-4 border-indigo-500",children:[(0,K.jsx)("h3",{className:"text-sm font-semibold",children:"GPT Handler"}),(0,K.jsx)("button",{className:"text-white bg-red-500 hover:bg-red-700 rounded-full h-6 w-6 flex items-center justify-center text-xl font-extrabold pt-px",title:"Delete GPT Handler Node",onClick:()=>a(s),children:"\xd7"})]}),(0,K.jsx)("div",{className:"space-y-2 py-2 px-2 pb-3",children:(0,K.jsx)("p",{className:"nodrag",children:"From here on visitors would be handled by GPT"})}),(0,K.jsx)(r.h7,{type:"target",position:r.yX.Top,className:"w-2 h-2 bg-white border-none"})]})},ce=(0,a.memo)(de),me=e=>{let{data:t,id:s}=e;const{onDelete:a,stop:o}=t;return(0,K.jsxs)("div",{className:"flow-node bg-gray-800 text-white rounded-md shadow-lg",children:[(0,K.jsxs)("div",{className:"flex justify-between items-center py-2 px-2 border-b-4 border-indigo-500",children:[(0,K.jsx)("h3",{className:"text-sm font-semibold",children:"Stop"}),(0,K.jsx)("button",{className:"text-white bg-red-500 hover:bg-red-700 rounded-full h-6 w-6 flex items-center justify-center text-xl font-extrabold pt-px",title:"Delete Stop Node",onClick:()=>a(s),children:"\xd7"})]}),(0,K.jsx)("div",{className:"space-y-2 py-2 px-2 pb-3 min-w-36",children:o||"The chat will stop here"}),(0,K.jsx)(r.h7,{type:"target",position:r.yX.Top,className:"w-2 h-2 bg-white border-none"})]})},ue=e=>{let{data:t}=e;const{message:s}=t.node.data;return(0,K.jsxs)("div",{className:"flow-node bg-gray-800 text-white p-2 rounded-md shadow-lg",children:[(0,K.jsx)("div",{className:"custom-node-body text-center",children:s}),(0,K.jsx)(r.h7,{type:"source",position:r.yX.Bottom,className:"w-2 h-2 bg-white border-none"})]})},pe=(0,a.memo)(ue);var he=s(10226),ge=s(63464),ye=s(88060),xe=s(83239),we=s(82053),be=s(25333),je=s(96319),ve=s(48205),fe=s(22942);const ke=a.forwardRef(function(e,t){return(0,K.jsx)(ve.A,{direction:"up",ref:t,...e})}),Ne=e=>{let{selectedFiles:t,setSelectedFiles:s,closeDialog:o,openDialog:r,mimeType:i,updateAssignedFiles:l}=e;const[n,d]=(0,a.useState)([]);(0,a.useEffect)(()=>{r&&o(!0)},[r]);const c=()=>{o(!1)};return(0,K.jsx)("div",{children:(0,K.jsxs)(ge.A,{fullScreen:!0,open:r,onClose:c,TransitionComponent:ke,children:[(0,K.jsx)(ye.A,{sx:{position:"relative"},children:(0,K.jsxs)(xe.A,{children:[(0,K.jsx)(be.A,{edge:"start",color:"inherit",onClick:c,"aria-label":"close",children:(0,K.jsx)(je.A,{})}),(0,K.jsx)(we.A,{sx:{ml:2,flex:1},variant:"h4",component:"div",children:"Upload OR Select Files"}),(0,K.jsx)(he.A,{autoFocus:!0,color:"inherit",onClick:()=>{const e=n.filter(e=>e.isSelected);s(e),c(),l(e)},children:"Save Selected"})]})}),(0,K.jsx)("div",{className:"p-4",children:(0,K.jsx)(we.A,{variant:"body1",children:(0,K.jsx)(fe.default,{mimeType:i,selectedFiles:t,handleSelection:e=>{d(e)}})})})]})})};var Ce=s(25277),Te=s(41413),Ee=s(57988);const Fe=e=>{switch(e){case"pdf":case"application/pdf":default:return"application/pdf";case"images":case"image":case"image/*":return"image/*";case"video":case"video/*":return"video/*"}},Me=e=>{var t,s,o,i;let{id:l,data:n}=e;const{node:d,onDelete:c,handleChange:m}=n;d.data.fileType=Fe(d.data.fileType);const[u,p]=(0,a.useState)({}),[h,g]=(0,a.useState)(d.data.fileType),[y,x]=(0,a.useState)(!1),[w,b]=(0,a.useState)((null===(t=d.data.files)||void 0===t?void 0:t.length)>0?d.data.files:[]),j=(e,t)=>{let s="";"message"===e&&(t?t.length<3?s="Message must be at least 3 characters":t.length>500&&(s="Message must be at most 500 characters"):s="Message is required"),!s&&("files"===e||"urls"===e)&&d.data.files.length<=0&&d.data.urls.length<=0&&(s="Either Files or Image URLs are mandatory"),p(t=>({...t,[e]:s}))},v=(e,t)=>{delete d.data.errors;const s={...d.data,[e]:t};if(m(d.id,s),d.data=s,"fileType"===e){const e=Fe(t);g(e),d.data.files=[],b([])}};return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)("div",{className:"flow-node bg-gray-800 text-white rounded-md shadow-lg "+(d.data.errors&&Object.keys(d.data.errors).length>0?"error-in-node":""),children:[(0,K.jsxs)("div",{className:"flex justify-between items-center border-b py-1 px-2 border-b-4 border-indigo-500",children:[(0,K.jsx)("h3",{className:"text-sm font-semibold",children:"File Upload"}),(0,K.jsx)("button",{title:"Delete File Node",className:"text-white bg-red-500 hover:bg-red-700 rounded-full h-6 w-6 flex items-center justify-center text-xl font-extrabold",onClick:()=>c(l),children:"\xd7"})]}),(0,K.jsxs)("div",{className:"space-y-2 py-2 px-2 pb-3",children:[(0,K.jsxs)("div",{className:"mb-2",children:[(0,K.jsx)(se,{message:d.data.message,onChange:e=>v("message",e),maxLength:500,minLength:2}),d.data.errors&&(null===(s=Object.keys(d.data.errors))||void 0===s?void 0:s.length)>0&&d.data.errors.message&&(0,K.jsx)("small",{className:"text-red-500",children:d.data.errors.message})]}),(0,K.jsxs)("div",{className:"mb-2",title:"Select File Type",children:[(0,K.jsxs)("select",{value:d.data.fileType,onChange:e=>v("fileType",e.target.value),onBlur:e=>j("fileType",e.target.value),className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded",children:[(0,K.jsx)("option",{value:"",children:"Select File Type"}),(0,K.jsx)("option",{value:"application/pdf",children:"PDF"}),(0,K.jsx)("option",{value:"image/*",children:"Images"}),(0,K.jsx)("option",{value:"video/*",children:"Video"})]}),d.data.errors&&(null===(o=Object.keys(d.data.errors))||void 0===o?void 0:o.length)>0&&d.data.errors.fileType&&(0,K.jsx)("small",{className:"text-red-500",children:d.data.errors.fileType})]}),w&&(0,K.jsx)("div",{className:"d-flex space-y-1",children:w.map((e,t)=>(0,K.jsx)(Ce.A,{title:e.name,avatar:(0,K.jsx)(Te.A,{alt:e.name,src:e.url}),label:e.name,onClick:()=>{return t=e.url,void window.open(t);var t},onDelete:()=>(e=>{const t=w.filter(t=>t.url!==e.url);b(t),d.data.files=t})(e),deleteIcon:(0,K.jsx)(Ee.A,{}),variant:"outlined"},t))}),(0,K.jsx)("div",{className:"mb-2",children:(0,K.jsx)("button",{title:"Click to Select/Add Files",disabled:!d.data.fileType||d.data.urls.length>0,type:"button",onClick:()=>{x(!0)},className:"flex px-2 py-1 font-semibold text-white btn-primary-custom rounded items-center",children:"Add Files"})}),(0,K.jsxs)("div",{className:"mb-1",title:"URLs",children:[d.data.urls.map((e,t)=>{var s;return(0,K.jsxs)("div",{className:"flex items-center mb-1",children:[(0,K.jsx)("input",{type:"text",placeholder:"URL",value:e,onChange:e=>((e,t)=>{const s=d.data.urls.map((s,a)=>a===e?t:s);v("urls",s)})(t,e.target.value),onBlur:e=>j("urls",e.target.value),disabled:d.data.files.length>0,className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded"}),(0,K.jsx)("button",{type:"button",onClick:()=>(e=>{const t=d.data.urls.filter((t,s)=>s!==e);v("urls",t)})(t),className:"text-white bg-red-500 hover:bg-red-700 rounded-full h-4 w-4 px-1 flex items-center justify-center text-sm font-extrabold ml-2",children:"\xd7"}),d.data.errors&&(null===(s=Object.keys(d.data.errors))||void 0===s?void 0:s.length)>0&&d.data.errors.fileOrUrl&&(0,K.jsx)("small",{className:"text-red-500",children:d.data.errors.fileOrUrl})]},t)}),(0,K.jsxs)("button",{title:"Click to add Image Url's",type:"button",onClick:()=>{v("urls",[...d.data.urls,""])},disabled:w.length>0,className:"flex px-2 py-1 font-semibold text-white btn-primary-custom rounded items-center",children:[(0,K.jsx)("svg",{className:"w-4 h-4 text-white font-semibold cursor-pointer hover:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,K.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),d.data.urls.length>0?"Add More":"Add Url"]}),u.urls&&!d.data.errors&&(0,K.jsx)("small",{className:"text-red-500",children:u.urls}),d.data.errors&&(null===(i=Object.keys(d.data.errors))||void 0===i?void 0:i.length)>0&&d.data.errors.fileOrUrl&&(0,K.jsx)("small",{className:"text-red-500",children:d.data.errors.fileOrUrl})]})]})]}),(0,K.jsx)(r.h7,{type:"target",position:r.yX.Top,className:"w-2 h-2 bg-white border-none"}),(0,K.jsx)(r.h7,{type:"source",position:r.yX.Bottom,className:"w-2 h-2 bg-white border-none"}),y&&(0,K.jsx)(Ne,{selectedFiles:w,setSelectedFiles:b,openDialog:y,closeDialog:x,mimeType:h,updateAssignedFiles:e=>{d.data.files=e}})]})},Se=(0,a.memo)(Me),Ie=e=>{var t,s,a,o,i;let{id:l,data:n}=e;const{node:d,onDelete:c,handleChange:m}=n,u=(e,t)=>{delete d.data.errors;const s={...d.data,[e]:t};m(d.id,s)};return(0,K.jsxs)("div",{className:"flow-node bg-gray-800 text-white rounded-md shadow-lg "+(null!==(t=d.data)&&void 0!==t&&t.errors&&Object.keys(d.data.errors).length?"error-in-node":""),children:[(0,K.jsxs)("div",{className:"flex justify-between items-center border-b py-1 px-2 border-b-4 border-indigo-500",children:[(0,K.jsx)("h3",{className:"text-sm font-semibold",children:"Google Maps"}),(0,K.jsx)("button",{title:"Delete Node",className:"text-white bg-red-500 hover:bg-red-700 rounded-full h-6 w-6 flex items-center justify-center text-xl font-extrabold",onClick:()=>c(l),children:"\xd7"})]}),(0,K.jsxs)("div",{className:"py-2 px-2",children:[(0,K.jsxs)("div",{className:"mb-2",children:[(0,K.jsx)(se,{maxLength:500,message:d.data.message,onChange:e=>u("message",e)}),(null===(s=d.data)||void 0===s||null===(a=s.errors)||void 0===a?void 0:a.message)&&(0,K.jsx)("small",{className:"text-red-500",children:d.data.errors.message})]}),(0,K.jsxs)("div",{className:"mb-2",children:[(0,K.jsx)("input",{title:"Map Url",type:"text",value:d.data.url,onChange:e=>u("url",e.target.value),placeholder:"Google Maps URL",className:"nodrag w-full p-1 rounded-md border border-gray-600 bg-gray-700 text-white"}),(null===(o=d.data)||void 0===o||null===(i=o.errors)||void 0===i?void 0:i.url)&&(0,K.jsx)("small",{className:"text-red-500",children:d.data.errors.url})]})]}),(0,K.jsx)(r.h7,{type:"target",position:r.yX.Top,className:"w-2 h-2 bg-white border-none"}),(0,K.jsx)(r.h7,{type:"source",position:r.yX.Bottom,className:"w-2 h-2 bg-white border-none"})]})},Le=(0,a.memo)(Ie);var Oe=s(16497),De=s(37324);const Ae=e=>{var t;let{optionsData:s,save:o,close:r}=e;const[i,l]=(0,a.useState)(s),[n,d]=(0,a.useState)({});(0,a.useEffect)(()=>{l(e=>({...e,subOptions:i.dataSource?[s.subOptions[0]]:s.subOptions}))},[s,i.dataSource]);const c=e=>{const{name:t,value:s}=e.target;l({...i,[t]:s})},m=(e,t,s)=>{if(l({...i,message:e}),t&&(s||0==s)){const a=[...i.subOptions],o={...a[s]};o[t]=e,a[s]=o,l({...i,subOptions:a})}},u=(e,t)=>{const s=q(e,t);d(t=>({...t,[e]:s}))},p=(e,t,s)=>{const a=q(t,s);d(s=>{var o;return{...s,subOptions:{...s.subOptions,[e]:{...null===(o=s.subOptions)||void 0===o?void 0:o[e],[t]:a}}}})},h=(e,t)=>{const{name:s,value:a}=t.target,o=[...i.subOptions],r={...o[e]};r[s]=a,o[e]=r,l({...i,subOptions:o})},y=(e,t)=>{const s=i.subOptions.find(t=>t.id===e);s&&(A(t)?s.leadEmailTo.includes(t)?d(t=>{var s;return{...t,subOptions:{...t.subOptions,[e]:{...null===(s=t.subOptions)||void 0===s?void 0:s[e],leadEmailCc:"This email is already in Lead Email To."}}}}):(l({...i,subOptions:i.subOptions.map(s=>s.id===e?{...s,leadEmailCc:[...s.leadEmailCc,t]}:s)}),d(t=>{var s;return{...t,subOptions:{...t.subOptions,[e]:{...null===(s=t.subOptions)||void 0===s?void 0:s[e],leadEmailCc:""}}}})):d(t=>{var s;return{...t,subOptions:{...t.subOptions,[e]:{...null===(s=t.subOptions)||void 0===s?void 0:s[e],leadEmailCc:"Invalid email address"}}}}))};return(0,K.jsxs)("div",{className:"flow-node fixed inset-0 flex flex-col bg-gray-900 text-white",children:[(0,K.jsx)("div",{className:"fixed top-0 left-0 right-0 bg-gray-800 text-white shadow-md z-10",children:(0,K.jsxs)("div",{className:"modal-header px-4 py-2 flex justify-between items-center",children:[(0,K.jsx)("h5",{className:"modal-title text-lg font-bold",children:"Edit Options"}),(0,K.jsx)("button",{type:"button",className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-xl font-extrabold",title:"Close popup",onClick:r,children:"\xd7"})]})}),(0,K.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 mt-16 mb-20",children:[(0,K.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 mb-4",children:[(0,K.jsx)("div",{className:"min-w-[200px] px-2 shadow-md",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:"Display Text"}),(0,K.jsx)("input",{title:"fieldLabel",type:"text",maxLength:50,className:"form-control form-control-sm w-full px-2 border border-gray-600 bg-gray-700 text-white rounded",name:"fieldLabel",value:i.fieldLabel,onChange:c,onBlur:e=>u("fieldLabel",e.target.value)}),n.fieldLabel&&(0,K.jsx)("small",{className:"text-red-500",children:n.fieldLabel})]})}),(0,K.jsx)("div",{className:"min-w-[200px] px-2 shadow-md",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:"Property Name"}),(0,K.jsx)("input",{title:"Property",type:"text",maxLength:50,className:"form-control form-control-sm w-full px-2 border border-gray-600 bg-gray-700 text-white rounded",name:"property",value:i.property,onChange:c,onBlur:e=>u("property",e.target.value)}),n.property&&(0,K.jsx)("small",{className:"text-red-500",children:n.property})]})}),(0,K.jsx)("div",{className:"min-w-[200px] px-2 shadow-md",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:"Message"}),(0,K.jsx)(se,{maxLength:300,message:i.message,onChange:e=>m(e),onBlur:e=>u("message",e)}),n.message&&(0,K.jsx)("small",{className:"text-red-500",children:n.message})]})}),(0,K.jsx)("div",{className:"min-w-[200px] px-2 shadow-md",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:"Fall back"}),(0,K.jsx)("input",{title:"Fallback",type:"text",maxLength:50,className:"form-control form-control-sm w-full px-2 border border-gray-600 bg-gray-700 text-white rounded",name:"fallback",value:i.fallback,onChange:c,onBlur:e=>u("fallback",e.target.value)}),n.fallback&&(0,K.jsx)("small",{className:"text-red-500",children:n.fallback})]})}),(0,K.jsx)("div",{className:"min-w-[200px] px-2 shadow-md",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:"Data Source"}),(0,K.jsx)("input",{title:"DataSource",type:"text",maxLength:50,className:"form-control form-control-sm w-full px-2 border border-gray-600 bg-gray-700 text-white rounded",name:"dataSource",value:i.dataSource,onChange:c,onBlur:e=>u("dataSource",e.target.value)}),n.dataSource&&(0,K.jsx)("small",{className:"text-red-500",children:n.dataSource})]})})]}),null===(t=i.subOptions)||void 0===t?void 0:t.map((e,t)=>{var s,a,o,r,c,g,x,w,b,j,v,f,k,N,C,T,E,F,M,S,I,L,O,D;return(0,K.jsxs)("div",{className:"accordion px-2 mb-2",children:[(0,K.jsxs)("div",{className:"accordion-header flex items-center p-1 cursor-pointer border border-gray-600 rounded bg-gray-800 hover:bg-gray-700 transition-colors",onClick:()=>(e=>{const t=i.subOptions.map((t,s)=>s===e?{...t,isCollapsed:!t.isCollapsed}:t);l({...i,subOptions:t})})(t),children:[(0,K.jsx)("span",{className:"mr-3",children:e.isCollapsed?(0,K.jsx)("svg",{className:"w-5 h-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,K.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):(0,K.jsx)("svg",{className:"w-5 h-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,K.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),(0,K.jsx)("span",{className:"flex-1",children:e.title||`Sub Option ${t+1}`}),i.subOptions.length>1&&(0,K.jsx)("button",{type:"button",className:"text-white bg-red-500 hover:bg-red-700 rounded-full h-6 w-6 flex items-center justify-center text-xl font-bold ml-4",onClick:e=>{e.stopPropagation(),(e=>{l({...i,subOptions:i.subOptions.filter((t,s)=>s!==e)})})(t)},children:"\xd7"})]}),!e.isCollapsed&&(0,K.jsxs)("div",{className:"accordion-content bg-gray-700 p-2 rounded",children:[(0,K.jsx)("div",{className:"mb-2",children:(0,K.jsx)(Oe.A,{control:(0,K.jsx)(De.A,{name:"isLink",checked:e.isLink,onChange:e=>((e,t)=>{h(e,{...t,target:{name:t.target.name,value:t.target.checked}})})(t,e),color:"primary",sx:{"& .MuiSwitch-thumb":{fontSize:24}}}),label:"Link",className:"text-white cursor-pointer"})}),(0,K.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:[(0,K.jsx)("div",{className:"min-w-[200px]",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:"Title"}),(0,K.jsx)("input",{title:"Title",type:"text",maxLength:50,className:"form-control form-control-sm w-full px-2 border border-gray-600 bg-gray-800 text-white rounded",name:"title",value:e.title,onChange:e=>h(t,e),onBlur:e=>p(t,"title",e.target.value)}),(null===(s=n.subOptions)||void 0===s||null===(a=s[t])||void 0===a?void 0:a.title)&&(0,K.jsx)("small",{className:"text-red-500",children:null===(o=n.subOptions[t])||void 0===o?void 0:o.title})]})}),(0,K.jsx)("div",{className:"min-w-[200px]",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:"Sub Title"}),(0,K.jsx)("input",{title:"Sub Title",type:"text",maxLength:50,className:"form-control form-control-sm w-full px-2 border border-gray-600 bg-gray-800 text-white rounded",name:"subTitle",value:e.subTitle,onChange:e=>h(t,e),onBlur:e=>p(t,"subTitle",e.target.value)}),(null===(r=n.subOptions)||void 0===r||null===(c=r[t])||void 0===c?void 0:c.subTitle)&&(0,K.jsx)("small",{className:"text-red-500",children:null===(g=n.subOptions[t])||void 0===g?void 0:g.subTitle})]})}),(0,K.jsx)("div",{className:"min-w-[200px",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:e.isLink?"URL":"Value"}),(0,K.jsx)("input",{title:"Value",type:"text",maxLength:500,className:"form-control form-control-sm w-full px-2 border border-gray-600 bg-gray-800 text-white rounded",name:"value",value:e.value,onChange:e=>h(t,e),onBlur:e=>p(t,"value",e.target.value)}),(null===(x=n.subOptions)||void 0===x||null===(w=x[t])||void 0===w?void 0:w.value)&&(0,K.jsx)("small",{className:"text-red-500",children:null===(b=n.subOptions[t])||void 0===b?void 0:b.value})]})}),(0,K.jsx)("div",{className:"min-w-[200px",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:"Image url"}),(0,K.jsx)("input",{title:"Image Url",type:"text",maxLength:500,className:"form-control form-control-sm w-full px-2 border border-gray-600 bg-gray-800 text-white rounded",name:"imageUrl",value:e.imageUrl,onChange:e=>h(t,e),onBlur:e=>p(t,"imageUrl",e.target.value)}),(null===(j=n.subOptions)||void 0===j||null===(v=j[t])||void 0===v?void 0:v.value)&&(0,K.jsx)("small",{className:"text-red-500",children:null===(f=n.subOptions[t])||void 0===f?void 0:f.value})]})}),!i.dataSource&&!e.isLink&&(0,K.jsx)("div",{className:"min-w-[200px]",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:"Select Category"}),(0,K.jsxs)("select",{title:"Select Category",style:{height:"25px"},className:"form-control form-control-sm w-full px-2 border border-gray-600 bg-gray-800 text-white rounded",value:e.category,onChange:e=>((e,t)=>{const{value:s}=t.target,a=[...i.subOptions];a[e].category=s,l({...i,subOptions:a})})(t,e),onBlur:e=>p(t,"category",e.target.value),children:[(0,K.jsx)("option",{value:"",children:"Select Category"}),(0,K.jsx)("option",{value:"preSale",children:"Presale"}),(0,K.jsx)("option",{value:"general",children:"General"}),(0,K.jsx)("option",{value:"others",children:"Others"})]}),(null===(k=n.subOptions)||void 0===k||null===(N=k[t])||void 0===N?void 0:N.category)&&(0,K.jsx)("small",{className:"text-red-500",children:null===(C=n.subOptions[t])||void 0===C?void 0:C.category})]})}),!e.isLink&&(0,K.jsx)("div",{className:"min-w-[200px]",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:"Lead Email To"}),(0,K.jsx)("input",{title:"Lead Mail To",autoComplete:"off",maxLength:254,type:"text",className:"form-control form-control-sm w-full px-2 border border-gray-600 bg-gray-800 text-white rounded",name:"leadEmailTo",value:e.leadEmailTo,onChange:e=>h(t,e),onBlur:e=>p(t,"leadEmailTo",e.target.value)}),(null===(T=n.subOptions)||void 0===T||null===(E=T[t])||void 0===E?void 0:E.leadEmailTo)&&(0,K.jsx)("small",{className:"text-red-500",children:null===(F=n.subOptions[t])||void 0===F?void 0:F.leadEmailTo})]})}),!e.isLink&&(0,K.jsx)("div",{className:"min-w-[200px]",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:" Lead Email Cc"}),(0,K.jsxs)("div",{className:"flex flex-wrap items-center border border-gray-600 rounded bg-gray-800",children:[e.leadEmailCc.map(t=>(0,K.jsxs)("div",{className:"flex items-center bg-blue-100 text-blue-800 text-sm rounded-full mr-2 mb-2 px-3 py-1",children:[t,(0,K.jsx)("button",{type:"button",onClick:()=>{return s=e.id,a=t,void l({...i,subOptions:i.subOptions.map(e=>e.id===s?{...e,leadEmailCc:e.leadEmailCc.filter(e=>e!==a)}:e)});var s,a},className:"ml-2 text-red-500 hover:text-red-700 focus:outline-none",children:"\xd7"})]},t)),(0,K.jsx)("input",{title:"Lead Mail CC",style:{padding:"2px",height:"24px"},autoComplete:"off",placeholder:"Type or paste email addresses and press `Enter`",type:"text",className:"flex-grow border-none text-sm border-gray-600 bg-gray-800 text-white rounded",name:"leadEmailCc",onBlur:e=>p(t,"leadEmailCc",e.target.value),onKeyDown:e=>((e,t)=>{if(["Enter","Tab",","].includes(t.key)){t.preventDefault();const s=t.currentTarget.value.trim();s&&(y(i.subOptions[e].id,s),t.currentTarget.value="")}})(t,e),onPaste:t=>((e,t)=>{t.preventDefault();const s=t.clipboardData.getData("text").split(/[ ,;]/).map(e=>e.trim()).filter(e=>""!==e),a=i.subOptions.find(t=>t.id===e);if(!a)return;if(s.filter(e=>!A(e)).length>0)return void d(t=>{var s;return{...t,subOptions:{...t.subOptions,[e]:{...null===(s=t.subOptions)||void 0===s?void 0:s[e],leadEmailCc:"Invalid email address"}}}});s.filter(e=>a.leadEmailTo.includes(e)).length>0?d(t=>{var s;return{...t,subOptions:{...t.subOptions,[e]:{...null===(s=t.subOptions)||void 0===s?void 0:s[e],leadEmailCc:"Some emails are already in Lead Email To"}}}}):(l({...i,subOptions:i.subOptions.map(t=>t.id===e?{...t,leadEmailCc:[...t.leadEmailCc,...s]}:t)}),d(t=>{var s;return{...t,subOptions:{...t.subOptions,[e]:{...null===(s=t.subOptions)||void 0===s?void 0:s[e],leadEmailCc:""}}}}))})(e.id,t)})]}),(null===(M=n.subOptions)||void 0===M||null===(S=M[t])||void 0===S?void 0:S.leadEmailCc)&&(0,K.jsx)("small",{className:"text-red-500",children:null===(I=n.subOptions[t])||void 0===I?void 0:I.leadEmailCc})]})}),(0,K.jsx)("div",{className:"min-w-[200px",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:"Description"}),(0,K.jsx)(se,{maxLength:300,message:e.description,onChange:e=>m(e,"description",t),onBlur:e=>u("description",e)}),(null===(L=n.subOptions)||void 0===L||null===(O=L[t])||void 0===O?void 0:O.description)&&(0,K.jsx)("small",{className:"text-red-500",children:null===(D=n.subOptions[t])||void 0===D?void 0:D.description})]})})]})]})]},t)}),!i.dataSource&&(0,K.jsxs)("button",{className:"flex ml-2 px-2 py-1 font-semibold text-white btn-primary-custom rounded items-center",onClick:()=>{l({...i,subOptions:[...i.subOptions,{id:g(),title:"",subTitle:"",imageUrl:"",value:"",category:"",description:"",isLink:!1,leadEmailTo:"",leadEmailCc:[]}]})},children:[(0,K.jsx)("svg",{className:"w-4 h-4 text-white font-semibold cursor-pointer hover:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,K.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Add"]})]}),(0,K.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-800 text-white shadow-md",children:(0,K.jsxs)("div",{className:"modal-footer py-2 px-4 flex justify-start gap-2",children:[(0,K.jsxs)("button",{type:"button",className:"flex items-center justify-center px-4 py-2 font-semibold text-white btn-primary-custom rounded ",onClick:()=>{o(i)},children:[(0,K.jsx)("svg",{className:"w-6 h-6 text-white cursor-pointer hover:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,K.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 21H7a2 2 0 01-2-2V5a2 2 0 012-2h10a2 2 0 012 2v14a2 2 0 01-2 2zM7 3v4a1 1 0 001 1h8a1 1 0 001-1V3M7 10h10v11H7V10z"})}),"Save"]}),(0,K.jsx)("button",{type:"button",className:"flex items-center justify-center px-4 py-2 font-semibold text-white btn-primary-custom rounded ",onClick:()=>{i.subOptions.forEach(e=>{e.isCollapsed=!0}),o(i),r()},children:"Save & Close"})]})})]})},$e=(0,a.memo)(Ae),Be=e=>{let{subOption:t,index:s,onDelete:a,expandToEdit:o,length:r}=e;return(0,K.jsx)("div",{className:"bg-gray-700 text-white rounded-md p-1 mt-2",style:{padding:"2px 10px",border:"1px solid grey",borderRadius:"4px"},children:(0,K.jsxs)("div",{className:"flex justify-between items-center cursor-pointer grow",children:[(0,K.jsx)("div",{className:"flex justify-between items-center grow min-w-0",children:(0,K.jsxs)("div",{className:"flex min-w-0",children:[(0,K.jsxs)("svg",{onClick:()=>o(s),className:"min-w-4 w-4 h-4 mr-2 text-blue-300 cursor-pointer hover:text-white",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:[(0,K.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,K.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),(0,K.jsx)("strong",{title:t.title,className:"text-sm grow min-w-0",children:t.title?`${t.title}`:"Sub Option"})]})}),r>1&&(0,K.jsx)("div",{children:(0,K.jsx)("button",{type:"button",className:"text-white bg-red-500 hover:bg-red-700 rounded-full min-w-4 h-6 w-6 text-xl font-semibold pt-px flex items-center justify-center ml-2 w-[25px] w-[25px]",onClick:e=>{e.stopPropagation(),a(s)},children:"\xd7"})})]})})},He=(0,a.memo)(Be);var ze=s(37267),Pe=s(45e3);const Re=e=>{let{children:t,...s}=e;const[o,r]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{const e=requestAnimationFrame(()=>r(!0));return()=>{cancelAnimationFrame(e),r(!1)}},[]),o?(0,K.jsx)(Pe.gL,{...s,children:t}):null},qe=e=>{let{data:t,id:s}=e;const{node:o,onDelete:i,handleChange:l}=t,[n,d]=(0,a.useState)(!1),[c,m]=(0,a.useState)(!1),[u,p]=(0,a.useState)({}),[h,y]=(0,a.useState)(o.data),[x,w]=(0,a.useState)(o.data.message),b=(e,t)=>{const s=q(e,t);p(t=>({...t,[e]:s}))},j=(e,t)=>{delete o.data.errors;const s={...h,[e]:t};y(s),l(o.id,s)},v=e=>{delete o.data.errors;const t=h.subOptions.filter((t,s)=>s!==e),s={...h,subOptions:t};y(s),l(o.id,s)},f=()=>d(!1),k=e=>{h.subOptions.forEach(e=>{e.isCollapsed=!0}),h.subOptions[e].isCollapsed=!1,d(!0)};return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)("div",{className:"flow-node bg-gray-800 text-white rounded-md shadow-lg "+(o.data&&o.data.errors&&Object.keys(o.data.errors).length>0?"error-in-node":""),children:[(0,K.jsxs)("div",{className:"flex justify-between items-center py-2 px-2 border-b-4 border-indigo-500",children:[(0,K.jsx)("h3",{className:"text-sm font-semibold cursor-pointer mr-3",onClick:()=>m(!c),children:"Option"}),(0,K.jsxs)("div",{className:"flex",children:[(0,K.jsx)("button",{className:"text-gray-400 hover:text-white mr-3",title:"Expand",onClick:()=>d(e=>!e),children:(0,K.jsx)("svg",{className:"w-4 h-4 text-blue-500 cursor-pointer hover:text-blue-700",fill:"white",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 242.133 242.133",children:(0,K.jsx)("path",{id:"XMLID_15_",d:"M227.133,83.033c8.283,0,15-6.716,15-15V15c0-8.284-6.717-15-15-15H174.1c-8.284,0-15,6.716-15,15 s6.716,15,15,15h16.82l-69.854,69.854L51.213,30h16.82c8.284,0,15-6.716,15-15s-6.716-15-15-15H15C6.717,0,0,6.716,0,15v53.033 c0,8.284,6.717,15,15,15c8.285,0,15-6.716,15-15v-16.82l69.854,69.854L30,190.92V174.1c0-8.284-6.715-15-15-15 c-8.283,0-15,6.716-15,15v53.033c0,8.284,6.717,15,15,15h53.033c8.284,0,15-6.716,15-15c0-8.284-6.716-15-15-15h-16.82 l69.854-69.854l69.854,69.854H174.1c-8.284,0-15,6.716-15,15c0,8.284,6.716,15,15,15h53.033c8.283,0,15-6.716,15-15V174.1 c0-8.284-6.717-15-15-15c-8.285,0-15,6.716-15,15v16.82l-69.854-69.854l69.854-69.854v16.82 C212.133,76.317,218.848,83.033,227.133,83.033z"})})}),(0,K.jsx)("button",{title:"Delete Node",className:"text-white text-xl font-semibold bg-red-500 hover:bg-red-700 rounded-full h-6 w-6 flex items-center pt-px justify-center",onClick:()=>i(s),children:"\xd7"})]})]}),!c&&(0,K.jsxs)("div",{className:"space-y-2 py-2 px-2",children:[(0,K.jsxs)("div",{children:[(0,K.jsx)("input",{title:"Field Label",type:"text",maxLength:50,placeholder:"Field Label",value:h.fieldLabel,onChange:e=>j("fieldLabel",e.target.value),onBlur:e=>b("fieldLabel",e.target.value),className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded"}),u.fieldLabel&&(0,K.jsx)("small",{className:"text-red-500",children:u.fieldLabel})]}),(0,K.jsxs)("div",{children:[(0,K.jsx)("input",{title:"Property Name",type:"text",maxLength:50,placeholder:"Property Name",value:h.property,onChange:e=>j("property",e.target.value),onBlur:e=>b("property",e.target.value),className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded"}),u.property&&(0,K.jsx)("small",{className:"text-red-500",children:u.property})]}),(0,K.jsxs)("div",{children:[(0,K.jsx)(se,{maxLength:300,message:h.message,onChange:e=>j("message",e)},x),u.message&&(0,K.jsx)("small",{className:"text-red-500",children:u.message})]}),(0,K.jsxs)("div",{children:[(0,K.jsx)("input",{title:"Fall back",type:"text",maxLength:50,value:h.fallback,placeholder:"Fall back",onChange:e=>j("fallback",e.target.value),onBlur:e=>b("fallback",e.target.value),className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded"}),u.fallback&&(0,K.jsx)("small",{className:"text-red-500",children:u.fallback})]}),(0,K.jsx)(Pe.JY,{onDragEnd:e=>{const{source:t,destination:s}=e;if(!s)return;const a=Array.from(h.subOptions),[r]=a.splice(t.index,1);a.splice(s.index,0,r);const i={...h,subOptions:a};y(i),l(o.id,i)},children:(0,K.jsx)(Re,{droppableId:"subOptions",children:e=>(0,K.jsxs)("div",{...e.droppableProps,ref:e.innerRef,className:"space-y-2",children:[h.subOptions.map((e,t)=>(0,K.jsxs)("div",{className:"nodrag relative subOption-wrapper",children:[(0,K.jsx)(Pe.sx,{draggableId:e.id,index:t,children:s=>(0,K.jsx)("div",{ref:s.innerRef,...s.draggableProps,...s.dragHandleProps,style:{...s.draggableProps.style,left:"auto !important",top:"auto !important",width:"100%"},children:(0,K.jsx)(He,{subOption:e,index:t,onDelete:v,length:h.subOptions.length,expandToEdit:k},t)})},e.id),(0,K.jsx)(r.h7,{type:"source",position:r.yX.Right,id:e.id})]},t)),e.placeholder]})})}),(0,K.jsxs)("button",{className:"flex px-2 py-1 font-semibold text-white btn-primary-custom rounded items-center",onClick:()=>{delete o.data.errors;const e={id:g(),title:"",subTitle:"",value:"",imageUrl:"",category:"",description:"",leadEmailTo:"",leadEmailCc:[],isCollapsed:!1,isLink:!1},t={...h,subOptions:[...h.subOptions,e]};y(t),l(o.id,t),d(!0)},children:[(0,K.jsx)("svg",{className:"w-4 h-4 text-white font-semibold cursor-pointer hover:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,K.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Add"]})]})]}),(0,K.jsx)(r.h7,{type:"target",position:r.yX.Top,id:s}),(0,K.jsx)(ze.l,{header:"Header",visible:n,style:{width:"100vw"},onHide:()=>{n&&f()},children:(0,K.jsx)($e,{save:e=>{const t={...e,subOptions:e.subOptions.map(e=>({...e}))};w(Math.random().toString()),y(t),l(o.id,t)},optionsData:h,close:f})})]})},We=(0,a.memo)(qe);var Ue=s(45165);const Ve=e=>{var t,s,o,i,l,n;let{id:d,data:m}=e;const{node:u,onDelete:p,handleChange:h,setNodes:g,nodes:y}=m,[x,w]=(0,a.useState)({}),b=(0,a.useMemo)(()=>new Date((new Date).setHours(0,0,0,0)),[]),j=(0,a.useMemo)(()=>{const e=new Date;return e.setMonth(e.getMonth()+3),e.setHours(23,59,59,999),e},[]),[v,f]=(0,a.useState)({}),k=(e,t)=>{delete u.data.errors,w({});const s={...u.data,[e]:t};h(u.id,s)},N=()=>{g(y.map(e=>({...e,selected:!1})))},C=(0,a.useCallback)(e=>{switch(e){case c.bh.CUSTOM:return f({min:"Custom Expression",max:""}),{min:"",max:""};case c.bh.STRING:return f({min:"String Min Length",max:"String Max Length"}),{min:3,max:500};case c.bh.NUMBER:return f({min:"Number Min Length",max:"Number Max Length"}),{min:3,max:15};case c.bh.DATE:return f({min:"Min Date",max:"Max Date"}),{min:"",max:""};case c.bh.DATETIME:return f({min:"Min Date Time",max:"Max Date Time"}),{min:"",max:""};case c.bh.TIME:return f({min:"Min Time",max:"Max Time"}),{min:"",max:""};default:return{min:"",max:""}}},[]),T=()=>(0,K.jsx)("button",{title:"Delete Question Node",className:"w-full text-white bg-red-500 hover:bg-red-700 rounded flex items-center justify-center",onClick:()=>(()=>{let e=document.querySelector(".p-datepicker");e&&(e.style.visibility="hidden")})(),children:"Close"});return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)("div",{className:"flow-node bg-gray-800 text-white rounded-md shadow-lg "+(null!==(t=u.data)&&void 0!==t&&t.errors&&Object.keys(u.data.errors).length?"error-in-node":""),children:[(0,K.jsxs)("div",{className:"flex justify-between items-center border-b py-1 px-2 border-b-4 border-indigo-500",children:[(0,K.jsx)("h3",{className:"text-sm font-semibold",children:"Question Node"}),(0,K.jsx)("button",{title:"Delete Question Node",className:"text-white bg-red-500 hover:bg-red-700 rounded-full h-6 w-6 flex items-center justify-center text-xl font-extrabold",onClick:()=>p(d),children:"\xd7"})]}),(0,K.jsxs)("div",{className:"space-y-2 py-2 px-2 pb-3",children:[(0,K.jsx)("div",{className:"mb-2",title:"Field Label",children:(0,K.jsx)("input",{type:"text",placeholder:"Field Label",value:u.data.fieldLabel||"",onClick:N,onChange:e=>k("fieldLabel",e.target.value),className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded"})}),(0,K.jsxs)("div",{className:"mb-2",title:"Property Name (Alphanumeric, no spaces)",children:[(0,K.jsx)("input",{type:"text",placeholder:"Property Name (Alphanumeric, no spaces)",value:u.data.property||"",onClick:N,onChange:e=>k("property",e.target.value),className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded"}),u.data.errors&&(null===(s=Object.keys(u.data.errors))||void 0===s?void 0:s.length)>0&&u.data.errors.property&&(0,K.jsx)("small",{className:"text-red-500",children:u.data.errors.property})]}),(0,K.jsxs)("div",{className:"mb-2",children:[(0,K.jsx)(se,{maxLength:500,message:u.data.message,onChange:e=>k("message",e)}),u.data.errors&&(null===(o=Object.keys(u.data.errors))||void 0===o?void 0:o.length)>0&&u.data.errors.message&&(0,K.jsx)("small",{className:"text-red-500",children:u.data.errors.message})]}),(0,K.jsxs)("div",{className:"mb-2",children:[(0,K.jsxs)("select",{title:"Field Type",value:u.data.fieldType,onClick:N,onChange:e=>{delete u.data.errors,e.target.value?x.fieldType&&w(e=>{const t={...e};return delete t.fieldType,t}):w(e=>({...e,fieldType:"Question Type is Mandatory"}));const t=e.target.value,{min:s,max:a}=C(t),o={...u.data,fieldType:t,min:s,max:a,custom:""};h(u.id,o)},className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded",children:[(0,K.jsx)("option",{value:"",children:"Select Field Type"}),c.r8.map(e=>(0,K.jsx)("option",{value:e.value,children:e.label},e.value))]}),u.data.errors&&(null===(i=Object.keys(u.data.errors))||void 0===i?void 0:i.length)>0&&u.data.errors.fieldType&&(0,K.jsx)("small",{className:"text-red-500",children:u.data.errors.fieldType})]}),(0,K.jsxs)("div",{className:"mb-2",children:[[c.bh.STRING,c.bh.NUMBER].includes(u.data.fieldType)&&(0,K.jsxs)("div",{className:"flex space-x-2 mt-2",children:[(0,K.jsx)("input",{title:v.min||"Min Length",type:"number",placeholder:v.min,value:u.data.min||"",onChange:e=>k("min",e.target.value),onClick:N,className:"nodrag w-1/2 p-1 border border-gray-600 bg-gray-700 text-white rounded",maxLength:13}),(0,K.jsx)("input",{title:v.max||"Max Length",type:"number",placeholder:v.max,value:u.data.max||"",onClick:N,onChange:e=>k("max",e.target.value),className:"nodrag w-1/2 p-1 border border-gray-600 bg-gray-700 text-white rounded",maxLength:13})]}),[c.bh.DATE,c.bh.DATETIME,c.bh.TIME].includes(u.data.fieldType)&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("div",{className:"mb-2",children:(0,K.jsxs)("select",{title:"Date Format",value:u.data.dateFormat,onClick:N,onChange:e=>k("dateFormat",e.target.value),className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded",children:[(0,K.jsx)("option",{value:"",children:"Select Date Format"}),c.lu.map(e=>(0,K.jsx)("option",{value:e,children:e},e))]})}),(0,K.jsxs)("div",{className:"flex flex-col gap-2 mt-2",children:[(0,K.jsx)(Ue.V,{tooltip:v.min||"Min",tooltipOptions:{position:"top"},showIcon:!0,placeholder:v.min||"Min",minDate:b,maxDate:j,value:u.data.min||null,onFocus:N,onChange:e=>k("min",e.value),showTime:u.data.fieldType!==c.bh.DATE,className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded small-calendar",timeOnly:c.bh.TIME===u.data.fieldType,autoZIndex:!0,footerTemplate:T,showButtonBar:!0}),(0,K.jsx)(Ue.V,{tooltip:v.max||"Max",tooltipOptions:{position:"top"},showIcon:!0,placeholder:v.max||"Max",minDate:u.data.min||b,maxDate:j,value:u.data.max||null,onFocus:N,onChange:e=>k("max",e.value),showTime:u.data.fieldType!==c.bh.DATE,className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded",timeOnly:c.bh.TIME===u.data.fieldType,autoZIndex:!0,footerTemplate:T,showButtonBar:!0})]})]}),u.data.fieldType===c.bh.CUSTOM&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("input",{title:"Custom Expression",type:"text",placeholder:v.min||"Custom Expression",value:u.data.custom||"",onClick:N,onBlur:e=>((e,t)=>{let s="";"message"!==e||t.trim()||(s="Message is required."),"custom"!==e||u.data.fieldType!==c.bh.CUSTOM||t.trim()||(s="Regex pattern is required for custom type."),w(t=>({...t,[e]:s}))})("custom",e.target.value),onChange:e=>k("custom",e.target.value),className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded mt-2"}),(null===(l=u.data.errors)||void 0===l?void 0:l.custom)&&(0,K.jsx)("small",{className:"text-red-500",children:u.data.errors.custom})]}),u.data.errors&&(null===(n=Object.keys(u.data.errors))||void 0===n?void 0:n.length)>0&&u.data.errors.answer&&(0,K.jsx)("small",{className:"text-red-500",children:u.data.errors.answer})]}),u.data.fieldType&&(0,K.jsx)("div",{className:"mb-2",children:(0,K.jsx)(se,{maxLength:500,placeHolder:"Error Message",message:u.data.errorMessage,onChange:e=>k("errorMessage",e)})})]})]}),(0,K.jsx)(r.h7,{id:"target",type:"target",position:r.yX.Top,className:"w-2 h-2 bg-white border-none"}),(0,K.jsx)(r.h7,{id:"source",type:"source",position:r.yX.Bottom,className:"w-2 h-2 bg-white border-none"})]})},_e=(0,a.memo)(Ve);var Qe=s(70855),Xe=s(33340),Ge=s(43983);const Ze=e=>{var t,s;let{id:o,data:i}=e;const{node:l,onDelete:n,handleChange:d,setNodes:c,nodes:m}=i,[u]=(0,Qe.G)(),p=(0,Xe.nc)(e=>e.botsList),h=(0,Xe.nc)(e=>e.organizationId),[g,y]=(0,a.useState)([]),[x,w]=(0,a.useState)({}),[b,j]=(0,a.useState)({}),v=(0,a.useRef)({container:!1,callAccepted:!1,callRejected:!1}),f=()=>{c(m.map(e=>({...e,selected:!1})))},k=(e,t)=>{var s;w(s=>({...s,[e]:t})),null===(s=v.current[e])||void 0===s||s.focus()},N=(e,t)=>{delete l.data.errors,j({});const s={...l.data,[e]:t};d(l.id,s)},C=(0,a.useCallback)(e=>{v.current.container&&!v.current.container.contains(e.target)?w(e=>({...e,successMessage:!1,failureMessage:!1})):v.current.callAccepted&&!v.current.callAccepted.contains(e.target)?w(e=>({...e,callAccepted:!1})):v.current.callRejected&&!v.current.callRejected.contains(e.target)&&w(e=>({...e,callRejected:!1}))},[w]);return(0,a.useEffect)(()=>(document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)),[C]),(0,a.useEffect)(()=>{var e;const t=p.find(e=>e._id===u),s=t?null===(e=t.integrations)||void 0===e?void 0:e.filter(e=>"callConnect_123"===e.channelId):[];if(s&&s.length>0){const e=s.map(e=>({name:e.serviceDetails.name,_id:e._id}));y(e)}else(0,Ge.Yl)({botId:u,organizationId:h})},[u,p,h]),(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)("div",{className:"flow-node bg-gray-800 text-white rounded-md shadow-lg ",children:[(0,K.jsxs)("div",{className:"flex justify-between items-center border-b py-1 px-2 border-b-4 border-indigo-500",children:[(0,K.jsx)("h3",{className:"text-sm font-semibold",children:"Call Connect Node"}),(0,K.jsx)("button",{title:"Delete Call Connect Node",className:"text-white bg-red-500 hover:bg-red-700 rounded-full h-6 w-6 flex items-center justify-center text-xl font-extrabold",onClick:()=>n(o),children:"\xd7"})]}),(0,K.jsxs)("div",{className:"space-y-2 py-2 px-2 pb-3",children:[(0,K.jsxs)("div",{className:"mb-2",children:[(0,K.jsxs)("select",{title:"callConnectId",value:l.data.callConnectId,onClick:f,onChange:e=>{delete l.data.errors,e.target.value?b.callConnectId&&j(e=>{const t={...e};return delete t.callConnectId,t}):j(e=>({...e,callConnectId:"Call Connect Name is Mandatory"}));const t=e.target.value;N("callConnectId",t)},className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded",children:[(0,K.jsx)("option",{value:"",children:"Select Call Connect Name"}),g.map((e,t)=>(0,K.jsx)("option",{value:e._id,children:e.name},`${e._id}-${t}`))]}),l.data.errors&&(null===(t=Object.keys(l.data.errors))||void 0===t?void 0:t.length)>0&&l.data.errors.callConnectId&&(0,K.jsx)("small",{className:"text-red-500",children:l.data.errors.callConnectId})]}),(0,K.jsxs)("div",{className:"mb-2",children:[(0,K.jsx)(se,{maxLength:500,message:l.data.message,onChange:e=>N("message",e)}),l.data.errors&&(null===(s=Object.keys(l.data.errors))||void 0===s?void 0:s.length)>0&&l.data.errors.message&&(0,K.jsx)("small",{className:"text-red-500",children:l.data.errors.message})]}),(0,K.jsxs)("div",{children:[(0,K.jsx)("div",{className:"grid grid-cols-10 gap-2 mb-2  px-1 py-1 border border-gray-400 rounded-md relative",children:(0,K.jsxs)("div",{className:"col-span-10 flex items-center ",children:[(0,K.jsx)(Ye,{onClick:()=>k("callAccepted",!0),className:"min-w-4 w-4 h-4 mx-2 text-blue-300 cursor-pointer hover:text-white"}),(0,K.jsx)("input",{type:"text",ref:e=>v.current.callAccepted=e,readOnly:!x.callAccepted,value:l.data.callAccepted,placeholder:"Enter call accepted massage",autoFocus:x.callAccepted,onClick:x.callAccepted?void 0:f,onChange:e=>N("callAccepted",e.target.value),className:"nodrag  w-full ml-1 p-1 border border-gray-600 bg-gray-700 text-white rounded capitalize"})]})}),l.data.errors&&(0,K.jsx)("small",{className:"text-red-500",children:l.data.errors.callAccepted})]}),(0,K.jsxs)("div",{ref:e=>v.current.container=e,children:[(0,K.jsxs)("div",{className:"space-y-2 py-2 px-2 min-w-36",children:[x.successMessage?(0,K.jsx)(se,{maxLength:500,message:l.data.successMessage,onChange:e=>N("successMessage",e)}):(0,K.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer",title:"Double Click ro Enter/Edit the Message",children:[(0,K.jsx)("span",{children:l.data.successMessage||"Enter your success message"}),(0,K.jsx)(Ye,{onClick:()=>k("successMessage",!0),className:"w-4 h-4 text-white ml-2"})]}),l.data.errors&&(0,K.jsx)("small",{className:"text-red-500",children:l.data.errors.successMessage})]}),(0,K.jsxs)("div",{className:"space-y-2 py-2 px-2 pb-3 min-w-36",children:[x.failureMessage?(0,K.jsx)(se,{maxLength:500,message:l.data.failureMessage,onChange:e=>N("failureMessage",e)}):(0,K.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer",title:"Double Click ro Enter/Edit the Message",children:[(0,K.jsx)("span",{children:l.data.failureMessage||"Enter your failure message"}),(0,K.jsx)(Ye,{onClick:()=>k("failureMessage",!0),className:"w-4 h-4 text-white ml-2"})]}),l.data.errors&&(0,K.jsx)("small",{className:"text-red-500",children:l.data.errors.failureMessage})]})]}),(0,K.jsxs)("div",{children:[(0,K.jsx)("div",{className:"grid grid-cols-10 gap-2 mb-2  px-1 py-1 border border-gray-400 rounded-md relative",children:(0,K.jsxs)("div",{className:"col-span-10 flex items-center ",children:[(0,K.jsx)(Ye,{onClick:()=>k("callRejected",!0),className:"min-w-4 w-4 h-4 mx-2 text-blue-300 cursor-pointer hover:text-white"}),(0,K.jsx)("input",{type:"text",readOnly:!x.callRejected,placeholder:"Enter call rejected massage",ref:e=>v.current.callRejected=e,value:l.data.callRejected,onClick:x.callRejected?void 0:f,onChange:e=>N("callRejected",e.target.value),className:"nodrag  w-full ml-1 p-1 border border-gray-600 bg-gray-700  rounded capitalize"})]})}),l.data.errors&&(0,K.jsx)("small",{className:"text-red-500",children:l.data.errors.callRejected})]})]})]}),(0,K.jsx)(r.h7,{id:"target",type:"target",position:r.yX.Top,className:"w-2 h-2 bg-white border-none"}),(0,K.jsx)(r.h7,{id:"source",type:"source",position:r.yX.Bottom,className:"w-2 h-2 bg-white border-none"})]})},Je=(0,a.memo)(Ze),Ye=e=>{let{onClick:t,className:s=""}=e;return(0,K.jsx)("svg",{onClick:t,className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,K.jsx)("path",{d:"M7.127 22.562l-7.127 1.438 1.438-7.128 5.689 5.69zm1.414-1.414l11.228-11.225-5.69-5.692-11.227 11.227 5.689 5.69zm9.768-21.148l-2.816 2.817 5.691 5.691 2.816-2.819-5.691-5.689z"})})},Ke=e=>{var t,s;let{id:o,data:i}=e;const{node:l,onDelete:n,handleChange:d,setNodes:c,nodes:m}=i,[u,p]=(0,a.useState)({}),h=()=>{c(m.map(e=>({...e,selected:!1})))},g=(e,t)=>{delete l.data.errors;const s={...l.data,[e]:t};d(l.id,s)};return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)("div",{className:"flow-node bg-gray-800 text-white rounded-md shadow-lg ",children:[(0,K.jsxs)("div",{className:"flex justify-between items-center border-b py-1 px-2 border-b-4 border-indigo-500",children:[(0,K.jsx)("h3",{className:"text-sm font-semibold",children:"OTP Node"}),(0,K.jsx)("button",{title:"Delete Call Connect Node",className:"text-white bg-red-500 hover:bg-red-700 rounded-full h-6 w-6 flex items-center justify-center text-xl font-extrabold",onClick:()=>n(o),children:"\xd7"})]}),(0,K.jsxs)("div",{className:"space-y-2 py-2 px-2 pb-3",children:[(0,K.jsxs)("div",{className:"mb-2",children:[(0,K.jsx)(se,{maxLength:500,message:l.data.message,onChange:e=>g("message",e),onClick:h}),l.data.errors&&(null===(t=Object.keys(l.data.errors))||void 0===t?void 0:t.length)>0&&l.data.errors.message&&(0,K.jsx)("small",{className:"text-red-500",children:l.data.errors.message})]}),(0,K.jsxs)("div",{className:"mb-2",children:[(0,K.jsxs)("select",{title:"OTP Type",value:l.data.otpType,onClick:h,onChange:e=>{delete l.data.errors,e.target.value?u.callConnectId&&p(e=>{const t={...e};return delete t.callConnectId,t}):p(e=>({...e,callConnectId:"Call Connect Name is Mandatory"}));const t=e.target.value;g("otpType",t)},className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded",children:[(0,K.jsx)("option",{value:"",children:"Please select OTP type"}),(0,K.jsx)("option",{value:"phoneNumber",children:" Mobile Number"},"phoneNumber"),(0,K.jsx)("option",{value:"email",children:"Email"},"email")]}),l.data.errors&&(null===(s=Object.keys(l.data.errors))||void 0===s?void 0:s.length)>0&&l.data.errors.otpType&&(0,K.jsx)("small",{className:"text-red-500",children:l.data.errors.otpType})]})]})]}),(0,K.jsx)(r.h7,{id:"target",type:"target",position:r.yX.Top,className:"w-2 h-2 bg-white border-none"}),(0,K.jsx)(r.h7,{id:"source",type:"source",position:r.yX.Bottom,className:"w-2 h-2 bg-white border-none"})]})},et=(0,a.memo)(Ke),tt=e=>{let{optionsData:t,save:s,close:o}=e;const[r,i]=(0,a.useState)(t),[l,n]=(0,a.useState)([]),[d,m]=(0,a.useState)({}),u=(0,a.useMemo)(()=>new Date((new Date).setHours(0,0,0,0)),[]),p=(0,a.useMemo)(()=>{const e=new Date;return e.setMonth(e.getMonth()+3),e.setHours(23,59,59,999),e},[]);(0,a.useEffect)(()=>{i(t)},[t]);const h=(e,t,s,a,o)=>{const r=Q(t,s,a,o);r&&n(s=>{var a;return{...s,customFields:{...s.customFields,[e]:{...null===(a=s.customFields)||void 0===a?void 0:a[e],[t]:r}}}})},y=(e,t)=>{const{name:s,value:a}=t.target,o=[...r.customFields],l={...o[e]};l[s]=a,o[e]=l,i({...r,customFields:o}),n(t=>{var a,o;const r={...t};if(null!==r&&void 0!==r&&null!==(a=r.customFields)&&void 0!==a&&null!==(o=a[e])&&void 0!==o&&o[s]){delete r.customFields[e][s];const t=r.customFields[e];t&&Object.values(t).every(e=>""===e)&&delete r.customFields[e],0===Object.keys(r.customFields).length&&delete r.customFields}return r})},x=(0,a.useCallback)(e=>{switch(e){case c.bh.CUSTOM:return m({min:"Custom Expression",max:""}),{min:"",max:""};case c.bh.STRING:return m({min:"String Min Length",max:"String Max Length"}),{min:3,max:500};case c.bh.NUMBER:return m({min:"Number Min Length",max:"Number Max Length"}),{min:3,max:15};case c.bh.DATE:return m({min:"Min Date",max:"Max Date"}),{min:"",max:""};case c.bh.DATETIME:return m({min:"Min Date Time",max:"Max Date Time"}),{min:"",max:""};case c.bh.TIME:return m({min:"Min Time",max:"Max Time"}),{min:"",max:""};default:return{min:"",max:""}}},[]),w=e=>{const t={customFields:{}},s=new Set;e.customFields.map((a,o)=>{delete e.customFields[o].isCollapsed;const r={};Object.keys(a).map(e=>{const t=a[e],o=Q(e,t,a.fieldType,a,s);o&&(r[e]=o)}),void 0===r.property&&s.add(a.property),Object.keys(r).length>0&&(t.customFields[o]=r,a.isCollapsed=!1)}),n(t);return Object.keys(t.customFields).some(e=>Object.keys(t.customFields[e]).length>0)},b=()=>(0,K.jsx)("button",{title:"Delete Question Node",className:"w-full text-white bg-red-500 hover:bg-red-700 rounded flex items-center justify-center",onClick:()=>(()=>{let e=document.querySelector(".p-datepicker");e&&(e.style.visibility="hidden")})(),children:"Close"});return(0,K.jsxs)("div",{className:"flow-node fixed inset-0 flex flex-col bg-gray-900 text-white",children:[(0,K.jsx)("div",{className:"fixed top-0 left-0 right-0 bg-gray-800 text-white shadow-md z-10",children:(0,K.jsxs)("div",{className:"modal-header px-4 py-2 flex justify-between items-center",children:[(0,K.jsx)("h5",{className:"modal-title text-lg font-bold",children:"Edit Options"}),(0,K.jsx)("button",{type:"button",className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-xl font-extrabold",title:"Close popup",onClick:o,children:"\xd7"})]})}),(0,K.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 mt-16 mb-20",children:[r.customFields.map((e,t)=>{var s,a,o,n,m,g,w,j,v,f,k,N,C,T,E,F,M,S,I,L,O,D,A,$,B,H,z,P,R,q;return(0,K.jsxs)("div",{className:"accordion px-2 mb-2",children:[(0,K.jsxs)("div",{className:"accordion-header flex items-center p-1 cursor-pointer border border-gray-600 rounded bg-gray-800 hover:bg-gray-700 transition-colors",onClick:()=>(e=>{const t=r.customFields.map((t,s)=>s===e?{...t,isCollapsed:!t.isCollapsed}:t);i({...r,customFields:t})})(t),children:[(0,K.jsx)("span",{className:"mr-3",children:e.isCollapsed?(0,K.jsx)("svg",{className:"w-5 h-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,K.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):(0,K.jsx)("svg",{className:"w-5 h-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,K.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),(0,K.jsx)("span",{className:"flex-1",children:e.title||`Custom Filed ${t+1}`}),r.customFields.length>1&&(0,K.jsx)("button",{type:"button",className:"text-white bg-red-500 hover:bg-red-700 rounded-full h-6 w-6 flex items-center justify-center text-xl font-bold ml-4",onClick:e=>{e.stopPropagation(),(e=>{i({...r,customFields:r.customFields.filter((t,s)=>s!==e)})})(t)},children:"\xd7"})]}),!e.isCollapsed&&(0,K.jsx)("div",{className:"accordion-content bg-gray-700 p-2 rounded",children:(0,K.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:[(0,K.jsx)("div",{className:"min-w-[200px]",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:"Property Name"}),(0,K.jsx)("input",{title:"Property Name",type:"text",maxLength:50,className:"form-control form-control-sm w-full px-2 border border-gray-600 bg-gray-800 text-white rounded",name:"property",value:e.property,onChange:e=>y(t,e),onBlur:e=>h(t,"property",e.target.value)}),(null===(s=l.customFields)||void 0===s||null===(a=s[t])||void 0===a?void 0:a.property)&&(0,K.jsx)("div",{className:"text-red-500 text-sm",children:null===(o=l.customFields[t])||void 0===o?void 0:o.property.split(". ").map((e,t)=>(0,K.jsx)("small",{children:e},t))})]})}),(0,K.jsx)("div",{className:"min-w-[200px]",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:"Title"}),(0,K.jsx)("input",{title:"Title",type:"text",maxLength:50,className:"form-control form-control-sm w-full px-2 border border-gray-600 bg-gray-800 text-white rounded",name:"title",value:e.title,onChange:e=>y(t,e),onBlur:e=>h(t,"title",e.target.value)}),(null===(n=l.customFields)||void 0===n||null===(m=n[t])||void 0===m?void 0:m.title)&&(0,K.jsx)("div",{className:"text-red-500 text-sm",children:null===(g=l.customFields[t])||void 0===g?void 0:g.title.split(". ").map((e,t)=>(0,K.jsx)("small",{children:e},t))})]})}),(0,K.jsx)("div",{className:"min-w-[200px]",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:"WhatApp Question"}),(0,K.jsx)("input",{title:"whatsAppQuestion",type:"whatsAppQuestion",maxLength:50,className:"form-control form-control-sm w-full px-2 border border-gray-600 bg-gray-800 text-white rounded",name:"whatsAppQuestion",value:e.whatsAppQuestion,onChange:e=>y(t,e),onBlur:e=>h(t,"whatsAppQuestion",e.target.value)}),(null===(w=l.customFields)||void 0===w||null===(j=w[t])||void 0===j?void 0:j.whatsAppQuestion)&&(0,K.jsx)("div",{className:"text-red-500 text-sm",children:null===(v=l.customFields[t])||void 0===v?void 0:v.whatsAppQuestion.split(". ").map((e,t)=>(0,K.jsx)("small",{children:e},t))})]})}),(0,K.jsx)("div",{className:"min-w-[200px]",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:"Select Category"}),(0,K.jsxs)("select",{title:"Field Type",name:"fieldType",value:e.fieldType,className:"form-control form-control-sm w-full px-2 border border-gray-600 bg-gray-800 text-white rounded",style:{height:"25px"},onChange:e=>((e,t)=>{var s,a;null===l||void 0===l||null===(s=l.customFields)||void 0===s||null===(a=s[e])||void 0===a||delete a[t.target.name];const{value:o}=t.target,{min:n,max:d}=x(o),c=[...r.customFields];c[e].fieldType=o,"phone"!==o&&"email"!==o&&"custom"!==o&&(c[e].min=n,c[e].max=d),"custom"===o&&(c[e].custom=""),i({...r,customFields:c})})(t,e),onBlur:s=>h(t,"fieldType",s.target.value,e.fieldType,e),children:[(0,K.jsx)("option",{value:"",children:"Select Value Type"}),c.r8.map(e=>(0,K.jsx)("option",{value:e.value,children:e.label},e.value))]}),(null===(f=l.customFields)||void 0===f||null===(k=f[t])||void 0===k?void 0:k.fieldType)&&(0,K.jsx)("div",{className:"text-red-500 text-sm",children:null===(N=l.customFields[t])||void 0===N?void 0:N.fieldType.split(". ").map((e,t)=>(0,K.jsx)("small",{children:e},t))})]})}),[c.bh.STRING,c.bh.NUMBER].includes(e.fieldType)&&(0,K.jsx)("div",{className:"min-w-[200px]",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:"Min & Max"}),(0,K.jsxs)("div",{className:"flex space-x-2 ",children:[(0,K.jsxs)("div",{children:[(0,K.jsx)("input",{title:d.min||"Min Length",type:"number",name:"min",placeholder:d.min,value:e.min||"",onChange:e=>y(t,e),onBlur:s=>h(t,"min",s.target.value,e.fieldType,e),style:{height:"25px"},className:"form-control form-control-sm w-full px-2 border border-gray-600 bg-gray-800 text-white rounded",maxLength:13}),(null===(C=l.customFields)||void 0===C||null===(T=C[t])||void 0===T?void 0:T.min)&&(0,K.jsx)("div",{className:"text-red-500 text-sm",children:null===(E=l.customFields[t])||void 0===E?void 0:E.min.split(". ").map((e,t)=>(0,K.jsx)("small",{children:e},t))})]}),(0,K.jsxs)("div",{children:[(0,K.jsx)("input",{title:d.max||"Max Length",type:"number",name:"max",placeholder:d.max,value:e.max||"",onChange:e=>y(t,e),style:{height:"25px"},onBlur:s=>h(t,"max",s.target.value,e.fieldType,e),className:"form-control form-control-sm w-full px-2 border border-gray-600 bg-gray-800 text-white rounded",maxLength:13}),(null===(F=l.customFields)||void 0===F||null===(M=F[t])||void 0===M?void 0:M.max)&&(0,K.jsx)("div",{className:"text-red-500 text-sm",children:null===(S=l.customFields[t])||void 0===S?void 0:S.max.split(". ").map((e,t)=>(0,K.jsx)("small",{children:e},t))})]})]})]})}),[c.bh.DATE,c.bh.DATETIME,c.bh.TIME].includes(e.fieldType)&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("div",{className:"min-w-[200px] ",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:"Select Date Format"}),(0,K.jsxs)("select",{title:"Date Format",name:"dateFormat",value:e.dateFormat,onChange:e=>y(t,e),onBlur:s=>h(t,"dateFormat",s.target.value,e.fieldType,e),style:{height:"25px"},className:"form-control form-control-sm w-full px-2 border border-gray-600 bg-gray-800 text-white rounded",children:[(0,K.jsx)("option",{value:"",children:"Select Date Format"}),c.lu.map(e=>(0,K.jsx)("option",{value:e,children:e},e))]}),(null===(I=l.customFields)||void 0===I||null===(L=I[t])||void 0===L?void 0:L.dateFormat)&&(0,K.jsx)("div",{className:"text-red-500 text-sm",children:null===(O=l.customFields[t])||void 0===O?void 0:O.dateFormat.split(". ").map((e,t)=>(0,K.jsx)("small",{children:e},t))})]})}),(0,K.jsx)("div",{className:"min-w-[200px] mt-2",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:"Min"}),(0,K.jsx)(Ue.V,{name:"min",tooltip:d.min||"Min",tooltipOptions:{position:"top"},showIcon:!0,placeholder:d.min||"Min",minDate:u,maxDate:p,value:e.min?new Date(e.min):null,onChange:e=>y(t,e),onBlur:s=>h(t,"min",s.target.value,e.fieldType,e),style:{height:"25px"},className:"form-control form-control-sm w-full px-2 border border-gray-600 bg-gray-800 text-white rounded",showTime:e.fieldType!==c.bh.DATE,timeOnly:c.bh.TIME===e.fieldType,autoZIndex:!0,footerTemplate:b,showButtonBar:!0}),(null===(D=l.customFields)||void 0===D||null===(A=D[t])||void 0===A?void 0:A.min)&&(0,K.jsx)("div",{className:"text-red-500 text-sm",children:null===($=l.customFields[t])||void 0===$?void 0:$.min.split(". ").map((e,t)=>(0,K.jsx)("small",{children:e},t))})]})}),(0,K.jsx)("div",{className:"min-w-[200px] mt-2",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:"Max"}),(0,K.jsx)(Ue.V,{name:"max",tooltip:d.max||"Max",tooltipOptions:{position:"top"},showIcon:!0,value:e.max?new Date(e.max):null,placeholder:d.max||"Max",minDate:u,maxDate:p,onChange:e=>y(t,e),onBlur:s=>h(t,"max",s.target.value,e.fieldType,e),style:{height:"25px"},className:"form-control form-control-sm w-full px-2 border border-gray-600 bg-gray-800 text-white rounded",showTime:e.fieldType!==c.bh.DATE,timeOnly:c.bh.TIME===e.fieldType,autoZIndex:!0,footerTemplate:b,showButtonBar:!0}),(null===(B=l.customFields)||void 0===B||null===(H=B[t])||void 0===H?void 0:H.max)&&(0,K.jsx)("div",{className:"text-red-500 text-sm",children:null===(z=l.customFields[t])||void 0===z?void 0:z.max.split(". ").map((e,t)=>(0,K.jsx)("small",{children:e},t))})]})})]}),e.fieldType===c.bh.CUSTOM&&(0,K.jsx)(K.Fragment,{children:(0,K.jsx)("div",{className:"min-w-[200px] ",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("label",{className:"input-label",children:"Custom "}),(0,K.jsx)("input",{title:"Custom Expression",name:"custom",type:"text",placeholder:d.min||"Custom Expression",value:e.custom||"",onBlur:s=>h(t,"custom",s.target.value,e.fieldType,e),onChange:e=>y(t,e),style:{height:"25px"},className:"form-control form-control-sm w-full px-2 border border-gray-600 bg-gray-800 text-white rounded"}),(null===(P=l.customFields)||void 0===P||null===(R=P[t])||void 0===R?void 0:R.custom)&&(0,K.jsx)("div",{className:"text-red-500 text-sm",children:null===(q=l.customFields[t])||void 0===q?void 0:q.custom.split(". ").map((e,t)=>(0,K.jsx)("small",{children:e},t))})]})})})]})})]},t)}),(0,K.jsxs)("button",{className:"flex ml-2 px-2 py-1 font-semibold text-white btn-primary-custom rounded items-center",onClick:()=>{i({...r,customFields:[...r.customFields,{id:g(),property:"",title:"",whatsAppQuestion:"",fieldType:""}]})},children:[(0,K.jsx)("svg",{className:"w-4 h-4 text-white font-semibold cursor-pointer hover:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,K.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Add"]})]}),(0,K.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-800 text-white shadow-md",children:(0,K.jsxs)("div",{className:"modal-footer py-2 px-4 flex justify-start gap-2",children:[(0,K.jsxs)("button",{type:"button",className:"flex items-center justify-center px-4 py-2 font-semibold text-white btn-primary-custom rounded ",onClick:()=>{w(r)||(s(r),o())},children:[(0,K.jsx)("svg",{className:"w-6 h-6 text-white cursor-pointer hover:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,K.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 21H7a2 2 0 01-2-2V5a2 2 0 012-2h10a2 2 0 012 2v14a2 2 0 01-2 2zM7 3v4a1 1 0 001 1h8a1 1 0 001-1V3M7 10h10v11H7V10z"})}),"Save"]}),(0,K.jsx)("button",{type:"button",className:"flex items-center justify-center px-4 py-2 font-semibold text-white btn-primary-custom rounded ",onClick:()=>{w(r)||(s(r),o())},children:"Save & Close"})]})})]})},st=(0,a.memo)(tt),at=e=>{let{customField:t,index:s,onDelete:a,expandToEdit:o,length:r}=e;return(0,K.jsx)("div",{className:"bg-gray-700 text-white rounded-md p-1 mt-2",style:{padding:"2px 10px",border:"1px solid grey",borderRadius:"4px"},children:(0,K.jsxs)("div",{className:"flex justify-between items-center cursor-pointer grow",children:[(0,K.jsx)("div",{className:"flex justify-between items-center grow min-w-0",children:(0,K.jsxs)("div",{className:"flex min-w-0",children:[(0,K.jsxs)("svg",{onClick:()=>o(s),className:"min-w-4 w-4 h-4 mr-2 text-blue-300 cursor-pointer hover:text-white",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:[(0,K.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,K.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),(0,K.jsx)("strong",{title:t.title,className:"text-sm grow min-w-0",children:t.title?`${t.title}`:"Custom Field"})]})}),r>1&&(0,K.jsx)("div",{children:(0,K.jsx)("button",{type:"button",className:"text-white bg-red-500 hover:bg-red-700 rounded-full min-w-4 h-6 w-6 text-xl font-semibold pt-px flex items-center justify-center ml-2 w-[25px] w-[25px]",onClick:e=>{e.stopPropagation(),a(s)},children:"\xd7"})})]})})},ot=(0,a.memo)(at),rt=e=>{let{data:t,id:s}=e;const{node:o,onDelete:i,handleChange:l}=t,[n,d]=(0,a.useState)(!1),[c,m]=(0,a.useState)(!1),[u,p]=(0,a.useState)({}),[h,y]=(0,a.useState)(o.data),[x,w]=(0,a.useState)(o.data.message),b=(e,t)=>{delete o.data.errors;const s={...h,[e]:t};y(s),l(o.id,s)},j=e=>{delete o.data.errors;const t=h.customFields.filter((t,s)=>s!==e),s={...h,customFields:t};y(s),l(o.id,s)},v=()=>d(!1),f=e=>{h.customFields.forEach(e=>{e.isCollapsed=!0}),h.customFields[e].isCollapsed=!1,d(!0)};return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)("div",{className:"flow-node bg-gray-800 text-white rounded-md shadow-lg "+(o.data&&o.data.errors&&Object.keys(o.data.errors).length>0?"error-in-node":""),children:[(0,K.jsxs)("div",{className:"flex justify-between items-center py-2 px-2 border-b-4 border-indigo-500",children:[(0,K.jsx)("h3",{className:"text-sm font-semibold cursor-pointer mr-3",onClick:()=>m(!c),children:"Custom Form"}),(0,K.jsxs)("div",{className:"flex",children:[(0,K.jsx)("button",{className:"text-gray-400 hover:text-white mr-3",title:"Expand",onClick:()=>d(e=>!e),children:(0,K.jsx)("svg",{className:"w-4 h-4 text-blue-500 cursor-pointer hover:text-blue-700",fill:"white",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 242.133 242.133",children:(0,K.jsx)("path",{id:"XMLID_15_",d:"M227.133,83.033c8.283,0,15-6.716,15-15V15c0-8.284-6.717-15-15-15H174.1c-8.284,0-15,6.716-15,15 s6.716,15,15,15h16.82l-69.854,69.854L51.213,30h16.82c8.284,0,15-6.716,15-15s-6.716-15-15-15H15C6.717,0,0,6.716,0,15v53.033 c0,8.284,6.717,15,15,15c8.285,0,15-6.716,15-15v-16.82l69.854,69.854L30,190.92V174.1c0-8.284-6.715-15-15-15 c-8.283,0-15,6.716-15,15v53.033c0,8.284,6.717,15,15,15h53.033c8.284,0,15-6.716,15-15c0-8.284-6.716-15-15-15h-16.82 l69.854-69.854l69.854,69.854H174.1c-8.284,0-15,6.716-15,15c0,8.284,6.716,15,15,15h53.033c8.283,0,15-6.716,15-15V174.1 c0-8.284-6.717-15-15-15c-8.285,0-15,6.716-15,15v16.82l-69.854-69.854l69.854-69.854v16.82 C212.133,76.317,218.848,83.033,227.133,83.033z"})})}),(0,K.jsx)("button",{title:"Delete Node",className:"text-white text-xl font-semibold bg-red-500 hover:bg-red-700 rounded-full h-6 w-6 flex items-center pt-px justify-center",onClick:()=>i(s),children:"\xd7"})]})]}),!c&&(0,K.jsxs)("div",{className:"space-y-2 py-2 px-2",children:[(0,K.jsxs)("div",{className:"mb-2",title:"Property Name",children:[(0,K.jsx)("input",{type:"text",placeholder:"Property Name",value:h.property,onChange:e=>b("property",e.target.value),onBlur:e=>((e,t)=>{const s=Q(e,t);p(t=>({...t,[e]:s}))})("property",e.target.value),className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded"}),u.property&&(0,K.jsx)("small",{className:"text-red-500",children:u.property})]}),(0,K.jsxs)("div",{children:[(0,K.jsx)(se,{maxLength:300,message:h.message,onChange:e=>b("message",e)},x),u.message&&(0,K.jsx)("small",{className:"text-red-500",children:u.message})]}),(0,K.jsx)(Pe.JY,{onDragEnd:e=>{const{source:t,destination:s}=e;if(!s)return;const a=Array.from(h.customFields),[r]=a.splice(t.index,1);a.splice(s.index,0,r);const i={...h,customFields:a};y(i),l(o.id,i)},children:(0,K.jsx)(Re,{droppableId:"customForm",children:e=>{var t;return(0,K.jsxs)("div",{...e.droppableProps,ref:e.innerRef,className:"space-y-2",children:[null===(t=h.customFields)||void 0===t?void 0:t.map((e,t)=>(0,K.jsx)("div",{className:"nodrag relative subOption-wrapper",children:(0,K.jsx)(Pe.sx,{draggableId:e.id,index:t,children:s=>(0,K.jsx)("div",{ref:s.innerRef,...s.draggableProps,...s.dragHandleProps,style:{...s.draggableProps.style,left:"auto !important",top:"auto !important",width:"100%"},children:(0,K.jsx)(ot,{customField:e,index:t,onDelete:j,length:h.customFields.length,expandToEdit:f},t)})},e.id)},t)),e.placeholder]})}})}),(0,K.jsxs)("button",{className:"flex px-2 py-1 font-semibold text-white btn-primary-custom rounded items-center",onClick:()=>{delete o.data.errors;const e={id:g(),property:"",title:"",whatsAppQuestion:"",fieldType:""},t={...h,customFields:[...h.customFields,e]};y(t),l(o.id,t),d(!0)},children:[(0,K.jsx)("svg",{className:"w-4 h-4 text-white font-semibold cursor-pointer hover:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,K.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Add"]})]})]}),(0,K.jsx)(r.h7,{type:"target",position:r.yX.Top,id:s}),(0,K.jsx)(r.h7,{type:"source",position:r.yX.Bottom,id:"source"}),(0,K.jsx)(ze.l,{header:"Header",visible:n,style:{width:"100vw"},onHide:()=>{n&&v()},children:(0,K.jsx)(st,{save:e=>{const t={...e,customFields:e.customFields.map(e=>({...e}))};w(Math.random().toString()),y(t),l(o.id,t)},optionsData:h,close:v})})]})},it=(0,a.memo)(rt);var lt=s(32026),nt=s(93038),dt=s(12069);const ct=e=>{let{paramsData:t,headerData:s,save:o,close:r,properties:i}=e;const[l,n]=(0,a.useState)(t),[d,m]=(0,a.useState)(s),[u,p]=(0,a.useState)({}),[h,g]=(0,a.useState)(i||[]);(0,a.useEffect)(()=>{n(t),m(s)},[t,s]);const y=e=>{const t=h.filter(t=>t.toLowerCase().includes(e.query));g(t)},x=(e,t,s)=>{const{name:a,value:o}=e.target,r="params"===s?[...l]:[...d];r[t]={...r[t],[a]:o},"valueType"===a&&(r[t].value="date"===o?new Date:""),"params"===s?n(r):m(r)},w=()=>(0,K.jsx)("button",{title:"Delete Question Node",className:"w-full text-white bg-red-500 hover:bg-red-700 rounded flex items-center justify-center",onClick:()=>b(),children:"Close"}),b=()=>{let e=document.querySelector(".p-datepicker");e&&(e.style.visibility="hidden")},j=(e,t,s)=>(0,K.jsxs)("div",{className:"mb-4",children:[(0,K.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 bg-gray-800 mb-2 py-2 ",children:[(0,K.jsx)("div",{className:"min-w-[200px] px-4 rounded ",children:(0,K.jsx)("div",{className:"form-group",children:(0,K.jsx)("span",{className:"text-white font-bold",children:"Key"})})}),(0,K.jsx)("div",{className:"min-w-[200px] px-4 rounded",children:(0,K.jsx)("div",{className:"form-group",children:(0,K.jsx)("span",{className:"text-white font-bold",children:"Value Type"})})}),(0,K.jsx)("div",{className:"min-w-[200px] px-4 bg-gray-800 rounded",children:(0,K.jsx)("div",{className:"form-group",children:(0,K.jsx)("span",{className:"text-white font-bold",children:"Value"})})}),(0,K.jsx)("div",{className:"min-w-[200px] px-4 bg-gray-800 rounded flex justify-end",children:(0,K.jsx)("div",{className:"form-group",children:(0,K.jsx)("span",{className:"text-white font-bold",children:"Delete"})})})]}),e.map((a,o)=>(0,K.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-2 bg-gray-800",children:[(0,K.jsx)("div",{className:"min-w-[200px] px-4 py-2 shadow-md rounded ",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsx)("input",{title:`${s} key`,placeholder:`${s} key`,type:"text",maxLength:50,className:"w-full px-2 py-1 border border-gray-600 bg-gray-700 text-white rounded",name:"key",value:a.key,onChange:e=>x(e,o,t),onBlur:e=>{e.target.value}}),u[`key-${o}`]&&(0,K.jsx)("small",{className:"text-red-500",children:u[`key-${o}`]})]})}),(0,K.jsx)("div",{className:"min-w-[200px] px-4 py-2 shadow-md rounded",children:(0,K.jsxs)("div",{className:"form-group",children:[(0,K.jsxs)("select",{title:"Value Type",value:a.valueType,onChange:e=>x(e,o,t),className:"w-full p-1 border border-gray-600 bg-gray-700 text-white rounded",name:"valueType",children:[(0,K.jsx)("option",{value:"",children:"Select Value Type"}),c.d4.map(e=>(0,K.jsx)("option",{value:e.toLowerCase(),children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),u[`valueType-${o}`]&&(0,K.jsx)("small",{className:"text-red-500",children:u[`valueType-${o}`]})]})}),(0,K.jsx)("div",{className:"min-w-[200px] px-4 py-2 shadow-md bg-gray-800 rounded",children:(0,K.jsxs)("div",{className:"form-group",children:[(!a.valueType||"date"!==a.valueType&&"number"!==a.valueType&&"header"!==a.valueType&&"param"!==a.valueType)&&(0,K.jsx)("input",{title:`${s} Value`,placeholder:`${s} Value`,type:"text",maxLength:50,className:"w-full px-2 py-1 border border-gray-600 bg-gray-700 text-white rounded",name:"value",value:a.value,onChange:e=>x(e,o,t),onBlur:e=>{e.target.value}}),a.valueType&&"number"===a.valueType&&(0,K.jsx)("input",{title:`${s} Value`,placeholder:`${s} Value`,type:"number",maxLength:50,className:"appearance-none w-full px-2 py-1 border border-gray-600 bg-gray-700 text-white rounded",name:"value",value:a.value,onChange:e=>x(e,o,t),onBlur:e=>{e.target.value},style:{MozAppearance:"textfield"}}),a.valueType&&("date"===a.valueType||"time"===a.valueType)&&(0,K.jsx)(Ue.V,{tooltipOptions:{position:"top"},showIcon:!0,placeholder:"Date",value:a.value||null,onChange:e=>x(e,o,t),showTime:a.valueType!==c.bh.DATE,className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded",timeOnly:c.bh.TIME===a.valueType,autoZIndex:!0,footerTemplate:w,showButtonBar:!0}),a.valueType&&("param"===a.valueType||"header"===a.valueType)&&(0,K.jsx)(dt.j,{value:a.value,suggestions:h,completeMethod:y,onChange:e=>((e,t,s)=>{if("params"==s){const s=[...l];s[t]={...s[t],value:e.target.value},n(s)}else if("headers"==s){const s=[...d];s[t]={...s[t],value:e.target.value},m(s)}})(e,o,t),dropdown:!0}),u[`value-${o}`]&&(0,K.jsx)("small",{className:"text-red-500",children:u[`value-${o}`]})]})}),(0,K.jsx)("div",{className:"min-w-[200px] px-4 py-2 shadow-md bg-gray-800 rounded flex justify-end items-center",children:e.length&&(0,K.jsx)("button",{type:"button",className:"text-white bg-red-500 hover:bg-red-700 rounded-full h-6 w-6 flex items-center justify-center text-xl font-bold",onClick:e=>{e.stopPropagation(),((e,t)=>{const s="params"===t?l.filter((t,s)=>s!==e):d.filter((t,s)=>s!==e);"params"===t?n(s):m(s)})(o,t)},children:"\xd7"})})]},o)),(0,K.jsxs)("button",{className:"ml-1 px-3 py-1 font-semibold text-white btn-primary-custom rounded flex items-center",onClick:()=>(e=>{const t={key:"",valueType:"",value:""};"params"===e?n(e=>[...e,t]):m(e=>[...e,t])})(t),children:[(0,K.jsx)("svg",{className:"w-5 h-5 mr-2 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,K.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Add ",s.slice(0,-1)]})]});return(0,K.jsxs)("div",{className:"flow-node fixed inset-0 flex flex-col bg-gray-900 text-white",children:[(0,K.jsx)("div",{className:"fixed top-0 left-0 right-0 bg-gray-800 text-white shadow-md z-10",children:(0,K.jsxs)("div",{className:"modal-header px-4 py-2 flex justify-between items-center",children:[(0,K.jsx)("h5",{className:"modal-title text-lg font-bold",children:"HTTP Params"}),(0,K.jsx)("button",{type:"button",className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-xl font-extrabold",title:"Close popup",onClick:r,children:"\xd7"})]})}),(0,K.jsxs)("div",{className:"overflow-y-auto p-4 mt-16 mb-20",children:[j(l,"params","Params"),j(d,"headers","Headers")]}),(0,K.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-800 text-white shadow-md",children:(0,K.jsxs)("div",{className:"modal-footer py-2 px-4 flex justify-start gap-2",children:[(0,K.jsxs)("button",{type:"button",className:"flex items-center justify-center px-4 py-2 font-semibold text-white btn-primary-custom rounded",onClick:()=>{o(l,d)},children:[(0,K.jsx)("svg",{className:"w-6 h-6 text-white cursor-pointer hover:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,K.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 21H7a2 2 0 01-2-2V5a2 2 0 012-2h10a2 2 0 012 2v14a2 2 0 01-2 2zM7 3v4a1 1 0 001 1h8a1 1 0 001-1V3M7 10h10v11H7V10z"})}),"Save"]}),(0,K.jsx)("button",{type:"button",className:"flex items-center justify-center px-4 py-2 font-semibold text-white btn-primary-custom rounded",onClick:()=>{o(l,d),r()},children:"Save & Close"})]})})]})},mt=(0,a.memo)(ct),ut=e=>{var t,s,o,i,l,n,d,m,u;let{id:p,data:h}=e;const{node:g,onDelete:y,handleChange:x,setNodes:w,nodes:b,edges:j}=h,[v,f]=(0,a.useState)({...g.data}),[k,N]=(0,a.useState)(!1),[C,T]=(0,a.useState)([]);b.forEach(e=>"question"===e.type);const E=()=>{w(b.map(e=>({...e,selected:!1})))};(0,a.useEffect)(()=>{const e=O(g.id,j,b),t=D(e);T(t)},[b]);const F=(e,t)=>{delete g.data.errors;const s={...g.data,[e]:t};f(s),x(g.id,s)},M=e=>{delete g.data.errors;const t={...v,[e]:[...v[e]||[],{key:"",valueType:"",value:""}]};f(t),x(g.id,t),N(!0)},S=(e,t)=>{var s,a;let o;delete g.data.errors,o="params"==t?null===(s=v.params)||void 0===s?void 0:s.filter((t,s)=>s!==e):null===(a=v.headers)||void 0===a?void 0:a.filter((t,s)=>s!==e);const r={...v,[t]:o};f(r),x(g.id,r)},I=()=>N(!1),L=()=>N(!0);return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)("div",{className:"flow-node bg-gray-800 text-white rounded-md shadow-lg "+(null!==(t=g.data)&&void 0!==t&&t.errors&&Object.keys(g.data.errors).length?"error-in-node":""),children:[(0,K.jsxs)("div",{className:"flex justify-between items-center border-b py-1 px-2 border-b-4 border-indigo-500",children:[(0,K.jsx)("h3",{className:"text-sm font-semibold",children:"HTTP Node"}),(0,K.jsx)("button",{title:"Delete Node",className:"text-white bg-red-500 hover:bg-red-700 rounded-full h-6 w-6 flex items-center justify-center text-xl font-extrabold",onClick:()=>y(p),children:"\xd7"})]}),(0,K.jsxs)("div",{className:"py-2 px-2",children:[(0,K.jsx)("div",{className:"mb-2",title:"Property Name",children:(0,K.jsx)("input",{type:"text",placeholder:"Property Name",value:v.property,onClick:E,onChange:e=>F("property",e.target.value),className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded"})}),(0,K.jsx)("div",{className:"mb-2",title:"Display Text",children:(0,K.jsx)("input",{type:"text",placeholder:"Display Text",value:v.displayText,onClick:E,onChange:e=>F("displayText",e.target.value),className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded"})}),(0,K.jsx)("div",{className:"mb-2",title:"URL",children:(0,K.jsx)("input",{type:"text",placeholder:"URL",value:v.url,onClick:E,onChange:e=>F("url",e.target.value),className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded"})}),(0,K.jsx)("div",{className:"mb-2",children:(0,K.jsxs)("select",{title:"Request Type",value:v.requestType,onClick:E,onChange:e=>{delete g.data.errors;const t=e.target.value;F("requestType",t)},className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded",children:[(0,K.jsx)("option",{value:"",children:"Select Request Type"}),c.$q.map(e=>(0,K.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})}),(0,K.jsx)("div",{className:"mb-2",children:(0,K.jsx)(Oe.A,{control:(0,K.jsx)(nt.A,{checked:v.hideData,onChange:e=>F("hideData",e.target.checked),color:"primary",sx:{"& .MuiSvgIcon-root":{fontSize:28}}}),label:"Hide Data",className:"text-white cursor-pointer"})}),v.params.map((e,t)=>{var s,a,o,r;return(0,K.jsx)("div",{className:"bg-gray-700 text-white rounded-md mt-2 px-2 py-0.5 border border-gray-400 rounded-md",style:{padding:"2px 10px",border:"1px solid grey",borderRadius:"4px"},children:(0,K.jsxs)("div",{className:"flex justify-between items-center cursor-pointer grow",title:e.key||e.valueType||e.value?`${e.key} - ${null!==(s=e.valueType)&&void 0!==s?s:""} - ${null!==(a=e.value)&&void 0!==a?a:""}`:"HTTP Request Param",children:[(0,K.jsx)("div",{className:"flex justify-between items-center grow min-w-0",children:(0,K.jsxs)("div",{className:"flex min-w-0",children:[(0,K.jsxs)("svg",{onClick:()=>L(),className:"min-w-4 w-4 h-4 mr-2 text-blue-300 cursor-pointer hover:text-white",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:[(0,K.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,K.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),(0,K.jsx)("strong",{className:"text-sm grow min-w-0 whitespace-nowrap overflow-hidden text-ellipsis",children:e.key||e.valueType||e.value?`${e.key} - ${null!==(o=e.valueType)&&void 0!==o?o:""} - ${null!==(r=e.value)&&void 0!==r?r:""}`:"Param"})]})}),v.params.length&&(0,K.jsx)("div",{children:(0,K.jsx)("button",{type:"button",className:"text-white bg-red-500 hover:bg-red-700 rounded-full min-w-4 h-6 w-6 text-xl font-semibold pt-px flex items-center justify-center ml-2 w-[25px] w-[25px]",onClick:e=>{e.stopPropagation(),S(t,"params")},children:"\xd7"})})]})},t)}),(null===(s=g.data.errors)||void 0===s||null===(o=s.params)||void 0===o?void 0:o.length)>0&&(0,K.jsx)("small",{className:"text-red-500",children:"Errors in Params"}),(0,K.jsxs)("button",{className:"flex px-2 py-1 mt-2 text-xs font-semibold text-white btn-primary-custom rounded items-center mb-2",onClick:()=>M("params"),children:[(0,K.jsx)("svg",{className:"w-3 h-3 text-white font-semibold cursor-pointer hover:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,K.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Add Param"]}),null===(i=v.headers)||void 0===i?void 0:i.map((e,t)=>{var s,a,o,r;return(0,K.jsx)("div",{className:"bg-gray-700 text-white rounded-md mt-2 px-2 py-0.5 border border-gray-400 rounded-md",style:{padding:"2px 10px",border:"1px solid grey",borderRadius:"4px"},children:(0,K.jsxs)("div",{className:"flex justify-between items-center cursor-pointer grow",title:e.key||e.valueType||e.value?`${e.key} - ${null!==(s=e.valueType)&&void 0!==s?s:""} - ${null!==(a=e.value)&&void 0!==a?a:""}`:"HTTP Request Param",children:[(0,K.jsx)("div",{className:"flex justify-between items-center grow min-w-0",children:(0,K.jsxs)("div",{className:"flex min-w-0",children:[(0,K.jsxs)("svg",{onClick:()=>L(),className:"min-w-4 w-4 h-4 mr-2 text-blue-300 cursor-pointer hover:text-white",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:[(0,K.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,K.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),(0,K.jsx)("strong",{className:"text-sm grow min-w-0 whitespace-nowrap overflow-hidden text-ellipsis",children:e.key||e.valueType||e.value?`${e.key} - ${null!==(o=e.valueType)&&void 0!==o?o:""} - ${null!==(r=e.value)&&void 0!==r?r:""}`:"Header"})]})}),v.headers.length&&(0,K.jsx)("div",{children:(0,K.jsx)("button",{type:"button",className:"text-white bg-red-500 hover:bg-red-700 rounded-full min-w-4 h-6 w-6 text-xl font-semibold pt-px flex items-center justify-center ml-2 w-[25px] w-[25px]",onClick:e=>{e.stopPropagation(),S(t,"headers")},children:"\xd7"})})]})},t)}),(null===(l=g.data.errors)||void 0===l||null===(n=l.headers)||void 0===n?void 0:n.length)>0&&(0,K.jsx)("small",{className:"text-red-500",children:"Errors in Headers"}),(0,K.jsxs)("button",{className:"flex px-2 py-1 mt-2 text-xs font-semibold text-white btn-primary-custom rounded items-center mb-2",onClick:()=>M("headers"),children:[(0,K.jsx)("svg",{className:"w-3 h-3 text-white font-semibold cursor-pointer hover:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,K.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Add Header"]}),(0,K.jsxs)("div",{className:"grid grid-cols-10 gap-2 mb-2 px-1 py-1 border border-gray-400 rounded-md relative",children:[(0,K.jsx)("div",{className:"col-span-10",title:"Success",children:(0,K.jsx)("input",{readOnly:!0,type:"text",value:"Success",onClick:E,className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded capitalize"})}),(0,K.jsx)(r.h7,{type:"source",position:r.yX.Right,id:v.successFlowId})]}),(0,K.jsxs)("div",{className:"grid grid-cols-10 gap-2 mb-2 px-1 py-1 border border-gray-400 rounded-md relative",children:[(0,K.jsx)("div",{className:"col-span-10",title:"Fail",children:(0,K.jsx)("input",{readOnly:!0,type:"text",value:"Fail",onClick:E,className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded capitalize"})}),(0,K.jsx)(r.h7,{type:"source",position:r.yX.Right,id:v.failureFlowId})]}),null===(d=v.statusWiseFlow)||void 0===d?void 0:d.map((e,t)=>(0,K.jsx)(K.Fragment,{children:(0,K.jsxs)("div",{className:"grid grid-cols-12 gap-2 mb-2 px-1 py-1 border border-gray-400 rounded-md relative",children:[(0,K.jsx)("div",{className:"col-span-10",title:"Fail Status Message",children:(0,K.jsx)("input",{type:"text",placeholder:"Status Message",value:e.statusCode,onClick:E,onChange:e=>((e,t,s)=>{delete g.data.errors;const{statusWiseFlow:a,...o}=g.data;a[e][t]=s;const r={...o,statusWiseFlow:a};f(r),x(g.id,r)})(t,"statusCode",e.target.value),className:"nodrag w-full p-1 border border-gray-600 bg-gray-700 text-white rounded capitalize"})}),(0,K.jsx)("div",{className:"col-span-2",title:"Delete",children:(0,K.jsx)("button",{type:"button",className:"text-white bg-red-500 hover:bg-red-700 rounded-full min-w-4 h-6 w-6 text-xl font-semibold pt-px flex items-center justify-center w-[25px] w-[25px]",onClick:e=>{e.stopPropagation(),(e=>{var t;delete g.data.errors;const s=null===(t=v.statusWiseFlow)||void 0===t?void 0:t.filter((t,s)=>s!==e),a={...v,statusWiseFlow:s};f(a),x(g.id,a)})(t)},children:"\xd7"})}),(0,K.jsx)(r.h7,{type:"source",position:r.yX.Right,id:e.id})]},t)})),(null===(m=g.data.errors)||void 0===m||null===(u=m.statusWiseFlow)||void 0===u?void 0:u.length)>0&&(0,K.jsx)("small",{className:"text-red-500",children:"Errors in statusWiseFlow"}),(0,K.jsxs)("button",{className:"flex px-2 py-1 mt-2 text-xs font-semibold text-white btn-primary-custom rounded items-center mb-2",onClick:()=>{delete g.data.errors;const e={id:(0,lt.OX)(),statusCode:""},t={...v,statusWiseFlow:[...v.statusWiseFlow||[],e]};f(t),x(g.id,t)},children:[(0,K.jsx)("svg",{className:"w-3 h-3 text-white font-semibold cursor-pointer hover:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,K.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Add More Status"]})]}),(0,K.jsx)(r.h7,{type:"target",position:r.yX.Top,id:p})]}),(0,K.jsx)(ze.l,{header:"Edit HTTP Params",visible:k,style:{width:"600px"},onHide:I,children:(0,K.jsx)(mt,{save:(e,t)=>{delete g.data.errors;const s={...v,params:e,headers:t};f(s),x(g.id,s)},paramsData:v.params||[],headerData:v.headers||[],close:I,properties:C})})]})},pt=(0,a.memo)(ut);function ht(e){let{id:t,sourceX:s,sourceY:a,targetX:o,targetY:i,sourcePosition:l,targetPosition:n,style:d={}}=e;const{setEdges:c}=(0,r.VH)(),[m,u,p]=(0,r.oN)({sourceX:s,sourceY:a,sourcePosition:l,targetX:o,targetY:i,targetPosition:n});return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("svg",{style:{position:"absolute"},children:(0,K.jsx)("defs",{children:(0,K.jsx)("marker",{id:"arrowhead",viewBox:"0 0 10 10",refX:"10",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto",children:(0,K.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#ff0073"})})})}),(0,K.jsx)(r.tE,{path:m,markerEnd:"url(#arrowhead)",style:d}),(0,K.jsx)(r.rV,{children:(0,K.jsx)("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${u}px,${p}px)`,fontSize:12,pointerEvents:"all"},className:"nodrag nopan",children:(0,K.jsx)("button",{className:"w-4 h-4 bg-gray-300 border border-gray-500 rounded-full text-xs font-bold text-gray-800 flex items-baseline justify-center hover:bg-red-600 hover:border-red-700 hover:text-white hover:shadow-md",onClick:()=>{c(e=>e.filter(e=>e.id!==t))},children:"\xd7"})})})]})}const gt=e=>{let{flowList:t,value:s,onChange:o}=e;(0,a.useEffect)(()=>{if(!s&&null!==t&&void 0!==t&&t.length){const e=t.find(e=>e.label.includes("Draft"));e&&o(e.value)}},[s,t,o]);return(0,K.jsxs)("div",{className:"pb-3",children:[(0,K.jsx)("label",{htmlFor:"dropdown",className:"text-xs",children:"Flows"}),(0,K.jsxs)("select",{id:"dropdown",className:"border w-full","aria-label":"Select Draft or Version to View and Modify",onChange:e=>o(e.target.value),value:s||"",children:[(0,K.jsx)("option",{value:"",children:"Select a flow"}),null===t||void 0===t?void 0:t.map(e=>(0,K.jsx)("option",{value:e.value,children:e.label},e.value))]})]})},yt=(0,a.memo)(gt),xt=e=>{let{onDragStart:t,clearFlow:s,onSave:a,errors:o,nodes:r,flowList:i,onFlowSelectionChange:l,onDelete:n,flowId:d,isSaveDisabled:c}=e;return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)("div",{className:"flow-tools",children:[(0,K.jsx)("button",{className:"button",onDragStart:e=>t(e,"message"),draggable:!0,children:"Message"}),(0,K.jsx)("button",{className:"button",onDragStart:e=>t(e,"options"),draggable:!0,children:"Options"}),(0,K.jsx)("button",{className:"button",onDragStart:e=>t(e,"leadForm"),draggable:!0,children:"Lead Form"}),(0,K.jsx)("button",{className:"button",onDragStart:e=>t(e,"file"),draggable:!0,children:"File"}),(0,K.jsx)("button",{className:"button",onDragStart:e=>t(e,"map"),draggable:!0,children:"Maps"}),(0,K.jsx)("button",{className:"button",onDragStart:e=>t(e,"question"),draggable:!0,children:"Question"}),(0,K.jsx)("button",{className:"button",onDragStart:e=>t(e,"callConnect"),draggable:!0,children:"CallConnect"}),(0,K.jsx)("button",{className:"button",onDragStart:e=>t(e,"otp"),draggable:!0,children:"OTP"}),(0,K.jsx)("button",{className:"button",onDragStart:e=>t(e,"customForm"),draggable:!0,children:"Custom Form"}),(0,K.jsx)("button",{className:"button",onDragStart:e=>t(e,"http"),draggable:!0,children:"HTTP"}),(0,K.jsx)("button",{className:"button",onDragStart:e=>t(e,"gpt"),draggable:!0,children:"GPT Handler"}),(0,K.jsx)("button",{className:"button",onDragStart:e=>t(e,"stop"),draggable:!0,children:"Stop"})]}),(0,K.jsxs)("div",{className:"flow-actions",children:[(0,K.jsx)(yt,{flowList:i,onChange:l,value:d}),(0,K.jsx)("button",{disabled:c,className:"px-2 py-2 bg-green-500 hover:bg-green-700 text-white font-bold rounded items-center text-center",onClick:()=>a(),children:"Save"}),(0,K.jsx)("button",{disabled:Object.keys(o).length>0||r.length<2,className:"px-2 py-2 bg-blue-500 hover:bg-blue-700 text-white font-bold rounded items-center text-center",onClick:()=>a(!0),children:"Deploy"}),(0,K.jsx)("button",{disabled:r.length<2,title:"Clear Board - Will delete all Nodes and Edges",className:"text-white bg-red-500 hover:bg-red-700 rounded h-8 w-8 flex items-center justify-center",onClick:()=>s(),children:"Clear"}),(0,K.jsx)("button",{disabled:!d,title:"Delete Flow",className:"text-white bg-red-500 hover:bg-red-700 rounded h-8 w-8 flex items-center justify-center hidden",onClick:()=>n(d),children:"Delete"})]})]})},wt=a.memo(xt),bt=(e,t)=>{const s=t.find(t=>t.sourceHandle===e);return(null===s||void 0===s?void 0:s.target)||""},jt=(e,t)=>"number"===e?Number(t):"date"===e?new Date(e):t;var vt=s(28535);const ft=e=>{let{onAccept:t,onReject:s}=e;return(0,K.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,K.jsx)("button",{className:"text-white px-2 bg-green-500 hover:bg-green-700 rounded h-8 flex items-center justify-center",onClick:s,children:"No"}),(0,K.jsx)("button",{className:"text-white bg-red-500 px-2 hover:bg-red-700 rounded h-8 flex items-center justify-center",onClick:t,autoFocus:!0,children:"Yes"})]})};var kt=s(47751);function Nt(e){const t=document.createElement("a");t.setAttribute("download","reactflow.png"),t.setAttribute("href",e),t.click()}const Ct=1024;const Tt=function(){const{getNodes:e}=(0,r.VH)();return(0,K.jsx)(r.Zk,{position:"top-right",children:(0,K.jsx)("button",{className:"download-btn",onClick:()=>{const t=(0,r.Jo)(e()),s=(0,r.R4)(t,Ct,768,.5,2,20);(0,kt.$E)(document.querySelector(".react-flow__viewport"),{backgroundColor:"#1a365d",width:Ct,height:768,style:{width:"1024px",height:"768px",transform:`translate(${s.x}px, ${s.y}px) scale(${s.zoom})`}}).then(Nt)},children:"Download Image"})})},Et=e=>{let{flowData:t,flowList:s,onSave:o,onVersionSelected:n,onDelete:d}=e;const c=(0,a.useMemo)(()=>({start:pe,message:oe,options:We,leadForm:ie,leadFlow:ne,gpt:ce,stop:me,file:Se,map:Le,question:_e,callConnect:Je,otp:et,customForm:it,http:pt}),[]),m=(0,a.useMemo)(()=>({custom:ht}),[]),[u,p]=(0,a.useState)([]),[h,x]=(0,a.useState)([]),[w,b]=(0,a.useState)({}),[j,v]=(0,a.useState)(!0),[f,k]=(0,a.useState)(null),[N,C]=(0,a.useState)(!1),T=(0,a.useRef)(null),F=(0,a.useRef)(!1),M=(0,a.useRef)(""),S=(0,a.useRef)({}),O=(0,a.useRef)({}),D=()=>{b({})};(0,a.useEffect)(()=>{F.current&&t&&(F.current=!1,T.current&&T.current.show({severity:"success",summary:"Chatbot Flow",detail:"Chatbot Flow Design has been saved successfully",life:5e3}));const{flowNodes:e,flowEdges:s}=y(t);p(e),x(s)},[t]),(0,a.useEffect)(()=>{v(u.length<2||Object.keys(w).length>0)},[u,w,h]);const A=(0,a.useCallback)(e=>{D(),p(t=>(0,r._0)(e,t))},[]),P=(0,a.useCallback)(e=>{if("reset"===e[0].type&&!N&&O.current)return M.current="Edge Delete",O.current=e,void C(!0);D(),x(t=>(0,r.zW)(e,t))},[N]),R=e=>{D(),x(t=>(0,r.zW)(e,t))},q=(0,a.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),U=(0,a.useCallback)(e=>{if(!f)return void console.error("React Flow instance is not initialized yet.");if(D(),e.preventDefault(),!e.dataTransfer.getData("application/reactflow"))return;const t=((e,t)=>{const s=e.dataTransfer.getData("application/reactflow");return{id:g(),type:s,position:t,data:{message:""},..."options"===s&&{data:{fieldLabel:"",property:"",message:"",fallback:"",subOptions:[{id:g(),title:"",subTitle:"",value:"",leadEmailTo:"",leadEmailCc:[],category:"",description:"",isCollapsed:!0,isLink:!1}]}},..."file"===s&&{data:{message:"",fileType:"pdf",urls:[],files:[]}},..."map"===s&&{data:{message:"",url:""}},..."leadForm"===s&&{data:{message:"This will display lead form for the visitor"}},..."gpt"===s&&{data:{message:"From here on visitors would be handled by GPT"}},..."question"===s&&{data:{message:"",fieldLabel:"",property:"",type:"",meta:{min:"",max:"",regex:"",errorMessage:""}}},..."http"===s&&{data:{propertyName:"",displayText:"",url:"",requestType:"",hideData:!1,params:[],headers:[],successFlowId:g(),failureFlowId:g(),statusWiseFlow:[]}},..."callConnect"===s&&{data:{message:"",meta:{callConnectId:"",callAccepted:"",callRejected:"",successMessage:"",failureMessage:""},callAcceptedId:g(),callRejectedId:g()}},..."otp"===s&&{data:{message:"",meta:{otpType:""}}},..."customForm"===s&&{data:{property:"",message:"",customFields:[{id:g(),title:"",property:"",fieldType:"",isCollapsed:!0}]}}}})(e,null===f||void 0===f?void 0:f.screenToFlowPosition({x:e.clientX,y:e.clientY}));p(e=>e.concat(t))},[f]),Q=(0,a.useCallback)(e=>{D(),p(t=>t.filter(t=>t.id!==e)),x(t=>t.filter(t=>t.source!==e&&t.target!==e))},[]),X=e=>{if(!N&&e)return M.current="Node Delete",S.current=e,void C(!0)},Z=(0,a.useCallback)(e=>{if("Delete"===e.key){const e=u.filter(e=>e.selected),t=h.filter(e=>e.selected);if(!N&&e.length>0)return M.current="Node Delete",S.current=e[0].id,void C(!0);if(!N&&t.length>0)return M.current="Edge Delete",O.current=t,void C(!0);e.length>0&&(Q(e[0].id),x(t=>t.filter(t=>!e.some(e=>e.id===t.source||e.id===t.target)))),t.length>0&&x(e=>e.filter(e=>!t.includes(e)))}},[u,h,N,Q]),Y=(0,a.useCallback)(e=>{D(),x(e.reduce((e,t)=>{const s=(0,r.FB)(t,u,h),a=(0,r.RM)(t,u,h),o=(0,r.AX)([t],h);return[...e.filter(e=>!o.includes(e)),...s.flatMap(e=>{let{id:t}=e;return a.map(e=>{let{id:s}=e;return{id:`${t}->${s}`,source:t,target:s}})})]},h))},[u,h]),ee=e=>{if(u.length<2){const e={MinNodes:"Minimum 2 nodes required for a valid flow"};return b(e),!1}let s={},a={};for(const t of u)if("message"===t.type){const e=$(t.data);s={...s,...e}}else if("options"===t.type){const e=B(t,t.data,u,h);s={...s,...e}}else if("file"===t.type){const e=H(t.data);s={...s,...e}}else if("map"===t.type){const e=z(t.data);s={...s,...e}}else if("question"===t.type){const e=W(t.data);s={...s,...e}}else if("callConnect"===t.type){const e=V(t.data);s={...s,...e}}else if("otp"===t.type){const e=_(t.data);s={...s,...e}}else if("http"===t.type){const{newErrors:e,newWarnings:o}=G(t,u,h);s={...s,...e},a={...o}}if(Object.keys(s).length>0){b(s);const e=Object.values(s);return T.current&&T.current.show(e.map(e=>({severity:"error",summary:"Error",detail:e,life:3100}))),p(u),void v(!0)}if(e&&Object.keys(a).length>0){const e=Object.values(a);return T.current&&T.current.show(e.map(e=>({severity:"warn",summary:"Warning",detail:e,life:3100}))),void v(!0)}const r={nodes:u,edges:h},i=(e=>e.map(e=>{let{id:t,type:s,data:a,position:o}=e;return a.subOptions&&(a.subOptions=a.subOptions.map(e=>{const{isCollapsed:t,...s}=e;return s})),{id:t,type:s,data:a,position:o}}))(u);r.nodes=i;const l=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=e.slice(1);let o=[];const r=e.find(e=>"start"===e.type),i=t.find(e=>e.source===(null===r||void 0===r?void 0:r.id)),l=i?i.target:"",n=a.map(e=>{var s;const a=t.find(t=>t.source===e.id),r=a?a.target:null,i={flowId:e.id,nextFlowId:"options"!==e.type&&"http"!==e.type?r:"",type:e.type,content:(null===(s=e.data.message)||void 0===s?void 0:s.trim())||""};var l,n,d,c,m;if("options"!==e.type&&"question"!==e.type||(i.fieldLabel=null===(l=e.data.fieldLabel)||void 0===l?void 0:l.trim()),"options"!==e.type&&"question"!==e.type&&"http"!==e.type&&"customForm"!==e.type||(i.property=null===(n=e.data.property)||void 0===n?void 0:n.trim()),"options"===e.type&&(i.meta={fallback:null===(d=e.data.fallback)||void 0===d?void 0:d.trim(),dataSource:null===(c=e.data.dataSource)||void 0===c?void 0:c.trim()}),"file"===e.type){const t=(e=>"application/pdf"===e||"pdf"===e?"pdf":e.startsWith("image/")?"image":e.startsWith("video/")?"video":"unknown")(e.data.fileType);e.data.files.length>0?i.meta={type:t,media:e.data.files.map(e=>{var t,s;return{name:e.name||"Unnamed file",url:(null===(t=e.url)||void 0===t?void 0:t.trim())||"",type:E(null===(s=e.url)||void 0===s?void 0:s.trim())}})}:i.meta={type:t,media:e.data.urls.map(e=>({url:(null===e||void 0===e?void 0:e.trim())||"",type:E(null===e||void 0===e?void 0:e.trim())}))}}if("map"===e.type&&e.data.url&&(i.meta={url:null===(m=e.data.url)||void 0===m?void 0:m.trim()}),"question"===e.type){if("number"===e.data.fieldType||"string"===e.data.fieldType||"age"===e.data.fieldType)i.meta={min:e.data.min?parseInt(e.data.min):e.data.min,max:e.data.max?parseInt(e.data.max):e.data.max,type:e.data.fieldType};else if("date"===e.data.fieldType)i.meta={min:e.data.min?I(e.data.min,!0):e.data.min,max:e.data.max?I(e.data.max,!1,!0):e.data.min,type:e.data.fieldType};else if("datetime"===e.data.fieldType)i.meta={min:e.data.min?I(e.data.min):e.data.min,max:e.data.max?I(e.data.max):e.data.min,type:e.data.fieldType};else if("time"===e.data.fieldType)i.meta={min:L(e.data.min),max:L(e.data.max),type:e.data.fieldType};else if("custom"===e.data.fieldType){var u;i.meta={custom:null===(u=e.data.custom)||void 0===u?void 0:u.trim(),type:e.data.fieldType}}else i.meta={type:e.data.fieldType};i.meta.dateFormat=e.data.dateFormat||"",i.meta.errorMessage=e.data.errorMessage||""}if(e.data.subOptions&&(i.children=e.data.subOptions.map(e=>{var s,a,o,r,i,l;const n=t.find(t=>t.sourceHandle===e.id);return{id:e.id,flowId:e.id,isLink:e.isLink,title:null===(s=e.title)||void 0===s?void 0:s.trim(),subTitle:null===(a=e.subTitle)||void 0===a?void 0:a.trim(),imageUrl:null===(o=e.imageUrl)||void 0===o?void 0:o.trim(),value:null===(r=e.value)||void 0===r?void 0:r.trim(),category:null===(i=e.category)||void 0===i?void 0:i.trim(),description:e.description,leadEmailTo:null===(l=e.leadEmailTo)||void 0===l?void 0:l.trim(),leadEmailCc:e.leadEmailCc?[...e.leadEmailCc]:[],nextFlowId:n?n.target:void 0}})),"http"===e.type){if(i.meta={displayText:e.data.displayText,requestType:e.data.requestType,hideData:e.data.hideData,url:e.data.url,successFlowId:bt(e.data.successFlowId,t),failureFlowId:bt(e.data.failureFlowId,t)},e.data.params.length>0){const t=e.data.params.map(e=>({key:e.key,valueType:e.valueType,value:jt(e.valueType,e.value)}));i.meta.params=t}if(e.data.headers.length>0){const t=e.data.headers.map(e=>({key:e.key,valueType:e.valueType,value:jt(e.valueType,e.value)}));i.meta.headers=t}if(e.data.statusWiseFlow.length>0){const s=e.data.statusWiseFlow.map(e=>{const s=t.find(t=>t.sourceHandle===e.id);return{statusCode:e.statusCode,flowId:e.id,nextFlowId:s?s.target:void 0}});i.meta.statusWiseFlowId=s}}return"callConnect"===e.type&&(i.content=e.data.message,i.meta={callConnectId:e.data.callConnectId,callAccepted:e.data.callAccepted,callRejected:e.data.callRejected,successMessage:e.data.successMessage,failureMessage:e.data.failureMessage}),"otp"===e.type&&(i.content=e.data.message,i.meta={otpType:e.data.otpType}),"customForm"===e.type&&(i.property=e.data.property,i.content=e.data.message,i.meta={customFields:e.data.customFields}),o.push({nodeId:e.id,position:e.position}),i});return{_id:s._id||"",organizationId:s.organizationId||"",botId:s.botId||"",createdAt:(new Date).toISOString(),version:0,startFlowId:l,flows:n,__v:0,deployedAt:(new Date).toISOString(),modifiedAt:(new Date).toISOString(),positions:o}}(i,h,t);F.current=!0,o(l,e)};return(0,a.useEffect)(()=>{const e=document.getElementById("reactflow-wrap");return e&&e.addEventListener("keydown",Z),()=>{e&&e.removeEventListener("keydown",Z)}},[Z]),(0,K.jsxs)(vt.mD,{children:[(0,K.jsxs)("div",{className:"flow-diagram",children:[(0,K.jsx)("div",{id:"reactflow-wrap",className:"reactflow-wrapper",children:(0,K.jsx)("div",{className:"flex flex-col h-full",children:(0,K.jsx)("div",{className:"reactflow-box",onDrop:U,onDragOver:q,children:(0,K.jsx)(r.Ln,{children:(0,K.jsxs)(r.Gc,{nodes:u.map(e=>({...e,data:{node:e,nodes:u,handleChange:(e,t)=>((e,t)=>{D();const s=u.map(s=>s.id===e?{...s,selected:!1,data:{...s.data,...t}}:{...s,selected:!1});p(s)})(e,t),onDelete:X,edges:h,updateEdges:R,setNodes:p}})),edges:h,onInit:k,onNodesChange:A,onEdgesChange:P,onConnect:e=>{D(),x(t=>{const s=t.filter(t=>{const s=t.source===e.source,a=t.sourceHandle===e.sourceHandle;return!s||t.sourceHandle&&!a});return(0,r.rN)({...e,type:"custom"},s)})},nodeTypes:c,edgeTypes:m,onNodesDelete:Y,children:[(0,K.jsx)(i.H,{}),(0,K.jsx)(l.V,{}),(0,K.jsx)(Tt,{})]})})})})}),(0,K.jsx)(J.y,{ref:T}),(0,K.jsx)("div",{className:"toolbar",children:(0,K.jsx)(wt,{onDragStart:(e,t)=>{e.dataTransfer.setData("application/reactflow",t)},clearFlow:()=>{M.current="",C(!0)},onSave:e=>ee(e),errors:w,nodes:u,flowList:s,onFlowSelectionChange:n,flowId:null===t||void 0===t?void 0:t._id,onDelete:()=>{d(t)},flowData:t,isSaveDisabled:j})})]}),(0,K.jsx)(ze.l,{header:"Confirmation",visible:N,style:{width:"25vw"},onHide:()=>C(!1),footer:(0,K.jsx)(ft,{onAccept:()=>{const{flowNodes:e}=y(),t=h.filter(e=>e.selected);return"Node Delete"==M.current?(Q(S.current),void C(!1)):"Edge Delete"===M.current?(O.current.length>0&&x(e=>e.filter(e=>!t.includes(e))),void C(!1)):(p([e[0]]),x([]),void C(!1))},onReject:()=>C(!1)}),children:(0,K.jsx)("p",{className:"mb-3 text-red",children:"Are you Sure that you want to proceed?"})})]})};var Ft=s(47014),Mt=s(46704),St=s(31739),It=s(4709);const Lt=()=>{};const Ot=function(e){let{flowId:t,flow:s}=e;const[,r]=(0,Qe.G)(),[i,l]=a.useState();return a.useEffect(()=>{if(t)return async function(){const e=await(0,o.Jc)(t);l(e)}(),()=>(0,It.oy)();l(null)},[t,s]),r?(0,K.jsx)(Ft.A,{botDetails:r,botDesign:r.botDesign,startupFlow:i,autoLaunch:!1,recipientId:(0,St.J)(),onReceiveChatResponse:Lt,onCallback:St.u}):(0,K.jsx)(Mt.A,{})};s(73907),s(63363);function Dt(){const[e,t]=a.useState(null),[s,r]=a.useState(),[i,l]=a.useState(""),n=a.useRef({flow:s});n.current.flow=s;const d=a.useCallback(()=>{(0,o.Ek)().then(e=>{var s;t(e),l((null===(s=e[0])||void 0===s?void 0:s.value)||"")})},[]);a.useEffect(d,[d]),a.useEffect(()=>{var e;i&&(null===(e=n.current.flow)||void 0===e?void 0:e._id)!==i&&(0,o.EO)(i).then(r)},[i]);const c=a.useCallback(async(e,t)=>{const s=await(0,o.EZ)(e.organizationId,e.botId,e,!0===t);l(s._id),r(s),d()},[d]),m=a.useCallback(async e=>{await(0,o.C7)(e.organizationId,e.botId,e._id)&&(t(null),l(""),d())},[d]);return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(Et,{flowData:s,flowList:e,onSave:c,onVersionSelected:l,onDelete:m}),(0,K.jsx)(Ot,{flowId:i,flow:s})]})}}}]);