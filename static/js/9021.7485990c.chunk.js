"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[9021],{8478:(t,n,o)=>{o.d(n,{Jt:()=>d,TF:()=>A,bE:()=>l,yJ:()=>u});var e=o(89379),c=o(80045),a=o(32026),i=o(44364);const s=["headers","noAuth"],r=["data"];async function d(t,n){return _("GET",t,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function l(t,n){return _("POST",t,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function u(t,n){return _("PUT",t,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function A(t,n){return _("DELETE",t,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function _(t,n,o){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{headers:i,noAuth:d}=a,l=(0,c.A)(a,s);const u="POST"===t||"PUT"===t||"DELETE"===t;n=function(t,n){if(!t)return t;const o=n&&Object.keys(n);if(null!==o&&void 0!==o&&o.length){const e=o.reduce((t,o)=>{let e=n[o];return null===e||void 0===e?t:(e="".concat(o,"=").concat(encodeURIComponent(e)),t?"".concat(t,"&").concat(e):e)},"");e&&(t="".concat(t).concat(t.includes("?")?"&":"?").concat(e))}if(t.startsWith("https://"))return t;return"".concat(g).concat(t)}(n,u?void 0:o);const A=o instanceof FormData;if(A||(o=o&&"object"===typeof o&&u?JSON.stringify(o):void 0),i||(i={}),A||(i["Content-Type"]="application/json"),i.Accept="application/json",!1!==d){const t=sessionStorage.getItem("token");t&&(i.Authorization="Bearer ".concat(t))}try{const a=await fetch(n,(0,e.A)((0,e.A)({},l),{},{headers:i,body:o,method:t})),s=await a.json();if(a.ok){const{data:t}=s,n=(0,c.A)(s,r);return delete n.status,t&&!Object.keys(n).length?t:s}throw s.message?new Error(s.message):s}catch(b){var _;throw console.error("Error calling API: ",b),null!==(_=b.message)&&void 0!==_&&_.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error(b.message)}}const g=(0,a.s8)(i.jn,"/")},26092:(t,n,o)=>{o.d(n,{A:()=>_});o(9950);var e=o(92728),c=o(63464),a=o(40033),i=o(28170),s=o(96319),r=o(14857),d=o(59254),l=o(25333),u=o(44414);const A=(0,d.Ay)(c.A)(t=>{let{theme:n}=t;return{"& .MuiDialogContent-root":{padding:n.spacing(2)},"& .MuiDialogActions-root":{padding:n.spacing(1)},zIndex:11010}});function _(t){const n=(0,r.A)(),{breakpoints:o}=n,{openPopUpDialog:c,setPopUpDialog:d,setFieldsValues:_,onClose:g=()=>(d(!1),null===_||void 0===_?void 0:_({})),title:b,width:f="70%"}=t;return(0,u.jsxs)(A,{TransitionComponent:e.A,"aria-labelledby":"customized-dialog-title",open:c,PaperProps:{sx:{width:{width:f},[o.down("sm")]:{width:"90%"}}},children:[(0,u.jsx)(a.A,{sx:{m:0,p:2},id:"customized-dialog-title",children:b}),(0,u.jsx)(l.A,{"aria-label":"close",onClick:g,sx:{position:"absolute",right:8,top:8},children:(0,u.jsx)(s.A,{})}),(0,u.jsx)(i.A,{dividers:!0,children:t.children})]})}},30334:(t,n,o)=>{o.d(n,{Ei:()=>u,KM:()=>r,MD:()=>d,pn:()=>A,qt:()=>l});var e=o(89379),c=o(8478),a=o(33340),i=o(77382),s=o(98415);async function r(t,n,o){const e=await c.bE("/bot/".concat(o,"/").concat(n,"/add-training-media"),t);(0,s.rv)(n,{trainingMedia:e.trainingMedia})}async function d(t){const{organizationId:n,selectedBotId:o}=a.nc.getState(),e=new FormData;e.append("file",t);try{const t=await c.bE("/bot/".concat(n,"/").concat(o,"/add-training-media"),e);(0,s.rv)(o,{trainingMedia:t.trainingMedia})}catch(i){throw new Error("File upload failed. Please try again.",i)}}async function l(t,n,o){const e=await c.bE("/bot/".concat(o,"/").concat(n,"/delete-training-media-document"),t);(0,s.rv)(n,{trainingMedia:e.trainingDocuments})}async function u(t,n){const o=await c.bE("/bot/".concat(n,"/").concat(t,"/knowledge-base/train"));return a.nc.setState(n=>{const o=(0,e.A)({},n.kbDocs||{});return delete o[t],{kbDocs:o}}),(0,i.bZ)().catch(t=>console.error("Error fetching Knowledge base content:",t)),o}async function A(t,n,o){const e=await c.bE("/bot/".concat(n,"/").concat(o,"/add-bot-tax-details"),t),{_id:a,botDetailsForVerification:i}=e;return(0,s.rv)(a,{botDetailsForVerification:i}),i}},32026:(t,n,o)=>{o.d(n,{G6:()=>r,Ke:()=>_,OX:()=>l,PE:()=>A,TZ:()=>g,Yq:()=>s,do:()=>u,qW:()=>d,s8:()=>a,wE:()=>b});var e=o(89379),c=o(44364);function a(t,n){return t.replace(new RegExp("".concat(i(n),"+$")),"")}function i(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function s(t){const n=new Date(t),o=n.getDate(),e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n.getMonth()],c=n.getFullYear();return"".concat(e," ").concat(o,", ").concat(c)}function r(t,n,o){if(!n&&!t)return o;t=t||{};const c=Array.isArray(t)?[...t]:(0,e.A)({},t);if(n.includes(".")){const e=n.indexOf("."),a=n.substring(0,e),i=n.substring(e+1);c[a]=r(t[a],i,o)}else c[n]=o;return c}function d(t,n){return btoa("".concat(t,"_").concat(n,"_whatsapp_int"))}function l(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const n="abcdefghijklmnopqrstuvwxyz0123456789";let o="";for(let e=0;e<t;e++)o+=n.charAt(Math.floor(36*Math.random()));return o}function u(t,n,o){if(!n&&!t)return o;t=t||{};const c=Array.isArray(t)?[...t]:(0,e.A)({},t);if(n.includes(".")){const e=n.indexOf("."),a=n.substring(0,e),i=n.substring(e+1);c[a]=u(t[a],i,o)}else c[n]=o;return c}function A(t,n){const o=new Blob([t],{type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/csv"}),e=document.createElement("a");e.href=URL.createObjectURL(o),e.download=n,document.body.appendChild(e),e.click(),document.body.removeChild(e)}function _(t,n){return!n||n.startsWith("http")?n:(n.startsWith("/")&&(n=n.substring(1)),"".concat(c.J,"/").concat(t,"/").concat(n))}function g(t){let n=document.querySelector("link[rel~='icon']");n||(n=document.createElement("link"),n.rel="icon",document.getElementsByTagName("head")[0].appendChild(n)),null!==t&&void 0!==t&&t.domain?null!==t&&void 0!==t&&t.favicon&&(n.href=_(null===t||void 0===t?void 0:t.domain,null===t||void 0===t?void 0:t.favicon)):n.href="/favicon.png"}function b(t){null!==t&&void 0!==t&&t.domain?null!==t&&void 0!==t&&t.displayName&&(document.title=null===t||void 0===t?void 0:t.displayName):document.title="LivServ"}},32829:(t,n,o)=>{o.d(n,{A:()=>a});var e=o(79875),c=o(44414);function a(t){let{children:n,type:o}=t;return(0,c.jsx)(e.P.div,{whileHover:{scale:1},whileTap:{scale:.9},children:n})}a.defaultProps={type:"scale"}},44364:(t,n,o)=>{o.d(n,{DX:()=>d,E1:()=>u,J:()=>r,Og:()=>a,Rc:()=>l,jn:()=>e,mB:()=>s,pA:()=>i,pR:()=>c});const e="https://devbackend.livhousing.com",c="c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_WEB_SOCKET_AUTH_KEY:"wFSMmt7sfsbNJLabQvVdKNrjga6diuvwuLaD3to2RbQ=",REACT_APP_RVM_BACKEND_URL:"https://devbackend.livhousing.com/",REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com",REACT_APP_RVM_WEB_SOCKET_URL:"wss://devbackend.livhousing.com/voice/ws"}.TRAINING_MEDIA_MAXSIZE,i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_WEB_SOCKET_AUTH_KEY:"wFSMmt7sfsbNJLabQvVdKNrjga6diuvwuLaD3to2RbQ=",REACT_APP_RVM_BACKEND_URL:"https://devbackend.livhousing.com/",REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com",REACT_APP_RVM_WEB_SOCKET_URL:"wss://devbackend.livhousing.com/voice/ws"}.CONVERSATION_MEDIA_MAXSIZE,s="AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",r="https://livserv-organizations.s3.ap-south-1.amazonaws.com",d={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_WEB_SOCKET_AUTH_KEY:"wFSMmt7sfsbNJLabQvVdKNrjga6diuvwuLaD3to2RbQ=",REACT_APP_RVM_BACKEND_URL:"https://devbackend.livhousing.com/",REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com",REACT_APP_RVM_WEB_SOCKET_URL:"wss://devbackend.livhousing.com/voice/ws"}.REACT_APP_NGROK_BACKEND_URL||"https://devbackend.livhousing.com",l="https://devbackend.livhousing.com/",u="wss://devbackend.livhousing.com/voice/ws"},77382:(t,n,o)=>{o.d(n,{CA:()=>_,L3:()=>A,Mk:()=>d,bZ:()=>l,gJ:()=>u});var e=o(89379),c=o(8478),a=o(33340),i=o(32026),s=o(59051),r=o.n(s);async function d(t){const{organizationId:n,selectedBotId:o}=a.nc.getState(),i=await c.bE("/bot/".concat(n,"/").concat(o,"/knowledge-base"),t);return a.nc.setState(n=>{const c=(0,e.A)({},n.kbDocs||{}),a=c[o];if(!a)return{};if(c[o]=[...a],t._id){const t=c[o].findIndex(t=>t._id===i._id);t>=0?c[o][t]=i:c[o].push(i)}else c[o].push(i);return{kbDocs:c}}),i}async function l(t){const{organizationId:n,selectedBotId:o,kbDocs:i}=a.nc.getState();if(t&&Array.isArray(null===i||void 0===i?void 0:i[o]))return;const s=await c.Jt("/bot/".concat(n,"/").concat(o,"/knowledge-base/list"));a.nc.setState(t=>({kbDocs:(0,e.A)((0,e.A)({},t.kbDocs||{}),{},{[o]:s})}))}async function u(){var t;const{organizationId:n,selectedBotId:o,botsMap:e}=a.nc.getState(),s="/bot/".concat(n,"/").concat(o,"/knowledge-base/download"),d=await c.Jt(s),l=(null===(t=e[o])||void 0===t?void 0:t.botName)||"KBDocs";(0,i.PE)(d,l+"_"+r()().format("YYYYMMDD")+".csv")}async function A(t){if(null===t||void 0===t||!t.length)return[];const{organizationId:n,selectedBotId:o}=a.nc.getState();return await c.Jt("/bot/".concat(n,"/").concat(o,"/knowledge-base/list?").concat(t.map(t=>"docIds=".concat(t)).join("&")))}async function _(t){const{organizationId:n,selectedBotId:o}=a.nc.getState();await c.TF("/bot/".concat(n,"/").concat(o,"/knowledge-base/").concat(t)),a.nc.setState(n=>{var c;const a=(0,e.A)({},n.kbDocs||{});return a[o]=null===(c=a[o])||void 0===c?void 0:c.filter(n=>n._id!==t),{kbDocs:a}})}},92728:(t,n,o)=>{o.d(n,{A:()=>s});var e=o(89379),c=o(9950),a=o(48205),i=o(44414);const s=c.forwardRef(function(t,n){return(0,i.jsx)(a.A,(0,e.A)({direction:"up",ref:n},t))})},93383:(t,n,o)=>{o.d(n,{A:()=>l});var e=o(89379),c=o(80045),a=o(9950),i=o(10226),s=o(46639),r=o(44414);const d=["onClick","disabled","isLoading","children"];const l=function(t){let{onClick:n,disabled:o,isLoading:l,children:u}=t,A=(0,c.A)(t,d);const[_,g]=a.useState(l);return(0,r.jsxs)(i.A,(0,e.A)((0,e.A)({onClick:t=>{if(!n)return;const o=n(t);"function"===typeof(null===o||void 0===o?void 0:o.finally)&&(g(!0),o.finally(()=>g(!1)))},disabled:_||l||o},A),{},{children:[(_||l)&&(0,r.jsx)(s.A,{size:16,color:"primary",style:{marginRight:"10px"}}),u]}))}},98415:(t,n,o)=>{o.d(n,{Ci:()=>A,I4:()=>u,TF:()=>d,gI:()=>s,gR:()=>g,jo:()=>l,rv:()=>b,so:()=>_,yo:()=>r});var e=o(89379),c=o(8478),a=o(33340),i=o(32026);async function s(t){const{organization:{websiteUrl:n,_id:o}}=a.nc.getState(),e={organizationId:o,websiteUrl:n,botName:t,botDesign:{visitorMessageLogo:{name:"",url:""},botMessageLogo:{name:"",url:""},botChatButton:{name:"",url:""},botLogo:{name:"",url:""},backgroundColor:"#e7a654",textColor:"#ffffff",dimensions:{heightInPixel:"500px",heightInPercent:"70%",widthInPixel:"350px",widthInPercent:"25%"},botLogoDimensions:{heightInPixel:"30px",heightInPercent:"100%",widthInPixel:"30px",widthInPercent:"100%"}}};f(await c.bE("/bot/".concat(o),e),!0)}async function r(t,n,o){const{organizationId:e}=a.nc.getState();if(!e||!t)throw new Error("Bot details not found");const i=await c.yJ("/bot/".concat(e,"/").concat(t),n);return f(i,o),i}async function d(t){const{organizationId:n,selectedBotId:o}=a.nc.getState();if(!n||!t)throw new Error("Bot details not found");const{deleted:i}=await c.TF("/bot/".concat(n,"/").concat(t));if(i){let{botsMap:t,botsList:n}=a.nc.getState();t=(0,e.A)({},t),n=[...n],delete t[i];const c=n.findIndex(t=>t._id===i);c>=0&&n.splice(c,1);const r={botsMap:t,botsList:n};var s;if(o===i)r.selectedBotId=(null===(s=n[0])||void 0===s?void 0:s._id)||null;a.nc.setState(r)}return!!i}function l(t,n){let{botDesign:o}=a.nc.getState();return o=(0,e.A)((0,e.A)({},o),n),r(t,{botDesign:o})}async function u(t,n){const{organizationId:o,selectedBotId:e}=a.nc.getState(),i=new FormData;i.append("file",n);const s=await c.bE("/bot/".concat(o,"/").concat(e,"/update-logo/").concat(t),i);return b(e,s),s["botDesign.".concat(t)]}async function A(t){const{organizationId:n,selectedBotId:o}=a.nc.getState(),e=await c.TF("/bot/".concat(n,"/").concat(o,"/update-logo/").concat(t));return b(o,e),e["botDesign.".concat(t)]}function _(t,n){return r(t,{botName:n})}function g(t,n){let{botSettings:o={}}=a.nc.getState();return o=(0,e.A)((0,e.A)({},o),n),r(t,{botSettings:o})}function b(t,n){const{botsMap:o}=a.nc.getState(),e=o[t];if(!e)return;f(Object.keys(n).reduce((t,o)=>(0,i.G6)(t,o,n[o]),e))}function f(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const o=t._id;let{botsMap:c,botsList:i}=a.nc.getState();c=(0,e.A)((0,e.A)({},c),{},{[o]:t}),i=[...i];const s=i.findIndex(t=>t._id===o);s>=0?i[s]=t:i.push(t);const r={botsMap:c,botsList:i};n&&(r.selectedBotId=o),a.nc.setState(r)}}}]);