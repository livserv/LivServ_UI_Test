"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[8405],{8478(e,n,t){t.d(n,{Jt:()=>d,TF:()=>h,bE:()=>c,yJ:()=>u});var a=t(89379),o=t(80045),r=t(32026),l=t(44364);const i=["headers","noAuth"],s=["data"];async function d(e,n){return m("GET",e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function c(e,n){return m("POST",e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function u(e,n){return m("PUT",e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function h(e,n){return m("DELETE",e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function m(e,n,t){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{headers:l,noAuth:d}=r,c=(0,o.A)(r,i);const u="POST"===e||"PUT"===e||"DELETE"===e;n=function(e,n){if(!e)return e;const t=n&&Object.keys(n);if(null!==t&&void 0!==t&&t.length){const a=t.reduce((e,t)=>{let a=n[t];return null===a||void 0===a?e:(a="".concat(t,"=").concat(encodeURIComponent(a)),e?"".concat(e,"&").concat(a):a)},"");a&&(e="".concat(e).concat(e.includes("?")?"&":"?").concat(a))}if(e.startsWith("https://"))return e;return"".concat(x).concat(e)}(n,u?void 0:t);const h=t instanceof FormData;if(h||(t=t&&"object"===typeof t&&u?JSON.stringify(t):void 0),l||(l={}),h||(l["Content-Type"]="application/json"),l.Accept="application/json",!1!==d){const e=sessionStorage.getItem("token");e&&(l.Authorization="Bearer ".concat(e))}try{const r=await fetch(n,(0,a.A)((0,a.A)({},c),{},{headers:l,body:t,method:e}));if("blob"===c.responseType){const e=await r.blob(),n=function(e,n){var t;const a=e.headers.get("content-disposition");return(null===a||void 0===a||null===(t=a.match(/filename="?([^"]+)"?/))||void 0===t?void 0:t[1])||n||"download.xlsx"}(r,c.fileName);return void function(e,n){const t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=n,a.click(),URL.revokeObjectURL(t)}(e,n)}const i=await r.json();if(r.ok){const{data:e}=i,n=(0,o.A)(i,s);return delete n.status,e&&!Object.keys(n).length?e:i}throw i.message?new Error(i.message):i}catch(A){var m;throw console.error("Error calling API: ",A),null!==(m=A.message)&&void 0!==m&&m.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error(A.message)}}const x=(0,r.s8)(l.jn,"/")},32026(e,n,t){t.d(n,{G6:()=>s,Ke:()=>m,OX:()=>c,PE:()=>h,TZ:()=>x,Yq:()=>i,do:()=>u,qW:()=>d,s8:()=>r,wE:()=>A});var a=t(89379),o=t(44364);function r(e,n){return e.replace(new RegExp("".concat(l(n),"+$")),"")}function l(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function i(e){const n=new Date(e),t=n.getDate(),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n.getMonth()],o=n.getFullYear();return"".concat(a," ").concat(t,", ").concat(o)}function s(e,n,t){if(!n&&!e)return t;e=e||{};const o=Array.isArray(e)?[...e]:(0,a.A)({},e);if(n.includes(".")){const a=n.indexOf("."),r=n.substring(0,a),l=n.substring(a+1);o[r]=s(e[r],l,t)}else o[n]=t;return o}function d(e,n){return btoa("".concat(e,"_").concat(n,"_whatsapp_int"))}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const n="abcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let a=0;a<e;a++)t+=n.charAt(Math.floor(36*Math.random()));return t}function u(e,n,t){if(!n&&!e)return t;e=e||{};const o=Array.isArray(e)?[...e]:(0,a.A)({},e);if(n.includes(".")){const a=n.indexOf("."),r=n.substring(0,a),l=n.substring(a+1);o[r]=u(e[r],l,t)}else o[n]=t;return o}function h(e,n){const t=new Blob([e],{type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/csv"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download=n,document.body.appendChild(a),a.click(),document.body.removeChild(a)}function m(e,n){return!n||n.startsWith("http")?n:(n.startsWith("/")&&(n=n.substring(1)),"".concat(o.J,"/").concat(e,"/").concat(n))}function x(e){let n=document.querySelector("link[rel~='icon']");n||(n=document.createElement("link"),n.rel="icon",document.getElementsByTagName("head")[0].appendChild(n)),null!==e&&void 0!==e&&e.domain?null!==e&&void 0!==e&&e.favicon&&(n.href=m(null===e||void 0===e?void 0:e.domain,null===e||void 0===e?void 0:e.favicon)):n.href="/favicon.png"}function A(e){null!==e&&void 0!==e&&e.domain?null!==e&&void 0!==e&&e.displayName&&(document.title=null===e||void 0===e?void 0:e.displayName):document.title="LivServ"}},32829(e,n,t){t.d(n,{A:()=>r});var a=t(79875),o=t(44414);function r(e){let{children:n,type:t}=e;return(0,o.jsx)(a.P.div,{whileHover:{scale:1},whileTap:{scale:.9},children:n})}r.defaultProps={type:"scale"}},44364(e,n,t){t.d(n,{DX:()=>d,J:()=>s,Og:()=>r,Rc:()=>c,jn:()=>a,mB:()=>i,pA:()=>l,pR:()=>o});const a="https://devbackend.livhousing.com",o="c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_WEB_SOCKET_AUTH_KEY:"wFSMmt7sfsbNJLabQvVdKNrjga6diuvwuLaD3to2RbQ=",REACT_APP_RVM_BACKEND_URL:"https://devbackend.livhousing.com/",REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com",REACT_APP_RVM_WEB_SOCKET_URL:"wss://devbackend.livhousing.com/voice/ws"}.TRAINING_MEDIA_MAXSIZE,l={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_WEB_SOCKET_AUTH_KEY:"wFSMmt7sfsbNJLabQvVdKNrjga6diuvwuLaD3to2RbQ=",REACT_APP_RVM_BACKEND_URL:"https://devbackend.livhousing.com/",REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com",REACT_APP_RVM_WEB_SOCKET_URL:"wss://devbackend.livhousing.com/voice/ws"}.CONVERSATION_MEDIA_MAXSIZE,i="AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",s="https://livserv-organizations.s3.ap-south-1.amazonaws.com",d={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_WEB_SOCKET_AUTH_KEY:"wFSMmt7sfsbNJLabQvVdKNrjga6diuvwuLaD3to2RbQ=",REACT_APP_RVM_BACKEND_URL:"https://devbackend.livhousing.com/",REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com",REACT_APP_RVM_WEB_SOCKET_URL:"wss://devbackend.livhousing.com/voice/ws"}.REACT_APP_NGROK_BACKEND_URL||"https://devbackend.livhousing.com",c="https://devbackend.livhousing.com/"},49823(e,n,t){t.d(n,{A:()=>c});var a=t(89379),o=t(80045),r=t(9950),l=t(70006),i=t(23266),s=t(44414);const d=["value","onChange"];const c=function(e){let{value:n,onChange:t}=e,c=(0,o.A)(e,d);const u=r.useCallback(e=>t(c.name,"yes"===e.target.value),[c.name,t]);return(0,s.jsxs)(l.A,(0,a.A)((0,a.A)({},c),{},{value:n?"yes":"no",defaultValue:n?"yes":"no",onChange:u,children:[(0,s.jsx)(i.A,{value:"no",children:"No"}),(0,s.jsx)(i.A,{value:"yes",children:"Yes"})]}))}},51637(e,n,t){t.d(n,{A:()=>x});var a=t(89379),o=t(80045),r=t(9950),l=t(14857),i=t(48089),s=t(45180),d=t(82053),c=t(50704),u=t(44414);const h=["border","boxShadow","children","content","contentSX","darkTitle","elevation","secondary","shadow","sx","title"],m={p:2.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},x=(0,r.forwardRef)((e,n)=>{let{border:t=!0,boxShadow:r,children:x,content:A=!0,contentSX:p={},darkTitle:g,elevation:v,secondary:j,shadow:y,sx:f={},title:C}=e,b=(0,o.A)(e,h);const P=(0,l.A)();return r="dark"===P.palette.mode?r||!0:r,(0,u.jsxs)(i.A,(0,a.A)((0,a.A)({elevation:v||0,ref:n},b),{},{sx:(0,a.A)({border:t?"1px solid":"none",borderRadius:2,borderColor:"dark"===P.palette.mode?P.palette.divider:P.palette.grey.A800,boxShadow:!r||t&&"dark"!==P.palette.mode?"inherit":y||P.customShadows.z1,":hover":{boxShadow:r?y||P.customShadows.z1:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:P.typography.fontFamily,fontSize:"0.75rem"}},f),children:[!g&&C&&(0,u.jsx)(s.A,{sx:m,titleTypographyProps:{variant:"subtitle1"},title:C,action:j}),g&&C&&(0,u.jsx)(s.A,{sx:m,title:(0,u.jsx)(d.A,{variant:"h3",children:C}),action:j}),A&&(0,u.jsx)(c.A,{sx:p,children:x}),!A&&x]}))})},70855(e,n,t){t.d(n,{G:()=>o});var a=t(33340);function o(e){const n=(0,a.nc)(e=>e.selectedBotId),t=(0,a.nc)(t=>t.botsMap[e||n]);return[e||n,t]}},86081(e,n,t){t.r(n),t.d(n,{default:()=>V});var a=t(80045),o=t(89379),r=t(9950),l=t(78317),i=t(60899),s=t(74745),d=t(82053),c=t(81616),u=t(3788),h=t(23114),m=t(16497),x=t(85815),A=t(93038),p=t(24516),g=t(2660),v=t(31446),j=t(61467),y=t(51637),f=t(32829),C=t(70855),b=t(98415),P=t(93383),w=t(97601),E=t(90771),_=t(33340),S=t(10226),T=t(47813),R=t(44414);const I=function(e){var n,t,a,o,r,l,d,h;let{tagManagerIds:m,index:x,handleBlur:A,handleChange:v,errors:j,touched:y,remove:f}=e;const C="urlBasedGoogleTagManagerIds.".concat(x),b=(null===y||void 0===y||null===(n=y.urlBasedGoogleTagManagerIds)||void 0===n||null===(t=n[x])||void 0===t?void 0:t.url)&&(null===j||void 0===j||null===(a=j.urlBasedGoogleTagManagerIds)||void 0===a||null===(o=a[x])||void 0===o?void 0:o.url),P=(null===y||void 0===y||null===(r=y.urlBasedGoogleTagManagerIds)||void 0===r||null===(l=r[x])||void 0===l?void 0:l.tagManagerId)&&(null===j||void 0===j||null===(d=j.urlBasedGoogleTagManagerIds)||void 0===d||null===(h=d[x])||void 0===h?void 0:h.tagManagerId);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(i.Ay,{container:!0,spacing:1,children:[(0,R.jsx)(i.Ay,{item:!0,xs:12,md:7,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{htmlFor:"".concat(C,".url"),children:"Page Url"}),(0,R.jsx)(g.A,{id:"".concat(C,".url"),name:"".concat(C,".url"),type:"text",value:m.url,autoComplete:"off",onBlur:A,onChange:v,placeholder:"www.url.com",fullWidth:!0,error:Boolean(b)}),b&&(0,R.jsx)(p.A,{error:!0,id:"helper-text-".concat(C,".url"),children:j.urlBasedGoogleTagManagerIds[x].url})]})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,md:3,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{htmlFor:"".concat(C,".tagManagerId"),children:"Tag Manager Id"}),(0,R.jsx)(g.A,{id:"".concat(C,".tagManagerId"),name:"".concat(C,".tagManagerId"),type:"text",value:m.tagManagerId,autoComplete:"off",onBlur:A,onChange:v,placeholder:"GTM-XXXXXX",fullWidth:!0,error:Boolean(P)}),P&&(0,R.jsx)(p.A,{error:!0,id:"helper-text-".concat(C,".tagManagerId"),children:j.urlBasedGoogleTagManagerIds[x].tagManagerId})]})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,md:1,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{children:"Delete"}),(0,R.jsx)(T.A,{sx:{cursor:"pointer",color:"#ee2a2a"},onClick:()=>f(x)})]})})]}),(0,R.jsx)(s.A,{sx:{mt:2,mb:2}})]})};const M=function(){const{values:e,errors:n,touched:t,handleBlur:a,handleChange:r,setFieldValue:l,isSubmitting:c}=(0,j.j7)(),u=e.urlBasedGoogleTagManagerIds||[];return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(i.Ay,{item:!0,xs:12,children:(0,R.jsx)(s.A,{children:(0,R.jsx)(d.A,{variant:"subtitle1",children:"Url based Tag Manager Id"})})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,children:(0,R.jsx)(j.ED,{name:"urlBasedGoogleTagManagerIds",children:e=>{let{push:s}=e;return(0,R.jsxs)(R.Fragment,{children:[u.map((e,i)=>(0,R.jsx)(I,{tagManagerIds:e,index:i,handleBlur:a,handleChange:r,errors:n,touched:t,remove:e=>{const n=u.filter((n,t)=>t!==e);l("urlBasedGoogleTagManagerIds",n.map((e,n)=>(0,o.A)((0,o.A)({},e),{},{itemNo:n+1})))}},i)),(0,R.jsx)(i.Ay,{container:!0,justifyContent:"flex-end",children:(0,R.jsx)(i.Ay,{item:!0,children:(0,R.jsx)(S.A,{sx:{ml:2},variant:"contained",size:"large",onClick:()=>s({url:"",tagManagerId:""}),disabled:c,children:"Add Tag Manager Id"})})})]})}})})]})};t(13953);var L=t(49823);function F(e){var n,t,a,o,r,l,s,d;let{leadProps:h,index:m,handleBlur:x,handleChange:A,errors:v,touched:j,remove:y}=e;const f=(null===j||void 0===j||null===(n=j.chatReportPropList)||void 0===n||null===(t=n[m])||void 0===t?void 0:t.label)&&(null===v||void 0===v||null===(a=v.chatReportPropList)||void 0===a||null===(o=a[m])||void 0===o?void 0:o.label),C=(null===j||void 0===j||null===(r=j.chatReportPropList)||void 0===r||null===(l=r[m])||void 0===l?void 0:l.prop)&&(null===v||void 0===v||null===(s=v.chatReportPropList)||void 0===s||null===(d=s[m])||void 0===d?void 0:d.prop);return(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(i.Ay,{container:!0,spacing:1,children:[(0,R.jsx)(i.Ay,{item:!0,xs:12,md:3,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{htmlFor:"chatReportPropList.".concat(m,".label"),children:"Property Label"}),(0,R.jsx)(g.A,{id:"chatReportPropList.".concat(m,".label"),name:"chatReportPropList.".concat(m,".label"),type:"text",value:h.label,autoComplete:"off",onBlur:x,onChange:A,placeholder:"Property Label",fullWidth:!0,error:Boolean(f)}),f&&(0,R.jsx)(p.A,{error:!0,id:"helper-text-chatReportPropList.".concat(m,".label"),children:v.chatReportPropList[m].label})]})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,md:3,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{htmlFor:"chatReportPropList.".concat(m,".prop"),children:"Property Name"}),(0,R.jsx)(g.A,{id:"chatReportPropList.".concat(m,".prop"),name:"chatReportPropList.".concat(m,".prop"),type:"text",value:h.prop,autoComplete:"off",onBlur:x,onChange:A,placeholder:"Property Name",fullWidth:!0,error:Boolean(C)}),C&&(0,R.jsx)(p.A,{error:!0,id:"helper-text-chatReportPropList.".concat(m,".prop}"),children:v.chatReportPropList[m].prop})]})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,md:1,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{children:"\xa0"}),(0,R.jsx)(T.A,{sx:{cursor:"pointer",color:"#ee2a2a"},onClick:()=>y(m)})]})})]})})}const D=function(e){let{values:n,errors:t,touched:a,handleBlur:r,handleChange:l,setFieldValue:c,isSubmitting:u}=e;const h=n.chatReportPropList||[];return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(i.Ay,{item:!0,xs:12,children:(0,R.jsx)(s.A,{children:(0,R.jsx)(d.A,{variant:"subtitle1",children:"Add columns to Consolidated Leads Reports Excel sheet"})})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,children:(0,R.jsx)(j.ED,{name:"chatReportPropList",children:e=>{let{push:n}=e;return(0,R.jsxs)(R.Fragment,{children:[0===h.length&&(0,R.jsx)(i.Ay,{item:!0,xs:12,children:(0,R.jsx)(s.A,{children:(0,R.jsx)(d.A,{variant:"subtitle1",children:"No chat property columns have been added to the Excel sheet yet."})})}),h.map((e,n)=>(0,R.jsx)(F,{leadProps:e,index:n,handleBlur:r,handleChange:l,errors:t,touched:a,remove:e=>{const n=h.filter((n,t)=>t!==e);c("chatReportPropList",n.map((e,n)=>(0,o.A)((0,o.A)({},e),{},{itemNo:n+1})))}},n)),(0,R.jsx)(i.Ay,{container:!0,justifyContent:"flex-end",children:(0,R.jsx)(i.Ay,{item:!0,children:(0,R.jsx)(S.A,{sx:{ml:2},variant:"contained",size:"large",onClick:()=>n({label:"",prop:""}),disabled:u,title:"Add Excel sheet columns",children:"+"})})})]})}})})]})};var B=t(29714);const K=["id","name","value","onChange"],k={margin:{xs:2.5,md:3},"& > *":{flexGrow:1,flexBasis:"50%"}},N={leadCaptureType:"flow",leadCaptureFormMode:"count",showFormAfterChats:3,defaultCountryCode:{countryId:"in",dialCode:"+91"},isWhatsAppEnabled:!1},O=B.Ik().shape({urlBasedGoogleTagManagerIds:B.YO().of(B.Ik().shape({url:B.Yj().trim().required("URL is required"),tagManagerId:B.Yj().trim().required("Tag Manager ID is required").matches(/^GTM-[A-Z0-9]+$/,"Format must be GTM-XXXXXX")})),chatReportPropList:B.YO().of(B.Ik().shape({label:B.Yj().trim().required("Label is required"),prop:B.Yj().trim().required("Prop Name is required")}))});const V=function(){const e=(0,_.nc)(e=>e.isSuperUser),[n,t]=(0,C.G)();if(!t)return null;const{botSettings:a=N}=t;return(0,R.jsx)(y.A,{sx:k,content:!1,border:!1,boxShadow:!0,children:(0,R.jsx)(l.A,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:(0,R.jsx)(j.l1,{initialValues:a,onSubmit:async(e,t)=>{let{setErrors:a,setStatus:o,setSubmitting:r}=t;try{await(0,b.gR)(n,e),o({success:!1}),r(!1),(0,w.i)(!0,"Settings saved successfully!","success")}catch(l){console.error(l),(0,w.i)(!0,"Unable to save settings. Please try again later.","error"),o({success:!1}),a({submit:l.message}),r(!1)}},validationSchema:O,enableReinitialize:!0,children:n=>(0,R.jsx)("form",{noValidate:!0,onSubmit:n.handleSubmit,children:(0,R.jsxs)(i.Ay,{container:!0,spacing:3,children:[(0,R.jsx)(G,(0,o.A)({},n)),(0,R.jsx)(W,(0,o.A)({},n)),(0,R.jsx)(X,(0,o.A)({},n)),e&&(0,R.jsx)(D,(0,o.A)({},n)),e&&(0,R.jsx)(Y,(0,o.A)({},n)),(0,R.jsx)(z,(0,o.A)({},n)),(0,R.jsx)(M,(0,o.A)({},n)),(0,R.jsx)(J,(0,o.A)({},n))]})})})})})};function U(e){"Enter"===e.key&&e.preventDefault()}function G(e){var n,t,a,o;let{values:l,touched:g,errors:v,handleBlur:j,handleChange:y,setFieldValue:f}=e;const C="form"===l.leadCaptureType,b="form"!==l.leadCaptureType||"keyword"===l.leadCaptureFormMode,[P,w]=r.useState((null===(n=l.defaultCountryCode)||void 0===n?void 0:n.countryId)||"in"),[_,S]=r.useState((null===(t=l.defaultCountryCode)||void 0===t?void 0:t.dialCode)||"+91");return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(i.Ay,{item:!0,xs:12,children:(0,R.jsx)(s.A,{children:(0,R.jsx)(d.A,{variant:"subtitle1",children:"Lead Capture Settings"})})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{htmlFor:"leadCaptureType",children:"Input Type"}),(0,R.jsxs)(h.A,{value:l.leadCaptureType,defaultValue:"flow",name:"leadCaptureType",onChange:y,children:[(0,R.jsx)(m.A,{value:"flow",control:(0,R.jsx)(x.A,{}),label:"Flow"}),(0,R.jsx)(m.A,{value:"form",control:(0,R.jsx)(x.A,{}),label:"Form"})]})]})}),C&&(0,R.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{htmlFor:"leadCaptureFormMode",children:"When you want the form to be displayed?"}),(0,R.jsxs)(h.A,{value:l.leadCaptureFormMode,defaultValue:"count",id:"leadCaptureFormMode",name:"leadCaptureFormMode",onChange:y,children:[(0,R.jsx)(m.A,{value:"keyword",control:(0,R.jsx)(x.A,{}),label:"Show form when the keyword matches"}),(0,R.jsx)(m.A,{value:"count",control:(0,R.jsx)(x.A,{}),label:(0,R.jsxs)(R.Fragment,{children:["Show form after conversations:"," ",(0,R.jsx)("input",{value:null===(a=l.showFormAfterChats)||void 0===a?void 0:a.toString(),maxLength:2,style:{width:"50px"},disabled:"form"!==l.leadCaptureType||l.leadCaptureFormMode&&"count"!==l.leadCaptureFormMode,onChange:e=>f("showFormAfterChats",H(e.target.value,l.showFormAfterChats)),onKeyDown:U})]})})]})]})}),!C&&(0,R.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{htmlFor:"leadCaptureFlowMandatory",children:"Can user proceed without providing contact details?"}),(0,R.jsx)(m.A,{value:"keyword",control:(0,R.jsx)(A.A,{checked:l.leadCaptureFlowMandatory,name:"leadCaptureFlowMandatory",onChange:y}),label:"Make the input mandatory"}),(0,R.jsx)(m.A,{value:"keyword",control:(0,R.jsx)(A.A,{checked:l.isWhatsAppEnabled,name:"isWhatsAppEnabled",onChange:y}),label:"Is WhatsApp Enabled"})]})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{id:"validateContactForEachChat",children:"Validate Contact For Each Chat"}),(0,R.jsx)(L.A,{name:"validateContactForEachChat",value:l.validateContactForEachChat,defaultValue:!1,onChange:f})]})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{id:"deactivateInvalidOptionErrorMessage",children:"Deactivate Invalid Option Error Message"}),(0,R.jsx)(L.A,{name:"deactivateInvalidOptionErrorMessage",value:l.deactivateInvalidOptionErrorMessage,defaultValue:!1,onChange:f})]})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,md:12,children:"Default Phone number country code in contact form"}),(0,R.jsxs)(i.Ay,{item:!0,xs:12,md:3,sx:{position:"relative",display:"flex",alignItems:"center"},children:[(0,R.jsx)(E.cf,{selectedCountry:P,onSelect:e=>{let{iso2:n,dialCode:t}=e;w(n),f("defaultCountryCode",{countryId:n,dialCode:"+"+t}),S("+"+t)},onBlur:j,country:P,name:"defaultCountryCode",id:"defaultCountryCode"}),(0,R.jsxs)("span",{style:{marginLeft:"8px"},children:[" ",_]})]}),(0,R.jsxs)(i.Ay,{item:!0,xs:12,md:12,children:["Number of visitor messages send to GPT for answer"," ",(0,R.jsx)("input",{value:(null===(o=l.maxChatMessagesToSentToGPT)||void 0===o?void 0:o.toString())||17,maxLength:2,style:{width:"50px"},onChange:e=>f("maxChatMessagesToSentToGPT",H(e.target.value,l.maxChatMessagesToSentToGPT)),onKeyDown:U})]}),b&&(0,R.jsx)(i.Ay,{item:!0,xs:12,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{htmlFor:"phoneNumberKeywords",children:"Keywords for Phone Number Collection *"}),(0,R.jsx)(q,{name:"phoneNumberKeywords",value:l.phoneNumberKeywords||[],error:Boolean(g.phoneNumberKeywords&&v.phoneNumberKeywords),onBlur:j,onChange:f,placeholder:"Type keyword and press enter to add more...",inputProps:{maxLength:25}}),g.phoneNumberKeywords&&v.phoneNumberKeywords&&(0,R.jsx)(p.A,{error:!0,id:"helper-text-email-keywords",children:v.phoneNumberKeywords})]})}),b&&(0,R.jsx)(i.Ay,{item:!0,xs:12,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{htmlFor:"emailKeywords",children:"Keywords for Email Address Collection *"}),(0,R.jsx)(q,{name:"emailKeywords",value:l.emailKeywords||[],error:Boolean(g.emailKeywords&&v.emailKeywords),onBlur:j,onChange:f,placeholder:"Type keyword and press enter to add more...",inputProps:{maxLength:25}}),g.emailKeywords&&v.emailKeywords&&(0,R.jsx)(p.A,{error:!0,id:"helper-text-email-keywords",children:v.emailKeywords})]})})]})}function W(e){let{values:n,handleChange:t}=e;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(i.Ay,{item:!0,xs:12,children:(0,R.jsx)(s.A,{children:(0,R.jsx)(d.A,{variant:"subtitle1",children:"Bot Industry and Role settings"})})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,md:4,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{htmlFor:"industry",children:"Industry"}),(0,R.jsx)(g.A,{id:"industry",name:"industry",value:n.industry,onChange:t,"aria-label":"industry",onKeyDown:U})]})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,md:4,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{htmlFor:"botRole",children:"Bot Role"}),(0,R.jsx)(g.A,{id:"botRole",name:"botRole",defaultValue:n.botRole,onChange:t,"aria-label":"bot role",onKeyDown:U})]})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,md:4,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{htmlFor:"organizationName",children:"Organization Name"}),(0,R.jsx)(g.A,{id:"organizationName",name:"organizationName",defaultValue:n.organizationName,onChange:t,"aria-label":"organization name",onKeyDown:U})]})})]})}function z(e){let{values:n,handleChange:t}=e;const a=(0,_.nc)(e=>e.isSuperUser);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(i.Ay,{item:!0,xs:12,children:(0,R.jsx)(s.A,{children:(0,R.jsx)(d.A,{variant:"subtitle1",children:"Allow / Block chat window"})})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{htmlFor:"allowedIP",children:"Allowed IP"}),(0,R.jsx)(g.A,{id:"allowedIP",name:"allowedIP",value:n.allowedIP,onChange:t,"aria-label":"empty textarea",placeholder:"Ex: 192.167.22.340, 192.167.22.341",onKeyDown:U})]})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{htmlFor:"deniedIP",children:"Denied IP"}),(0,R.jsx)(g.A,{id:"deniedIP",name:"deniedIP",defaultValue:n.deniedIP,onChange:t,"aria-label":"empty textarea",placeholder:"Ex: 192.167.22.340, 192.167.22.341",onKeyDown:U})]})}),a&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{htmlFor:"allowedPages",children:"Allowed Pages"}),(0,R.jsx)(g.A,{id:"allowedPages",name:"allowedPages",defaultValue:n.allowedPages,onChange:t,"aria-label":"empty textarea",placeholder:"Ex: https://xyz.com, https://abc.com",onKeyDown:U})]})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{htmlFor:"deniedPages",children:"Denied Pages"}),(0,R.jsx)(g.A,{id:"deniedPages",name:"deniedPages",defaultValue:n.deniedPages,onChange:t,"aria-label":"empty textarea",placeholder:"Ex: https://xyz.com, https://abc.com",onKeyDown:U})]})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{htmlFor:"allowedCountries",children:"Allowed Countries"}),(0,R.jsx)(g.A,{id:"allowedCountries",name:"allowedCountries",defaultValue:n.allowedCountries,onChange:t,"aria-label":"empty textarea",placeholder:"Ex: India, Oman, Australia",onKeyDown:U})]})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{htmlFor:"deniedCountries",children:"Denied Countries"}),(0,R.jsx)(g.A,{id:"deniedCountries",name:"deniedCountries",defaultValue:n.deniedCountries,onChange:t,"aria-label":"empty textarea",placeholder:"Ex: Sri Lanka, Bhutan",onKeyDown:U})]})})]})]})}function X(e){let{values:n,setFieldValue:t}=e;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(i.Ay,{item:!0,xs:12,children:(0,R.jsx)(s.A,{children:(0,R.jsx)(d.A,{variant:"subtitle1",children:"Activate Consolidated Leads Reports"})})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,md:4,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{children:"Daily Consolidated Lead Email"}),(0,R.jsx)(L.A,{name:"sendDailyConsolidatedLeadEmail",value:n.sendDailyConsolidatedLeadEmail,defaultValue:!1,onChange:t})]})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,md:4,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{children:"Weekly Consolidated Lead Email"}),(0,R.jsx)(L.A,{name:"sendWeeklyConsolidatedLeadEmail",value:n.sendWeeklyConsolidatedLeadEmail,defaultValue:!1,onChange:t})]})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,md:4,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{children:"Monthly Consolidated Lead Email"}),(0,R.jsx)(L.A,{name:"sendMonthlyConsolidatedLeadEmail",value:n.sendMonthlyConsolidatedLeadEmail,defaultValue:!1,onChange:t})]})})]})}function Y(e){let{values:n,handleChange:t}=e;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(i.Ay,{item:!0,xs:12,children:(0,R.jsx)(s.A,{children:(0,R.jsx)(d.A,{variant:"subtitle1",children:"Custom Prompt"})})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,md:12,children:(0,R.jsxs)(c.A,{spacing:1,children:[(0,R.jsx)(u.A,{children:"Custom Prompt"}),(0,R.jsx)(g.A,{multiline:!0,rows:4,fullWidth:!0,id:"customPrompt",name:"customPrompt",value:n.customPrompt,onChange:t,placeholder:"Please enter the custom prompt"})]})})]})}function J(e){let{errors:n,isSubmitting:t}=e;return(0,R.jsxs)(R.Fragment,{children:[n.submit&&(0,R.jsx)(i.Ay,{item:!0,xs:12,children:(0,R.jsx)(p.A,{error:!0,children:n.submit})}),(0,R.jsx)(i.Ay,{item:!0,xs:12,mt:2,children:(0,R.jsx)(f.A,{children:(0,R.jsx)(P.A,{disableElevation:!0,isLoading:t,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Save Settings"})})})]})}function H(e,n){return e?isNaN(e)?n:Number(e):e}function q(e){let{id:n,name:t,value:l,onChange:i}=e,s=(0,a.A)(e,K);const d=r.useRef(),c=e=>i(t,e);return(0,R.jsx)(v.b,(0,o.A)({ref:d,id:n||t,name:t,addOnBlur:!0,value:l||[],onChange:c,onInputChange:e=>{e.endsWith(",")&&(l=[...l,e.substring(0,e.length-1)],c(l),d.current.value="")}},s))}},93383(e,n,t){t.d(n,{A:()=>c});var a=t(89379),o=t(80045),r=t(9950),l=t(10226),i=t(46639),s=t(44414);const d=["onClick","disabled","isLoading","children"];const c=function(e){let{onClick:n,disabled:t,isLoading:c,children:u}=e,h=(0,o.A)(e,d);const[m,x]=r.useState(c);return(0,s.jsxs)(l.A,(0,a.A)((0,a.A)({onClick:e=>{if(!n)return;const t=n(e);"function"===typeof(null===t||void 0===t?void 0:t.finally)&&(x(!0),t.finally(()=>x(!1)))},disabled:m||c||t},h),{},{children:[(m||c)&&(0,s.jsx)(i.A,{size:16,color:"primary",style:{marginRight:"10px"}}),u]}))}},98415(e,n,t){t.d(n,{Ci:()=>h,I4:()=>u,TF:()=>d,gI:()=>i,gR:()=>x,jo:()=>c,rv:()=>A,so:()=>m,yo:()=>s});var a=t(89379),o=t(8478),r=t(33340),l=t(32026);async function i(e){const{organization:{websiteUrl:n,_id:t}}=r.nc.getState(),a={organizationId:t,websiteUrl:n,botName:e,botDesign:{visitorMessageLogo:{name:"",url:""},botMessageLogo:{name:"",url:""},botChatButton:{name:"",url:""},botLogo:{name:"",url:""},backgroundColor:"#e7a654",textColor:"#ffffff",dimensions:{heightInPixel:"500px",heightInPercent:"70%",widthInPixel:"350px",widthInPercent:"25%"},botLogoDimensions:{heightInPixel:"30px",heightInPercent:"100%",widthInPixel:"30px",widthInPercent:"100%"}}};p(await o.bE("/bot/".concat(t),a),!0)}async function s(e,n,t){const{organizationId:a}=r.nc.getState();if(!a||!e)throw new Error("Bot details not found");const l=await o.yJ("/bot/".concat(a,"/").concat(e),n);return p(l,t),l}async function d(e){const{organizationId:n,selectedBotId:t}=r.nc.getState();if(!n||!e)throw new Error("Bot details not found");const{deleted:l}=await o.TF("/bot/".concat(n,"/").concat(e));if(l){let{botsMap:e,botsList:n}=r.nc.getState();e=(0,a.A)({},e),n=[...n],delete e[l];const o=n.findIndex(e=>e._id===l);o>=0&&n.splice(o,1);const s={botsMap:e,botsList:n};var i;if(t===l)s.selectedBotId=(null===(i=n[0])||void 0===i?void 0:i._id)||null;r.nc.setState(s)}return!!l}function c(e,n){let{botDesign:t}=r.nc.getState();return t=(0,a.A)((0,a.A)({},t),n),s(e,{botDesign:t})}async function u(e,n){const{organizationId:t,selectedBotId:a}=r.nc.getState(),l=new FormData;l.append("file",n);const i=await o.bE("/bot/".concat(t,"/").concat(a,"/update-logo/").concat(e),l);return A(a,i),i["botDesign.".concat(e)]}async function h(e){const{organizationId:n,selectedBotId:t}=r.nc.getState(),a=await o.TF("/bot/".concat(n,"/").concat(t,"/update-logo/").concat(e));return A(t,a),a["botDesign.".concat(e)]}function m(e,n){return s(e,{botName:n})}function x(e,n){let{botSettings:t={}}=r.nc.getState();return t=(0,a.A)((0,a.A)({},t),n),s(e,{botSettings:t})}function A(e,n){const{botsMap:t}=r.nc.getState(),a=t[e];if(!a)return;p(Object.keys(n).reduce((e,t)=>(0,l.G6)(e,t,n[t]),a))}function p(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const t=e._id;let{botsMap:o,botsList:l}=r.nc.getState();o=(0,a.A)((0,a.A)({},o),{},{[t]:e}),l=[...l];const i=l.findIndex(e=>e._id===t);i>=0?l[i]=e:l.push(e);const s={botsMap:o,botsList:l};n&&(s.selectedBotId=t),r.nc.setState(s)}}}]);