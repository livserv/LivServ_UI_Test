"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[2232],{6834:(e,t,n)=>{n.d(t,{A:()=>j});var s=n(9950),i=n(60899),o=n(3788),a=n(81616),l=n(2660),r=n(10226),c=n(29714),d=n(61467),u=n(24516),h=n(21788),m=n(32829),p=n(93383),x=n(77382),g=n(44414);const b=()=>c.Yj(),v=c.Ik().shape({question:b(),content:b()});const j=function(e){let{document:t={},onCancel:n,onUpdate:c}=e;const b=s.useCallback(()=>n(!1),[n]);return(0,g.jsx)(d.l1,{initialValues:t,validationSchema:v,onSubmit:async(e,t)=>{let{setStatus:n,setSubmitting:s}=t;try{const t=await(0,x.Mk)(e);n({success:!1}),s(!1),b(),(0,h.i)(!0,"Content added successfully!","success"),null===c||void 0===c||c(t)}catch(i){console.error(i),(0,h.i)(!0,"Error occurred while trying to save content.","error")}},children:e=>{let{values:t,errors:n,handleChange:s,touched:c,isSubmitting:d,handleSubmit:h}=e;return(0,g.jsxs)("form",{noValidate:!0,onSubmit:h,children:[(0,g.jsxs)(i.Ay,{item:!0,xs:12,mt:5,children:[(0,g.jsx)(o.A,{htmlFor:"question",children:"Question"}),(0,g.jsxs)(a.A,{spacing:2,mb:3,children:[(0,g.jsx)(l.A,{multiline:!0,fullWidth:!0,id:"question",name:"question",value:t.question,onChange:s,placeholder:"Please enter the question"}),c.question&&n.question&&(0,g.jsx)(u.A,{error:!0,id:"helper-text-message-placeholder",children:n.question})]}),(0,g.jsx)(o.A,{htmlFor:"content",children:"Answer"}),(0,g.jsxs)(a.A,{spacing:2,mb:3,children:[(0,g.jsx)(l.A,{multiline:!0,rows:6,fullWidth:!0,id:"content",name:"content",value:t.content,onChange:s,placeholder:"Please enter the answer"}),c.content&&n.content&&(0,g.jsx)(u.A,{error:!0,id:"helper-text-message-placeholder",children:n.content})]})]}),(0,g.jsx)(i.Ay,{item:!0,xs:12,display:"flex",justifyContent:"flex-end",children:(0,g.jsxs)(a.A,{spacing:2,direction:"row",children:[(0,g.jsx)(r.A,{variant:"outlined",onClick:b,children:"Cancel"}),(0,g.jsx)(m.A,{children:(0,g.jsx)(p.A,{isLoading:d,color:"primary",size:"large",type:"submit",variant:"contained",onClick:h,children:"Save"})})]})})]})}})}},65387:(e,t,n)=>{n.d(t,{A:()=>c});var s=n(70006),i=n(23266),o=n(24516),a=n(44414);const l=[{value:"gpt-4o-mini",label:"GPT 4o Mini Latest (default)",description:"Current Latest Mini model of GPT 4o. Cheaper and faster than GPT 4o."},{value:"gpt-4.1-mini-2025-04-14",label:"gpt-4.1-mini",description:"3 times costly than GPT 4o."},{value:"gpt-4.1-nano-2025-04-14",label:"gpt-4.1-nano",description:"Cheaper and faster than GPT 4o"},{value:"gpt-4o-mini-2024-07-18",label:"GPT 4o Mini (July 2024)",description:"Mini model of GPT 4o. Cheaper and faster than GPT 4o."},{value:"gpt-4o",label:"GPT 4o Latest",description:"Latest model of GPT 4o. More capable, cheaper and faster than GPT 4 Turbo."},{value:"gpt-4o-2024-08-06",label:"GPT 4o (Aug 2024)",description:"May 2024 Release of GPT 4o. More capable, cheaper and faster than GPT 4 Turbo."},{value:"gpt-4",label:"GPT 4 Turbo",description:"Latest stable model of GPT 4. More capable, but is 5 times costly then 3.5 models."},{value:"gpt-4-1106-preview",label:"GPT 4 Latest Preview",description:"Latest preview model of GPT 4. Most capable model, but is 3 times costly then 3.5 models."},{value:"gpt-3.5-turbo-0125",label:"GPT 3.5 Latest Stable",description:"Latest stable model of GPT 3.5. More performant. Random minor inconsistency observed sometimes."},{value:"gpt-3.5-turbo-1106",label:"GPT 3.5 Latest Preview",description:"Latest preview model of GPT 3.5. This is more accurate than latest stable, but some times non responsive while on peek loads."}],r=l.reduce((e,t)=>(e[t.value]=t,e),{});const c=function(e){var t;let{value:n,hideDescription:c,...d}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.A,{...d,value:n,defaultValue:l[0].value,children:[l.map(e=>(0,a.jsx)(i.A,{value:e.value,children:e.label},e.value)),!r[n]&&(0,a.jsx)(i.A,{value:n,children:n},n)]}),!c&&(0,a.jsx)(o.A,{id:"bot-model-description",children:n?null===(t=r[n])||void 0===t?void 0:t.description:l[0].description})]})}},68033:(e,t,n)=>{n.d(t,{A:()=>C});var s=n(9950),i=n(60899),o=n(82053),a=n(10226),l=n(63464),r=n(40033),c=n(79739),d=n(57988),u=n(7999),h=n(25333),m=n(63359),p=n(85967),x=n(74745),g=n(21788),b=n(32829),v=n(93383),j=n(70855),f=n(6834),A=n(77382),y=n(44414);const C=function(e){let{docsList:t,onUpdate:n}=e;const[,s]=(0,j.G)();return null===t||void 0===t?void 0:t.map((e,t)=>(0,y.jsx)(k,{index:t,document:e,trainingMedia:s.trainingMedia,onUpdate:n},e._id))};function k(e){let{document:t,index:n,trainingMedia:i,onUpdate:o}=e;const[a,l]=s.useState(!1);return a?(0,y.jsx)(f.A,{document:t,onCancel:l,onUpdate:o}):(0,y.jsx)(w,{index:n,document:t,trainingMedia:i,onEdit:l})}function w(e){let{document:t,index:n,trainingMedia:a,onEdit:l}=e;const r=s.useCallback(()=>l(!0),[l]);return(0,y.jsxs)(i.Ay,{container:!0,mt:1,children:[(0,y.jsxs)(i.Ay,{item:!0,children:[(0,y.jsxs)(o.A,{variant:"h5",children:["Q",n+1," . ",t.question]}),(0,y.jsxs)(o.A,{variant:"body2",children:[(0,y.jsx)("b",{children:"Ans . "})," ",t.content]}),t.sourceDocument&&(null===a||void 0===a?void 0:a.length)>0&&(0,y.jsx)(S,{document:t,trainingMedia:a})]}),(0,y.jsxs)(i.Ay,{xs:12,item:!0,display:"flex",justifyContent:"flex-end",children:[(0,y.jsx)(h.A,{size:"small",sx:{color:m.A[500]},onClick:r,children:(0,y.jsx)(u.A,{})}),(0,y.jsx)(T,{documentId:t._id})]}),(0,y.jsx)(x.A,{xs:12,sx:{width:"100%",borderColor:"#b6abab"}})]})}function S(e){let{document:t,trainingMedia:n}=e;const i=t.sourceDocument,a=s.useMemo(()=>{const e=n.filter(e=>e.docId===i)[0];if(!e)return e;const t=decodeURIComponent(e.url.substring(e.url.lastIndexOf("/")+1));return{...e,fileName:t}},[i,n]);return a?(0,y.jsxs)(o.A,{variant:"body2",children:[(0,y.jsx)("b",{children:"Source Document:"})," ",(0,y.jsxs)("a",{href:a.url,rel:"noreferrer",target:"_blank",style:{cursor:"pointer"},children:[a.fileName,a.name?` ( ${a.name} )`:""]})]}):null}function T(e){let{documentId:t}=e;const[n,i]=s.useState(!1),u=()=>i(e=>!e),m=s.useCallback(async()=>{await(0,A.CA)(t),i(!1),(0,g.i)(!0,"Deleted response successfully","success")},[t]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.A,{sx:{color:p.A[500]},onClick:u,children:(0,y.jsx)(d.A,{})}),n&&(0,y.jsxs)(l.A,{open:n,onClose:u,children:[(0,y.jsx)(r.A,{id:"delete-confirm-dialog-title",children:(0,y.jsx)(o.A,{gutterBottom:!0,children:"Are sure you want to delete the response ?"})}),(0,y.jsxs)(c.A,{children:[(0,y.jsx)(a.A,{onClick:u,children:"Cancel"}),(0,y.jsx)(b.A,{children:(0,y.jsx)(v.A,{color:"primary",type:"submit",variant:"contained",onClick:m,children:"Delete"})})]})]})]})}},73225:(e,t,n)=>{n.d(t,{A:()=>c});var s=n(9950),i=n(68033),o=n(77382),a=n(65387),l=n(93383),r=n(44414);const c=function(e){let{message:t,isSuperUser:n,onReplay:c}=e;const{content:d,searchQuery:u,passedDocIds:h,index:m,model:p}=t,[x,g]=(0,s.useState)([]),[b,v]=(0,s.useState)(p);(0,s.useEffect)(()=>{(0,o.L3)(h).then(g)},[h]),(0,s.useEffect)(()=>{v(t.model)},[t]);const j=s.useCallback(e=>{var t;return v(null===(t=e.target)||void 0===t?void 0:t.value)},[]);return(0,r.jsxs)("div",{className:"kb-docs-editor",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Selected Bot: "}),(0,r.jsx)(a.A,{value:b,hideDescription:!0,onChange:j}),(0,r.jsx)(l.A,{style:{marginLeft:8},variant:"contained",color:"primary",size:"medium",onClick:()=>c(m,b),children:"Replay"})]}),(0,r.jsxs)("div",{className:"ellipsis",children:[(0,r.jsx)("strong",{children:"Message: "}),(0,r.jsx)("span",{title:d,children:d})]}),n&&u&&(0,r.jsxs)("div",{className:"ellipsis",children:[(0,r.jsx)("strong",{children:"Search Query: "}),(0,r.jsx)("span",{children:u})]}),(0,r.jsx)("div",{children:(0,r.jsx)(i.A,{docsList:x,onUpdate:e=>g(t=>t.map(t=>t._id===e._id?e:t))})})]})}},77382:(e,t,n)=>{n.d(t,{CA:()=>h,L3:()=>u,Mk:()=>r,bZ:()=>c,gJ:()=>d});var s=n(8478),i=n(33340),o=n(32026),a=n(59051),l=n.n(a);async function r(e){const{organizationId:t,selectedBotId:n}=i.nc.getState(),o=await s.bE(`/bot/${t}/${n}/knowledge-base`,e);return i.nc.setState(t=>{const s={...t.kbDocs||{}},i=s[n];if(!i)return{};if(s[n]=[...i],e._id){const e=s[n].findIndex(e=>e._id===o._id);e>=0?s[n][e]=o:s[n].push(o)}else s[n].push(o);return{kbDocs:s}}),o}async function c(e){const{organizationId:t,selectedBotId:n,kbDocs:o}=i.nc.getState();if(e&&Array.isArray(null===o||void 0===o?void 0:o[n]))return;const a=await s.Jt(`/bot/${t}/${n}/knowledge-base/list`);i.nc.setState(e=>({kbDocs:{...e.kbDocs||{},[n]:a}}))}async function d(){var e;const{organizationId:t,selectedBotId:n,botsMap:a}=i.nc.getState(),r=`/bot/${t}/${n}/knowledge-base/download`,c=await s.Jt(r),d=(null===(e=a[n])||void 0===e?void 0:e.botName)||"KBDocs";(0,o.PE)(c,d+"_"+l()().format("YYYYMMDD")+".csv")}async function u(e){if(null===e||void 0===e||!e.length)return[];const{organizationId:t,selectedBotId:n}=i.nc.getState();return await s.Jt(`/bot/${t}/${n}/knowledge-base/list?${e.map(e=>`docIds=${e}`).join("&")}`)}async function h(e){const{organizationId:t,selectedBotId:n}=i.nc.getState();await s.TF(`/bot/${t}/${n}/knowledge-base/${e}`),i.nc.setState(t=>{var s;const i={...t.kbDocs||{}};return i[n]=null===(s=i[n])||void 0===s?void 0:s.filter(t=>t._id!==e),{kbDocs:i}})}},82921:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var s=n(9950),i=n(28429),o=n(32026),a=n(8478),l=n(15820),r=n(78023),c=n(33340),d=n(34735),u=n(73225),h=n(44414);const m=function(){const{organizationId:e,botId:t,recipientId:n,chatId:m}=(0,i.g)(),{isAuthenticated:p,isSuperUser:x}=(0,c.nc)(),[g,b]=s.useState(),[v,j]=s.useState(),[f,A]=s.useState(),y=`/bot/${e}/${t}/chat/history/${n}/${m}?includeBot=1${p?"&includeKB=1":""}${null!==v&&void 0!==v&&v.code?`&language=${encodeURIComponent(v.code)}`:""}`;s.useEffect(()=>{a.Jt(y).then(e=>{var t;const n=(0,o.Yq)(null===(t=e.messages[0])||void 0===t?void 0:t.createdAt);e.botDesign=(0,r.Y)(e.botDesign,{window:{width:"600px",height:"calc(100vh - 120px)"},header:{titleText:n+` (${e.titleText})`}}),b(function(e){const t=e.messages.length&&e.messages[e.messages.length-1];"options"===(null===t||void 0===t?void 0:t.type)&&(t.content="",e.messages);return e}(e))},e=>{console.error("Unable to load chat conversations:",e)})},[y]);const C=s.useCallback(async(s,i)=>{const o=await a.Jt(`/bot/${e}/${t}/chat/history/${n}/${m}/replay/${s}?modelName=${i||""}`);A(o)},[e,t,n,m]);return g?(0,h.jsxs)("div",{className:"conversation-history"+(p?" authenticated":""),children:[(0,h.jsx)("div",{children:(0,h.jsx)(l.A,{botDesign:g.botDesign,messages:g.messages,showTime:!0,disabledMessage:!0,optionsRenderer:e=>{const{role:t,type:n,passedDocIds:s,searchQuery:i}=e||{};if("assistant"===t&&"text"===n&&(null!==s&&void 0!==s&&s.length||i))return(0,h.jsx)("span",{className:"show-icon",onClick:()=>A(e),children:(0,h.jsx)(d.A,{})})},language:v,setLanguage:j})}),f&&(0,h.jsx)(u.A,{message:f,onClose:()=>f(null),isSuperUser:x,onReplay:C})]}):(0,h.jsx)("div",{children:"Loading... Please wait..."})}}}]);