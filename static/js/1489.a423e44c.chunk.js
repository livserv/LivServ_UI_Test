"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[1489],{6716:(e,i,t)=>{t.d(i,{A:()=>f});var n=t(89379),s=(t(9950),t(60899)),r=t(81616),a=t(3788),l=t(82053),o=t(10226),d=t(24516),c=t(29714),h=t(61467),x=t(32829),u=t(26092),p=t(44364),m=t(30334),g=t(70855),j=t(21788),A=t(44414);const f=function(e){let{isOpen:i,toggleOpen:t}=e;return(0,A.jsx)(u.A,{openPopUpDialog:i,setPopUpDialog:t,title:"Upload Training Documents",children:(0,A.jsx)(v,{setDocumentUploadDialogOpen:t})})},y=p.Og?p.Og:5242880,b=c.Ik().shape({file:c.gl().required("File is not selected").test("is-valid-size","Maximum allowed file size is ".concat(y/1048576," MB"),e=>e&&e.size<=y)});function v(e){let{setDocumentUploadDialogOpen:i}=e;const[,t]=(0,g.G)(),c=null===t||void 0===t?void 0:t.trainingMedia;return(0,A.jsxs)(s.Ay,{container:!0,spacing:1,children:[(0,A.jsx)(s.Ay,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:(0,A.jsx)(r.A,{spacing:1,children:(0,A.jsx)(a.A,{children:"File Upload (.csv, .txt, .docx, .pdf)"})})}),(0,A.jsx)(s.Ay,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:(0,A.jsx)(h.l1,{initialValues:{file:null},validationSchema:b,onSubmit:async(e,t)=>{let{setErrors:n,setStatus:s,setSubmitting:r}=t;try{const{name:t}=e.file;c.some(e=>e.originalName===t)?(0,j.i)(!0,"The file already uploaded!. Please select another file","error"):(r(!0),await(0,m.MD)(e.file),s({success:!0}),i(!1),(0,j.i)(!0,"The file uploaded successfully!","success"))}catch(a){console.error("Error uploading the document:",a),s({success:!1}),n({submit:a.message}),r(!1),i(!1),(0,j.i)(!0,"Not able to upload the file. Try after sometime!","error")}},children:e=>{let{values:i,errors:t,isSubmitting:r,setFieldValue:a}=e;return(0,A.jsxs)(h.lV,{children:[(0,A.jsxs)(s.Ay,{container:!0,spacing:2,children:[(0,A.jsx)(s.Ay,{item:!0,xs:12,md:12,children:i.file&&(0,A.jsxs)(l.A,{variant:"body2",children:["Selected File: ",i.file.name]})}),(0,A.jsx)(s.Ay,{item:!0,xs:6,md:6,container:!0,justifyContent:"flex-end",children:(0,A.jsx)(h.D0,{type:"file",name:"file",as:e=>{let{field:i}=e;return(0,A.jsx)(x.A,{children:(0,A.jsxs)(o.A,{variant:"contained",component:"label",htmlFor:"file-input",size:"large",sx:{whiteSpace:"nowrap"},children:["Select File",(0,A.jsx)("input",(0,n.A)((0,n.A)({},i),{},{type:"file",id:"file-input",style:{display:"none"},onChange:e=>{a("file",e.currentTarget.files[0])},accept:".csv,.txt,.docx,.doc,.pdf,text/plain"}))]})})}})}),(0,A.jsx)(s.Ay,{item:!0,xs:6,md:6,children:(0,A.jsx)(x.A,{children:(0,A.jsx)(o.A,{variant:"contained",size:"large",type:"submit",disabled:r,children:r?"Uploading...":"Upload"})})})]}),(0,A.jsx)(s.Ay,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:(0,A.jsx)(d.A,{error:!0,id:"helper-text-file-input",children:t.file})})]})}})})]})}},11489:(e,i,t)=>{t.r(i),t.d(i,{default:()=>H});var n=t(9950),s=t(78317),r=t(60899),a=t(82053),l=t(81616),o=t(3788),d=t(2660),c=t(24516),h=t(16497),x=t(93038),u=t(33092),p=t(59254),m=t(80417),g=t(79046),j=t(12504),A=t(4120),f=t(94540),y=t(29714),b=t(61467),v=t(33340),w=t(70855),S=t(32829),M=t(30334),D=t(93383),C=t(26092),U=t(21788),N=t(57988),T=t(62375),z=t(50704),I=t(53065),k=t(25713),F=t(25333),L=t(25277),O=t(51637),B=t(46278),P=t(89379);function V(e,i,t,n){function s(e,i,t){const{botsList:n}=v.nc.getState(),s=n.find(i=>i._id===e);if(s){const n=s.trainingMedia.map(e=>e.url===i?(0,P.A)((0,P.A)({},e),{},{name:t}):e);((e,i)=>{v.nc.setState(t=>{const n=t.botsList.map(t=>t._id===e?(0,P.A)((0,P.A)({},t),{},{trainingMedia:i}):t);return(0,P.A)((0,P.A)({},t),{},{botsList:n})})})(e,n),v.nc.setState(()=>({trainingMediaUpdate:!0}))}else console.error("Bot not found for the given ID.")}s(t,e,"delete"===n?e:i)}var _=t(44414);const W=function(e){let{media:i,botId:t,organizationId:s}=e;const[l,o]=n.useState(!1),{name:h,url:x,type:u,originalName:p}=i;return(0,_.jsxs)(O.A,{contentSX:{p:2.25},children:[(0,_.jsxs)(z.A,{style:{padding:0,minHeight:"65px",maxHeight:"65px"},children:[p&&(0,_.jsxs)(a.A,{variant:"h6",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"300px"},children:[(0,_.jsx)("strong",{children:"File Name :"})," ",(0,_.jsx)(I.A,{style:{cursor:"pointer"},title:p,children:(0,_.jsx)("span",{children:(0,_.jsx)("a",{href:x,target:"_blank",rel:"noreferrer",children:p})})})]}),"single_page"===u&&(0,_.jsxs)(a.A,{variant:"h6",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"300px"},children:[(0,_.jsx)("strong",{children:"URL :"})," ",(0,_.jsx)(I.A,{style:{cursor:"pointer"},title:x,children:(0,_.jsx)("span",{children:(0,_.jsx)("a",{href:x,target:"_blank",rel:"noreferrer",children:x})})})]}),(0,_.jsxs)(a.A,{variant:"h6",children:[(0,_.jsx)("strong",{children:"Type :"})," ","single_page"===u?"Web Page":"Document"]}),(0,_.jsxs)(a.A,{variant:"h6",children:[(0,_.jsx)("strong",{children:"Document Name :"})," ",h===x?"NA":(0,_.jsx)(L.A,{label:h,onDelete:()=>((e,i,t)=>{V(e,i,t,"delete")})(x,h,t)})]})]}),(0,_.jsx)(k.A,{style:{justifyContent:"flex-end",padding:"1px"},children:(0,_.jsxs)(r.Ay,{container:!0,children:[(0,_.jsx)(r.Ay,{item:!0,xs:10,md:10,children:h===x&&(0,_.jsx)(b.l1,{initialValues:{trainingMediaName:"",url:x},validationSchema:y.Ik().shape({trainingMediaName:y.Yj().max(50,"Training Media Name length must be less than 50 characters").min(3,"Training Media Name length must be at least 3 characters").required("Training Media Name is required")}),onSubmit:async(e,i)=>{let{setErrors:n,setStatus:s,setSubmitting:r}=i;const{trainingMediaName:a}=e;try{V(x,a,t,"add"),s({success:!0}),r(!0)}catch(l){s({success:!1}),n({submit:l.message}),r(!1)}},children:e=>{let{errors:i,handleBlur:t,handleChange:n,handleSubmit:s,isSubmitting:a,touched:l,values:o}=e;return(0,_.jsx)("form",{noValidate:!0,onSubmit:s,children:(0,_.jsxs)(r.Ay,{container:!0,spacing:1,children:[(0,_.jsxs)(r.Ay,{item:!0,xs:8,md:8,children:[(0,_.jsx)(d.A,{id:"trainingMediaName",type:"trainingMediaName",name:"trainingMediaName",placeholder:"Document Name",defaultValue:o.trainingMediaName,onBlur:t,onChange:n,fullWidth:!0,autoComplete:"off",error:Boolean(l.trainingMediaName&&i&&i.trainingMediaName)}),l.trainingMediaName&&i.trainingMediaName&&(0,_.jsx)(c.A,{error:!0,id:"helper-text-training-media-name",children:i.trainingMediaName})]}),(0,_.jsx)(r.Ay,{item:!0,xs:1,md:1,children:(0,_.jsx)(S.A,{children:(0,_.jsx)(D.A,{isLoading:a,disabled:a,type:"submit",variant:"contained",color:"primary",children:"Add"})})})]})})}})}),(0,_.jsx)(r.Ay,{item:!0,xs:1,md:1,children:(0,_.jsx)(I.A,{title:"text/plain"===u?"View Document":"View Web Page",children:(0,_.jsx)(F.A,{variant:"text",onClick:()=>{return e=x,void window.open(e);var e},children:(0,_.jsx)(T.A,{style:{color:"#5ad74e"}})})})}),(0,_.jsxs)(r.Ay,{item:!0,xs:1,md:1,children:[(0,_.jsx)(I.A,{title:"Delete",children:(0,_.jsx)(F.A,{variant:"text",onClick:()=>o(!0),children:(0,_.jsx)(N.A,{style:{color:"#ff0000"},fontSize:"small"})})}),(0,_.jsxs)(B.A,{title:"Delete file?",open:l,setOpen:o,onConfirm:()=>(async(e,i,t,n)=>{try{const s={organizationId:n,botId:t,fileName:i,fileUrl:e};await(0,M.qt)(s,t,n),(0,U.i)(!0,"The file deleted successfully!","success")}catch(s){(0,U.i)(!0,"Not able to delete the file. Try after sometime!","error")}})(x,p,t,s),children:["Confirm the deletion of ",p||x,"?"]})]})]})})]})};var E=t(6716),R=t(98415);const q=(0,p.Ay)(m.A)(e=>{let{theme:i}=e;return{position:"fixed","#trainingDocumentsSpeedDial &":{"&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight":{left:"auto",right:i.spacing(2)},"&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft":{right:"auto",left:i.spacing(2)}}}});function G(e){let{botId:i,organizationId:t}=e;const[s,r]=n.useState(!1),[a,l]=n.useState(!1),o=[{icon:(0,_.jsx)(j.A,{}),name:"File Upload (.csv, .txt, .docx, .pdf)",method:()=>{l(!0)}},{icon:(0,_.jsx)(A.A,{}),name:"Add Web Page url",method:()=>{r(!0)}}];return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(q,{ariaLabel:"Upload Training Documents",hidden:!1,icon:(0,_.jsx)(g.A,{}),direction:"down",sx:{"& .MuiFab-primary":{width:40,height:40}},children:o.map(e=>(0,_.jsx)(u.A,{icon:e.icon,tooltipTitle:e.name,onClick:e.method},e.name))}),(0,_.jsx)(C.A,{openPopUpDialog:s,setPopUpDialog:r,title:"Train from website",children:(0,_.jsx)(X,{botId:i,organizationId:t,setWebPageUrlAddDialogOpen:r})}),(0,_.jsx)(E.A,{isOpen:a,toggleOpen:l})]})}const H=function(){var e;const[i,t]=(0,n.useState)(!1),[l,o]=(0,n.useState)(!1),d=(0,v.nc)(e=>e.botsList),c=(0,v.nc)(e=>e.organizationId),h=(0,v.nc)(e=>e.trainingMediaUpdate),[x]=(0,w.G)(),u=null===(e=d.find(e=>e._id===x))||void 0===e?void 0:e.trainingMedia;return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(s.A,{children:[(0,_.jsxs)(r.Ay,{container:!0,spacing:3,children:[(0,_.jsx)(r.Ay,{item:!0,xs:3,children:(0,_.jsx)(a.A,{variant:"h5",children:"Training Documents"})}),(0,_.jsx)(r.Ay,{item:!0,xs:6,sx:{position:"relative",display:"flex",justifyContent:"flex-end"},children:(0,_.jsx)("div",{style:{position:"fixed",right:75},children:(0,_.jsxs)(r.Ay,{container:!0,spacing:3,children:[(0,_.jsx)(r.Ay,{item:!0,children:h&&(0,_.jsx)(S.A,{children:(0,_.jsx)(D.A,{isLoading:i,disabled:i,variant:"contained",color:"success",size:"large",onClick:async()=>{try{t(!0),await(0,R.yo)(x,{trainingMedia:u}),v.nc.setState(()=>({trainingMediaUpdate:!1})),(0,U.i)(!0,"The document names updated successfully!","success"),t(!1)}catch(e){t(!1),(0,U.i)(!0,"Not able to add document names. Try after sometime!","error")}},children:"Save Changes"})})}),(0,_.jsx)(r.Ay,{item:!0,children:(0,_.jsx)(S.A,{children:(0,_.jsx)(D.A,{isLoading:l,disabled:l,variant:"contained",color:"success",size:"large",onClick:async()=>{o(!0);try{const e=await(0,M.Ei)(x,c),{deleted:i,totalDocs:n,supportedDocsCount:s,processedDocsCount:r,created:a,failedDocs:l}=e,d=l.length,h=d>0?d+" are failed to process":"all supported files processed successfully";o(!1),(0,U.i)(!0,"The bot training completed successfully! In ".concat(n," files ").concat(s," are supported, ").concat(r," files processed, ").concat(i," FAQ's deleted, ").concat(a," FAQ's created and ").concat(h),"success"),t(!1)}catch(e){o(!1),(0,U.i)(!0,"Not able to train the bot. Try after sometime!","error")}},children:"Train the bot"})})})]})})}),(0,_.jsx)(r.Ay,{item:!0,xs:1,sx:{position:"relative"},id:"trainingDocumentsSpeedDial",children:(0,_.jsx)(G,{botId:x,organizationId:c})})]}),(0,_.jsx)(s.A,{children:(0,_.jsx)(r.Ay,{container:!0,spacing:3,children:(0,_.jsx)(Y,{trainingMedia:u,botId:x,organizationId:c})})})]})})};function X(e){let{botId:i,organizationId:t,setWebPageUrlAddDialogOpen:n}=e;const[,s]=(0,w.G)();return(0,_.jsx)(r.Ay,{item:!0,xs:12,children:(0,_.jsx)(b.l1,{initialValues:{webpageUrl:""},validationSchema:y.Ik().shape({webpageUrl:y.Yj().url("Enter valid url!").required("Please enter webpage url")}),onSubmit:async(e,r)=>{let{setErrors:a,setStatus:l,setSubmitting:o}=r;try{const{trainingMedia:r}=s;if(r.some(i=>{var t,n;return(null===(t=i.url)||void 0===t?void 0:t.toLowerCase())===(null===(n=e.webpageUrl)||void 0===n?void 0:n.toLowerCase())}))(0,U.i)(!0,"This URL already available in the Training Documents!. Please add another URL","error");else{const s={url:e.webpageUrl,useBrowser:e.useBrowser};o(!0),await(0,M.KM)(s,i,t),l({success:!0}),n(!1),(0,U.i)(!0,"The url added successfully!","success")}}catch(d){console.error("Error adding training documents:-",d),l({success:!1}),a({submit:d.message}),o(!1),n(!1),(0,U.i)(!0,"Not able to add the url. Try after sometime!","error")}},children:e=>{let{errors:i,handleBlur:t,handleChange:n,handleSubmit:s,isSubmitting:a,touched:u,values:p}=e;return(0,_.jsxs)("form",{noValidate:!0,onSubmit:s,children:[(0,_.jsx)(r.Ay,{container:!0,spacing:1,children:(0,_.jsx)(r.Ay,{item:!0,xs:12,md:12,children:(0,_.jsxs)(l.A,{spacing:1,children:[(0,_.jsx)(o.A,{htmlFor:"webpage-url",children:"Webpage Url"}),(0,_.jsx)(d.A,{id:"webpage-url",type:"webpageUrl",defaultValue:p.webpageUrl,name:"webpageUrl",onBlur:t,onChange:n,autoComplete:"off",fullWidth:!0,placeholder:"https://www.yourwebsite.com/product-info",error:Boolean(u.webpageUrl&&i.webpageUrl)}),u.webpageUrl&&i.webpageUrl&&(0,_.jsx)(c.A,{error:!0,id:"helper-text-webpage-url",children:i.webpageUrl})]})})}),(0,_.jsx)("br",{}),(0,_.jsxs)(r.Ay,{container:!0,spacing:1,children:[(0,_.jsx)(r.Ay,{item:!0,xs:10,md:10,children:(0,_.jsxs)(l.A,{spacing:1,children:[(0,_.jsx)(o.A,{htmlFor:"use-browser",children:"More options"}),(0,_.jsx)(h.A,{value:!0,control:(0,_.jsx)(x.A,{checked:p.useBrowser,name:"useBrowser",onChange:n}),label:"My page needs script to generate content / My page has issues with training"})]})}),(0,_.jsx)(r.Ay,{item:!0,xs:2,md:2,children:(0,_.jsxs)(l.A,{spacing:1,children:[(0,_.jsx)(o.A,{children:"\xa0"}),(0,_.jsx)(S.A,{children:(0,_.jsx)(D.A,{style:{float:"right"},isLoading:a,disabled:a,color:"primary",size:"large",type:"submit",variant:"contained",id:"webpageUrlSubmit",children:"Add"})})]})})]})]})}})})}function Y(e){let{trainingMedia:i,botId:t,organizationId:n}=e;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(r.Ay,{item:!0,xs:12,children:i&&0===i.length&&(0,_.jsx)(a.A,{variant:"caption",color:"#FF0000",children:(0,_.jsxs)(r.Ay,{container:!0,spacing:1,children:[(0,_.jsx)(r.Ay,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:(0,_.jsx)(f.A,{style:{fontSize:40}})}),(0,_.jsx)(r.Ay,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:"Training Documents are not uploaded!"})]})})}),i&&i.map((e,i)=>(0,_.jsx)(r.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,_.jsx)(W,{media:e,botId:t,organizationId:n})},i))]})}},46278:(e,i,t)=>{t.d(i,{A:()=>d});t(9950);var n=t(63464),s=t(40033),r=t(28170),a=t(79739),l=t(10226),o=t(44414);const d=e=>{const{title:i,children:t,open:d,setOpen:c,onConfirm:h}=e;return(0,o.jsxs)(n.A,{open:d,onClose:()=>c(!1),style:{zIndex:1e4},children:[(0,o.jsx)(s.A,{sx:{m:0,p:2},id:"confirm-dialog",children:i}),(0,o.jsx)(r.A,{dividers:!0,children:t}),(0,o.jsxs)(a.A,{children:[(0,o.jsx)(l.A,{size:"large",type:"submit",variant:"contained",color:"secondary",onClick:()=>c(!1),children:"No"}),(0,o.jsx)(l.A,{size:"large",type:"submit",variant:"contained",color:"success",onClick:()=>{c(!1),h()},children:"Yes"})]})]})}},51637:(e,i,t)=>{t.d(i,{A:()=>p});var n=t(89379),s=t(80045),r=t(9950),a=t(14857),l=t(48089),o=t(45180),d=t(82053),c=t(50704),h=t(44414);const x=["border","boxShadow","children","content","contentSX","darkTitle","elevation","secondary","shadow","sx","title"],u={p:2.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},p=(0,r.forwardRef)((e,i)=>{let{border:t=!0,boxShadow:r,children:p,content:m=!0,contentSX:g={},darkTitle:j,elevation:A,secondary:f,shadow:y,sx:b={},title:v}=e,w=(0,s.A)(e,x);const S=(0,a.A)();return r="dark"===S.palette.mode?r||!0:r,(0,h.jsxs)(l.A,(0,n.A)((0,n.A)({elevation:A||0,ref:i},w),{},{sx:(0,n.A)({border:t?"1px solid":"none",borderRadius:2,borderColor:"dark"===S.palette.mode?S.palette.divider:S.palette.grey.A800,boxShadow:!r||t&&"dark"!==S.palette.mode?"inherit":y||S.customShadows.z1,":hover":{boxShadow:r?y||S.customShadows.z1:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:S.typography.fontFamily,fontSize:"0.75rem"}},b),children:[!j&&v&&(0,h.jsx)(o.A,{sx:u,titleTypographyProps:{variant:"subtitle1"},title:v,action:f}),j&&v&&(0,h.jsx)(o.A,{sx:u,title:(0,h.jsx)(d.A,{variant:"h3",children:v}),action:f}),m&&(0,h.jsx)(c.A,{sx:g,children:p}),!m&&p]}))})},70855:(e,i,t)=>{t.d(i,{G:()=>s});var n=t(33340);function s(e){const i=(0,n.nc)(e=>e.selectedBotId),t=(0,n.nc)(t=>t.botsMap[e||i]);return[e||i,t]}}}]);