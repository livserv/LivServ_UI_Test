"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[9108],{8478:(e,t,n)=>{n.d(t,{Jt:()=>l,TF:()=>p,bE:()=>d,yJ:()=>u});var i=n(89379),o=n(80045),s=n(32026),a=n(44364);const c=["headers","noAuth"],r=["data"];async function l(e,t){return h("GET",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function d(e,t){return h("POST",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function u(e,t){return h("PUT",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function p(e,t){return h("DELETE",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function h(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{headers:a,noAuth:l}=s,d=(0,o.A)(s,c);const u="POST"===e||"PUT"===e||"DELETE"===e;t=function(e,t){if(!e)return e;const n=t&&Object.keys(t);if(null!==n&&void 0!==n&&n.length){const i=n.reduce((e,n)=>{let i=t[n];return null===i||void 0===i?e:(i="".concat(n,"=").concat(encodeURIComponent(i)),e?"".concat(e,"&").concat(i):i)},"");i&&(e="".concat(e).concat(e.includes("?")?"&":"?").concat(i))}if(e.startsWith("https://"))return e;return"".concat(m).concat(e)}(t,u?void 0:n);const p=n instanceof FormData;if(p||(n=n&&"object"===typeof n&&u?JSON.stringify(n):void 0),a||(a={}),p||(a["Content-Type"]="application/json"),a.Accept="application/json",!1!==l){const e=sessionStorage.getItem("token");e&&(a.Authorization="Bearer ".concat(e))}try{const s=await fetch(t,(0,i.A)((0,i.A)({},d),{},{headers:a,body:n,method:e})),c=await s.json();if(s.ok){const{data:e}=c,t=(0,o.A)(c,r);return delete t.status,e&&!Object.keys(t).length?e:c}throw c.message?new Error(c.message):c}catch(A){var h;throw console.error("Error calling API: ",A),null!==(h=A.message)&&void 0!==h&&h.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error(A.message)}}const m=(0,s.s8)(a.jn,"/")},22942:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var i=n(89379),o=n(9950),s=n(60899),a=n(82053),c=n(78317),r=n(81616),l=n(24516),d=n(53065),u=n(50704),p=n(10226),h=n(25713),m=n(52472),A=n(99532),f=n(57988),x=n(62375),g=n(69935),v=n(4983),y=n(93153),b=n(94540),_=n(29714),j=n(61467),S=n(44364),E=n(51637),C=n(32829),P=n(21788),w=n(33340),T=n(70855);const I=n.p+"static/media/media-image.16ef5ffabad85fb7ba76.png";var R=n(26092),D=n(93383),M=n(8478),k=n(98415);var O=n(46278),L=n(74248),N=n(44414);const z=function(e){var t;const{mimeType:n,selectedFiles:o,handleSelection:s}=(0,i.A)({},e),a=(0,w.nc)(e=>e.botsList),[c]=(0,T.G)(),r=null===(t=a.find(e=>e._id===c))||void 0===t?void 0:t.conversationMedia,l=(0,w.nc)(e=>e.organizationId);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(U,{organizationId:l,botId:c,mimeType:n}),(0,N.jsx)(F,{botId:c,organizationId:l,conversationMediaList:r,mimeType:n,handleSelection:s,selectedFiles:o})]})};function U(e){var t;let{organizationId:n,botId:h,mimeType:f=".png,.jpeg,.jpg,.mpeg,.mp4,.pdf"}=e;const[x,g]=o.useState(!1),v=(0,o.useRef)(null),y=(0,w.nc)(e=>e.conversationMediaUpdate),b=null===(t=(0,w.nc)(e=>e.botsList).find(e=>e._id===h))||void 0===t?void 0:t.conversationMedia,E=S.pA?S.pA:5242880,P=_.Ik().shape({file:_.gl().required("File is not selected").test("is-valid-size","Maximum allowed file size is ".concat(E/1048576," MB"),e=>e&&e.size<=E)});return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(L.y,{ref:v}),(0,N.jsxs)(s.Ay,{container:!0,spacing:3,children:[(0,N.jsx)(s.Ay,{item:!0,xs:8,children:(0,N.jsx)(a.A,{variant:"h5",children:"Conversation Media"})}),(0,N.jsx)(s.Ay,{item:!0,xs:3,sx:{position:"relative",display:"flex",justifyContent:"flex-end"},children:y&&(0,N.jsx)("div",{style:{position:"fixed"},children:(0,N.jsx)(C.A,{children:(0,N.jsx)(D.A,{isLoading:isKeyWordSubmitting,disabled:isKeyWordSubmitting,variant:"contained",color:"success",size:"large",onClick:updateConversationMediaKeywords,children:"Save Changes"})})})}),(0,N.jsx)(s.Ay,{item:!0,xs:1,sx:{position:"relative"},style:{paddingTop:25,display:"flex",justifyContent:"right"},children:(0,N.jsx)(d.A,{title:"Upload Conversation Media",children:(0,N.jsx)(m.A,{color:"primary",size:"small",style:{position:"fixed"},onClick:()=>{g(!0)},children:(0,N.jsx)(A.A,{})})})})]}),(0,N.jsx)(R.A,{openPopUpDialog:x,setPopUpDialog:g,title:"Upload Conversation Media",children:(0,N.jsx)(c.A,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:(0,N.jsxs)(s.Ay,{container:!0,spacing:3,justify:"center",children:[(0,N.jsx)(s.Ay,{item:!0,xs:12,style:{padding:0,display:"flex",alignItems:"baseline",justifyContent:"center"},children:"Upload Media (*.png,*.jpeg,*.jpg,*.mpeg,*.mp4,*.pdf)"}),(0,N.jsx)(s.Ay,{item:!0,xs:12,justify:"center",children:(0,N.jsx)(u.A,{style:{padding:0,display:"flex",alignItems:"flex-start",justifyContent:"center"},children:(0,N.jsx)(r.A,{spacing:1,children:(0,N.jsx)(j.l1,{initialValues:{file:null},validationSchema:P,onSubmit:async(e,t)=>{let{setErrors:i,setStatus:o,setSubmitting:s}=t;try{const{name:t}=e.file;b.some(e=>e.name===t)?v.current&&v.current.show({severity:"error",summary:"File Upload",detail:"The file already uploaded!. Please select another file",life:5e3}):(await async function(e,t,n){const i=new FormData;i.append("file",e);const o=await M.bE("/bot/".concat(n,"/").concat(t,"/upload-conversation-media"),i),{conversationMedia:s}=o;(0,k.rv)(t,{conversationMedia:s})}(e.file,h,n),o({success:!0}),s(!0),g(!1),v.current&&v.current.show({severity:"success",summary:"File Upload",detail:"The file uploaded successfully!",life:5e3}))}catch(a){o({success:!1}),i({submit:a.message}),s(!1),g(!1),v.current&&v.current.show({severity:"error",summary:"File Upload",detail:"Not able to upload the file. Try after sometime!",life:5e3})}},children:e=>{let{values:t,errors:n,isSubmitting:o,setFieldValue:c}=e;return(0,N.jsxs)(j.lV,{children:[(0,N.jsxs)(s.Ay,{container:!0,spacing:2,children:[(0,N.jsx)(s.Ay,{item:!0,xs:12,md:12,children:t.file&&(0,N.jsxs)(a.A,{variant:"body2",children:["Selected File: ",t.file.name]})}),(0,N.jsx)(s.Ay,{item:!0,xs:6,md:6,style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end"},children:(0,N.jsx)(j.D0,{type:"file",name:"file",as:e=>{let{field:t}=e;return(0,N.jsx)(C.A,{children:(0,N.jsxs)(p.A,{variant:"contained",component:"label",htmlFor:"file-input",size:"large",children:["SelectFile",(0,N.jsx)("input",(0,i.A)((0,i.A)({},t),{},{type:"file",id:"file-input",style:{display:"none"},onChange:e=>{c("file",e.currentTarget.files[0])},accept:f}))]})})}})}),(0,N.jsx)(s.Ay,{item:!0,xs:6,md:6,children:(0,N.jsx)(C.A,{children:(0,N.jsx)(p.A,{variant:"contained",size:"large",type:"submit",disabled:o,children:o?"Uploading...":"Upload"})})})]}),(0,N.jsx)(s.Ay,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:(0,N.jsx)(l.A,{error:!0,id:"helper-text-file-input",children:n.file})})]})}})})})})]})})})]})}function F(e){let{conversationMediaList:t,botId:n,organizationId:r,handleSelection:l,selectedFiles:d,mimeType:u}=e;const[p,h]=(0,o.useState)([]);(0,o.useEffect)(()=>{const e=((e,t)=>e?e.filter(e=>{const{type:n}=e;return!t||("application/pdf"===t?n===t:"image/*"===t?n.startsWith("image/"):"video/*"===t&&n.startsWith("video/"))}):[])(t,u),n=e.map(e=>(0,i.A)((0,i.A)({},e),{},{isSelected:!!d&&d.some(t=>t.url===e.url)}));h(n)},[t,d,u]);const m=e=>{const t=p.map(t=>t.url===e.url?(0,i.A)((0,i.A)({},t),{},{isSelected:!t.isSelected}):t);h(t),l(t)};return(0,N.jsx)(c.A,{children:(0,N.jsxs)(s.Ay,{container:!0,spacing:3,justify:"center",children:[(0,N.jsx)(s.Ay,{item:!0,xs:12,children:p&&0===p.length&&(0,N.jsx)(a.A,{variant:"caption",color:"#FF0000",children:(0,N.jsxs)(s.Ay,{container:!0,spacing:1,children:[(0,N.jsx)(s.Ay,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:(0,N.jsx)(b.A,{style:{fontSize:40}})}),(0,N.jsx)(s.Ay,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:"Conversation Media and Keywords are not uploaded!"})]})})}),p&&p.map((e,t)=>(0,N.jsx)(s.Ay,{item:!0,xs:12,sm:4,lg:3,justify:"center",children:(0,N.jsx)(K,{media:e,botId:n,organizationId:r,onToggleSelection:m,handleSelection:l})},t))]})})}function K(e){let{media:t,botId:n,organizationId:i,onToggleSelection:a,handleSelection:c}=e;const[r,l]=o.useState(!1),d=(0,o.useRef)(null),m=async(e,t,n,i)=>{try{const o={fileName:t,fileUrl:e};await async function(e,t,n){const i=await M.bE("/bot/".concat(t,"/").concat(n,"/delete-conversation-media"),e),{conversationMedia:o}=i;(0,k.rv)(n,{conversationMedia:o})}(o,i,n),d.current&&d.current.show({severity:"success",summary:"File Delete",detail:"The file deleted successfully!",life:5e3})}catch(o){d.current&&d.current.show({severity:"error",summary:"Delete File",detail:"Not able to delete the file. Try after sometime!",life:5e3})}};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(L.y,{ref:d}),(0,N.jsxs)(E.A,{className:"main-card "+(t.isSelected?"card-selected":""),contentSX:{p:2,cursor:"pointer"},children:[(0,N.jsx)(u.A,{style:{padding:"24px 0 0 0",minHeight:"120px",maxHeight:"135px",display:"flex",alignItems:"flex-start",justifyContent:"center"},children:(0,N.jsx)(s.Ay,{container:!0,spacing:3,justifyContent:"center",children:(0,N.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",textAlign:"center"},children:"image"===t.type.split("/")[0]?(0,N.jsxs)("a",{href:t.url,rel:"noreferrer",target:"_blank",title:t.name,children:[(0,N.jsx)("img",{src:t.url,alt:t.name,style:{maxHeight:"100px",margin:"0 auto"}}),(0,N.jsx)("strong",{className:"truncate overflow-hidden whitespace-nowrap py-2",style:{maxWidth:"100px",textOverflow:"ellipsis",display:"inline-block",overflow:"hidden"},children:t.name})]}):"application"===t.type.split("/")[0]?(0,N.jsxs)("a",{href:t.url,rel:"noreferrer",target:"_blank",title:t.name,children:[(0,N.jsx)("img",{src:I,alt:"LivServ",style:{maxHeight:"100px",margin:"0 auto"}}),(0,N.jsx)("strong",{className:"truncate overflow-hidden whitespace-nowrap py-2",style:{maxWidth:"100px",textOverflow:"ellipsis",display:"inline-block",overflow:"hidden"},children:t.name})]}):(0,N.jsxs)("video",{controls:!0,style:{maxWidth:"100%",margin:"0 auto"},children:[(0,N.jsx)("source",{src:t.url,type:"video/mp4"}),(0,N.jsx)("track",{kind:"captions",src:"",srcLang:"en",label:"English"}),"Your browser does not support the video tag."]})})})}),(0,N.jsx)(h.A,{style:{justifyContent:"flex-end",padding:"5px"},children:(0,N.jsxs)(s.Ay,{container:!0,children:[(0,N.jsxs)(s.Ay,{item:!0,xs:3,md:3,children:[(0,N.jsx)(p.A,{size:"small",component:"label",variant:"contained",onClick:()=>l(!0),color:"error",startIcon:(0,N.jsx)(f.A,{fontSize:"small"}),title:"Delete File"}),(0,N.jsxs)(O.A,{title:"Delete file?",open:r,setOpen:l,onConfirm:()=>m(t.url,t.name,n,i),children:["Confirm the deletion of ",t.name,"?"]})]}),(0,N.jsx)(s.Ay,{item:!0,xs:3,md:3,children:(0,N.jsx)(p.A,{size:"small",component:"label",role:void 0,variant:"contained",onClick:()=>{return e=t.url,void window.open(e);var e},startIcon:(0,N.jsx)(x.A,{}),title:"View File"})}),(0,N.jsx)(s.Ay,{item:!0,xs:3,md:3,children:(0,N.jsx)(p.A,{color:"primary",size:"small",component:"label",role:void 0,variant:"contained",onClick:()=>{navigator.clipboard.writeText(t.url).then(()=>{(0,P.i)(!0,"Image URL copied to clipboard!","success")})},startIcon:(0,N.jsx)(g.A,{}),title:"Copy Url"})}),(0,N.jsx)(s.Ay,{item:!0,xs:3,md:3,children:c&&(0,N.jsx)(p.A,{color:t.isSelected?"success":"primary",size:"small",component:"label",role:void 0,variant:"contained",onClick:()=>{a(t)},startIcon:t.isSelected?(0,N.jsx)(v.A,{}):(0,N.jsx)(y.A,{}),title:"Select File"})})]})})]})]})}},26092:(e,t,n)=>{n.d(t,{A:()=>h});n(9950);var i=n(92728),o=n(63464),s=n(40033),a=n(28170),c=n(96319),r=n(59254),l=n(14857),d=n(25333),u=n(44414);const p=(0,r.Ay)(o.A)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)},zIndex:11010}});function h(e){const t=(0,l.A)(),{breakpoints:n}=t,{openPopUpDialog:o,setPopUpDialog:r,setFieldsValues:h,onClose:m=()=>(r(!1),null===h||void 0===h?void 0:h({})),title:A,width:f="70%"}=e;return(0,u.jsxs)(p,{TransitionComponent:i.A,"aria-labelledby":"customized-dialog-title",open:o,PaperProps:{sx:{width:{width:f},[n.down("sm")]:{width:"90%"}}},children:[(0,u.jsx)(s.A,{sx:{m:0,p:2},id:"customized-dialog-title",children:A}),(0,u.jsx)(d.A,{"aria-label":"close",onClick:m,sx:{position:"absolute",right:8,top:8},children:(0,u.jsx)(c.A,{})}),(0,u.jsx)(a.A,{dividers:!0,children:e.children})]})}},32026:(e,t,n)=>{n.d(t,{G6:()=>r,Ke:()=>h,OX:()=>d,PE:()=>p,TZ:()=>m,Yq:()=>c,do:()=>u,qW:()=>l,s8:()=>s,wE:()=>A});var i=n(89379),o=n(44364);function s(e,t){return e.replace(new RegExp("".concat(a(t),"+$")),"")}function a(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function c(e){const t=new Date(e),n=t.getDate(),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],o=t.getFullYear();return"".concat(i," ").concat(n,", ").concat(o)}function r(e,t,n){if(!t&&!e)return n;e=e||{};const o=Array.isArray(e)?[...e]:(0,i.A)({},e);if(t.includes(".")){const i=t.indexOf("."),s=t.substring(0,i),a=t.substring(i+1);o[s]=r(e[s],a,n)}else o[t]=n;return o}function l(e,t){return btoa("".concat(e,"_").concat(t,"_whatsapp_int"))}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t="abcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let i=0;i<e;i++)n+=t.charAt(Math.floor(36*Math.random()));return n}function u(e,t,n){if(!t&&!e)return n;e=e||{};const o=Array.isArray(e)?[...e]:(0,i.A)({},e);if(t.includes(".")){const i=t.indexOf("."),s=t.substring(0,i),a=t.substring(i+1);o[s]=u(e[s],a,n)}else o[t]=n;return o}function p(e,t){const n=new Blob([e],{type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/csv"}),i=document.createElement("a");i.href=URL.createObjectURL(n),i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i)}function h(e,t){return!t||t.startsWith("http")?t:(t.startsWith("/")&&(t=t.substring(1)),"".concat(o.J,"/").concat(e,"/").concat(t))}function m(e){let t=document.querySelector("link[rel~='icon']");t||(t=document.createElement("link"),t.rel="icon",document.getElementsByTagName("head")[0].appendChild(t)),null!==e&&void 0!==e&&e.domain?null!==e&&void 0!==e&&e.favicon&&(t.href=h(null===e||void 0===e?void 0:e.domain,null===e||void 0===e?void 0:e.favicon)):t.href="/favicon.png"}function A(e){null!==e&&void 0!==e&&e.domain?null!==e&&void 0!==e&&e.displayName&&(document.title=null===e||void 0===e?void 0:e.displayName):document.title="LivServ"}},32829:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(79875),o=n(44414);function s(e){let{children:t,type:n}=e;return(0,o.jsx)(i.P.div,{whileHover:{scale:1},whileTap:{scale:.9},children:t})}s.defaultProps={type:"scale"}},44364:(e,t,n)=>{n.d(t,{DX:()=>l,E1:()=>u,J:()=>r,Og:()=>s,Rc:()=>d,jn:()=>i,mB:()=>c,pA:()=>a,pR:()=>o});const i="https://devbackend.livhousing.com:444",o="c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_WEB_SOCKET_AUTH_KEY:"wFSMmt7sfsbNJLabQvVdKNrjga6diuvwuLaD3to2RbQ=",REACT_APP_RVM_BACKEND_URL:"https://devbackend.livhousing.com:444/",REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444",REACT_APP_RVM_WEB_SOCKET_URL:"wss://devbackend.livhousing.com:444/voice/ws"}.TRAINING_MEDIA_MAXSIZE,a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_WEB_SOCKET_AUTH_KEY:"wFSMmt7sfsbNJLabQvVdKNrjga6diuvwuLaD3to2RbQ=",REACT_APP_RVM_BACKEND_URL:"https://devbackend.livhousing.com:444/",REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444",REACT_APP_RVM_WEB_SOCKET_URL:"wss://devbackend.livhousing.com:444/voice/ws"}.CONVERSATION_MEDIA_MAXSIZE,c="AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",r="https://livserv-organizations.s3.ap-south-1.amazonaws.com",l={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_WEB_SOCKET_AUTH_KEY:"wFSMmt7sfsbNJLabQvVdKNrjga6diuvwuLaD3to2RbQ=",REACT_APP_RVM_BACKEND_URL:"https://devbackend.livhousing.com:444/",REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444",REACT_APP_RVM_WEB_SOCKET_URL:"wss://devbackend.livhousing.com:444/voice/ws"}.REACT_APP_NGROK_BACKEND_URL||"https://devbackend.livhousing.com:444",d="https://devbackend.livhousing.com:444/",u="wss://devbackend.livhousing.com:444/voice/ws"},46278:(e,t,n)=>{n.d(t,{A:()=>l});n(9950);var i=n(63464),o=n(40033),s=n(28170),a=n(79739),c=n(10226),r=n(44414);const l=e=>{const{title:t,children:n,open:l,setOpen:d,onConfirm:u}=e;return(0,r.jsxs)(i.A,{open:l,onClose:()=>d(!1),style:{zIndex:1e4},children:[(0,r.jsx)(o.A,{sx:{m:0,p:2},id:"confirm-dialog",children:t}),(0,r.jsx)(s.A,{dividers:!0,children:n}),(0,r.jsxs)(a.A,{children:[(0,r.jsx)(c.A,{size:"large",type:"submit",variant:"contained",color:"secondary",onClick:()=>d(!1),children:"No"}),(0,r.jsx)(c.A,{size:"large",type:"submit",variant:"contained",color:"success",onClick:()=>{d(!1),u()},children:"Yes"})]})]})}},51637:(e,t,n)=>{n.d(t,{A:()=>m});var i=n(89379),o=n(80045),s=n(9950),a=n(14857),c=n(48089),r=n(45180),l=n(82053),d=n(50704),u=n(44414);const p=["border","boxShadow","children","content","contentSX","darkTitle","elevation","secondary","shadow","sx","title"],h={p:2.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},m=(0,s.forwardRef)((e,t)=>{let{border:n=!0,boxShadow:s,children:m,content:A=!0,contentSX:f={},darkTitle:x,elevation:g,secondary:v,shadow:y,sx:b={},title:_}=e,j=(0,o.A)(e,p);const S=(0,a.A)();return s="dark"===S.palette.mode?s||!0:s,(0,u.jsxs)(c.A,(0,i.A)((0,i.A)({elevation:g||0,ref:t},j),{},{sx:(0,i.A)({border:n?"1px solid":"none",borderRadius:2,borderColor:"dark"===S.palette.mode?S.palette.divider:S.palette.grey.A800,boxShadow:!s||n&&"dark"!==S.palette.mode?"inherit":y||S.customShadows.z1,":hover":{boxShadow:s?y||S.customShadows.z1:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:S.typography.fontFamily,fontSize:"0.75rem"}},b),children:[!x&&_&&(0,u.jsx)(r.A,{sx:h,titleTypographyProps:{variant:"subtitle1"},title:_,action:v}),x&&_&&(0,u.jsx)(r.A,{sx:h,title:(0,u.jsx)(l.A,{variant:"h3",children:_}),action:v}),A&&(0,u.jsx)(d.A,{sx:f,children:m}),!A&&m]}))})},92728:(e,t,n)=>{n.d(t,{A:()=>c});var i=n(89379),o=n(9950),s=n(48205),a=n(44414);const c=o.forwardRef(function(e,t){return(0,a.jsx)(s.A,(0,i.A)({direction:"up",ref:t},e))})},93383:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(89379),o=n(80045),s=n(9950),a=n(10226),c=n(46639),r=n(44414);const l=["onClick","disabled","isLoading","children"];const d=function(e){let{onClick:t,disabled:n,isLoading:d,children:u}=e,p=(0,o.A)(e,l);const[h,m]=s.useState(d);return(0,r.jsxs)(a.A,(0,i.A)((0,i.A)({onClick:e=>{if(!t)return;const n=t(e);"function"===typeof(null===n||void 0===n?void 0:n.finally)&&(m(!0),n.finally(()=>m(!1)))},disabled:h||d||n},p),{},{children:[(h||d)&&(0,r.jsx)(c.A,{size:16,color:"primary",style:{marginRight:"10px"}}),u]}))}},98415:(e,t,n)=>{n.d(t,{Ci:()=>p,I4:()=>u,TF:()=>l,gI:()=>c,gR:()=>m,jo:()=>d,rv:()=>A,so:()=>h,yo:()=>r});var i=n(89379),o=n(8478),s=n(33340),a=n(32026);async function c(e){const{organization:{websiteUrl:t,_id:n}}=s.nc.getState(),i={organizationId:n,websiteUrl:t,botName:e,botDesign:{visitorMessageLogo:{name:"",url:""},botMessageLogo:{name:"",url:""},botChatButton:{name:"",url:""},botLogo:{name:"",url:""},backgroundColor:"#e7a654",textColor:"#ffffff",dimensions:{heightInPixel:"500px",heightInPercent:"70%",widthInPixel:"350px",widthInPercent:"25%"},botLogoDimensions:{heightInPixel:"30px",heightInPercent:"100%",widthInPixel:"30px",widthInPercent:"100%"}}};f(await o.bE("/bot/".concat(n),i),!0)}async function r(e,t,n){const{organizationId:i}=s.nc.getState();if(!i||!e)throw new Error("Bot details not found");const a=await o.yJ("/bot/".concat(i,"/").concat(e),t);return f(a,n),a}async function l(e){const{organizationId:t,selectedBotId:n}=s.nc.getState();if(!t||!e)throw new Error("Bot details not found");const{deleted:a}=await o.TF("/bot/".concat(t,"/").concat(e));if(a){let{botsMap:e,botsList:t}=s.nc.getState();e=(0,i.A)({},e),t=[...t],delete e[a];const o=t.findIndex(e=>e._id===a);o>=0&&t.splice(o,1);const r={botsMap:e,botsList:t};var c;if(n===a)r.selectedBotId=(null===(c=t[0])||void 0===c?void 0:c._id)||null;s.nc.setState(r)}return!!a}function d(e,t){let{botDesign:n}=s.nc.getState();return n=(0,i.A)((0,i.A)({},n),t),r(e,{botDesign:n})}async function u(e,t){const{organizationId:n,selectedBotId:i}=s.nc.getState(),a=new FormData;a.append("file",t);const c=await o.bE("/bot/".concat(n,"/").concat(i,"/update-logo/").concat(e),a);return A(i,c),c["botDesign.".concat(e)]}async function p(e){const{organizationId:t,selectedBotId:n}=s.nc.getState(),i=await o.TF("/bot/".concat(t,"/").concat(n,"/update-logo/").concat(e));return A(n,i),i["botDesign.".concat(e)]}function h(e,t){return r(e,{botName:t})}function m(e,t){let{botSettings:n={}}=s.nc.getState();return n=(0,i.A)((0,i.A)({},n),t),r(e,{botSettings:n})}function A(e,t){const{botsMap:n}=s.nc.getState(),i=n[e];if(!i)return;f(Object.keys(t).reduce((e,n)=>(0,a.G6)(e,n,t[n]),i))}function f(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e._id;let{botsMap:o,botsList:a}=s.nc.getState();o=(0,i.A)((0,i.A)({},o),{},{[n]:e}),a=[...a];const c=a.findIndex(e=>e._id===n);c>=0?a[c]=e:a.push(e);const r={botsMap:o,botsList:a};t&&(r.selectedBotId=n),s.nc.setState(r)}}}]);