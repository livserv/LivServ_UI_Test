"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[1987],{32829(e,n,t){t.d(n,{A:()=>o});var a=t(79875),i=t(44414);function o(e){let{children:n,type:t}=e;return(0,i.jsx)(a.P.div,{whileHover:{scale:1},whileTap:{scale:.9},children:n})}o.defaultProps={type:"scale"}},46278(e,n,t){t.d(n,{A:()=>d});t(9950);var a=t(63464),i=t(40033),o=t(28170),r=t(79739),l=t(10226),s=t(44414);const d=e=>{const{title:n,children:t,open:d,setOpen:c,onConfirm:u}=e;return(0,s.jsxs)(a.A,{open:d,onClose:()=>c(!1),style:{zIndex:1e4},children:[(0,s.jsx)(i.A,{sx:{m:0,p:2},id:"confirm-dialog",children:n}),(0,s.jsx)(o.A,{dividers:!0,children:t}),(0,s.jsxs)(r.A,{children:[(0,s.jsx)(l.A,{size:"large",type:"submit",variant:"contained",color:"secondary",onClick:()=>c(!1),children:"No"}),(0,s.jsx)(l.A,{size:"large",type:"submit",variant:"contained",color:"success",onClick:()=>{c(!1),u()},children:"Yes"})]})]})}},92728(e,n,t){t.d(n,{A:()=>l});var a=t(89379),i=t(9950),o=t(48205),r=t(44414);const l=i.forwardRef(function(e,n){return(0,r.jsx)(o.A,(0,a.A)({direction:"up",ref:n},e))})},51637(e,n,t){t.d(n,{A:()=>m});var a=t(89379),i=t(80045),o=t(9950),r=t(14857),l=t(48089),s=t(45180),d=t(82053),c=t(50704),u=t(44414);const p=["border","boxShadow","children","content","contentSX","darkTitle","elevation","secondary","shadow","sx","title"],h={p:2.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},m=(0,o.forwardRef)((e,n)=>{let{border:t=!0,boxShadow:o,children:m,content:g=!0,contentSX:x={},darkTitle:A,elevation:j,secondary:b,shadow:f,sx:y={},title:v}=e,C=(0,i.A)(e,p);const S=(0,r.A)();return o="dark"===S.palette.mode?o||!0:o,(0,u.jsxs)(l.A,(0,a.A)((0,a.A)({elevation:j||0,ref:n},C),{},{sx:(0,a.A)({border:t?"1px solid":"none",borderRadius:2,borderColor:"dark"===S.palette.mode?S.palette.divider:S.palette.grey.A800,boxShadow:!o||t&&"dark"!==S.palette.mode?"inherit":f||S.customShadows.z1,":hover":{boxShadow:o?f||S.customShadows.z1:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:S.typography.fontFamily,fontSize:"0.75rem"}},y),children:[!A&&v&&(0,u.jsx)(s.A,{sx:h,titleTypographyProps:{variant:"subtitle1"},title:v,action:b}),A&&v&&(0,u.jsx)(s.A,{sx:h,title:(0,u.jsx)(d.A,{variant:"h3",children:v}),action:b}),g&&(0,u.jsx)(c.A,{sx:x,children:m}),!g&&m]}))})},26092(e,n,t){t.d(n,{A:()=>h});t(9950);var a=t(92728),i=t(63464),o=t(40033),r=t(28170),l=t(96319),s=t(14857),d=t(59254),c=t(25333),u=t(44414);const p=(0,d.Ay)(i.A)(e=>{let{theme:n}=e;return{"& .MuiDialogContent-root":{padding:n.spacing(2)},"& .MuiDialogActions-root":{padding:n.spacing(1)},zIndex:11010}});function h(e){const n=(0,s.A)(),{breakpoints:t}=n,{openPopUpDialog:i,setPopUpDialog:d,setFieldsValues:h,onClose:m=()=>(d(!1),null===h||void 0===h?void 0:h({})),title:g,width:x="70%"}=e;return(0,u.jsxs)(p,{TransitionComponent:a.A,"aria-labelledby":"customized-dialog-title",open:i,PaperProps:{sx:{width:{width:x},[t.down("sm")]:{width:"90%"}}},children:[(0,u.jsx)(o.A,{sx:{m:0,p:2},id:"customized-dialog-title",children:g}),(0,u.jsx)(c.A,{"aria-label":"close",onClick:m,sx:{position:"absolute",right:8,top:8},children:(0,u.jsx)(l.A,{})}),(0,u.jsx)(r.A,{dividers:!0,children:e.children})]})}},93383(e,n,t){t.d(n,{A:()=>c});var a=t(89379),i=t(80045),o=t(9950),r=t(10226),l=t(46639),s=t(44414);const d=["onClick","disabled","isLoading","children"];const c=function(e){let{onClick:n,disabled:t,isLoading:c,children:u}=e,p=(0,i.A)(e,d);const[h,m]=o.useState(c);return(0,s.jsxs)(r.A,(0,a.A)((0,a.A)({onClick:e=>{if(!n)return;const t=n(e);"function"===typeof(null===t||void 0===t?void 0:t.finally)&&(m(!0),t.finally(()=>m(!1)))},disabled:h||c||t},p),{},{children:[(h||c)&&(0,s.jsx)(l.A,{size:16,color:"primary",style:{marginRight:"10px"}}),u]}))}},61987(e,n,t){t.r(n),t.d(n,{default:()=>ne});var a=t(9950),i=t(78317),o=t(60899),r=t(82053),l=t(10226),s=t(53065),d=t(2660),c=t(24516),u=t(50704),p=t(59254),h=t(80417),m=t(79046),g=t(33092),x=t(92613),A=t(15942),j=t(7999),b=t(57988),f=t(25333),y=t(69935),v=t(61467),C=t(29714),S=t(33340),I=t(70855),k=t(43983),w=t(95189),D=t.n(w),P=t(26092),_=t(97601),T=t(51637),N=t(46278),U=t(32829),E=t(93383),R=t(81616),z=t(3788),L=t(44414);const B=function(e){let{botId:n,organizationId:t,setPopUpDialog:a}=e;return(0,L.jsx)(o.Ay,{item:!0,xs:12,children:(0,L.jsx)(v.l1,{initialValues:{crmCallBackUrl:""},validationSchema:C.Ik().shape({crmCallBackUrl:C.Yj().url("Enter valid url!").required("CRM Callback URL is required")}),onSubmit:async(e,i)=>{let{setErrors:o,setStatus:r,setSubmitting:l}=i;try{const i={botId:n,organizationId:t,callbackURL:e.crmCallBackUrl,channelId:"CRM_Callback_123",channelName:"CRM_Callback"};await(0,k.Ay)(i),r({success:!0}),l(!0),a(!1),(0,_.i)(!0,"The CRM callback url added successfully!","success")}catch(s){r({success:!1}),o({submit:s.message}),l(!1),(0,_.i)(!0,"Not able to CRM callback url. Try after sometime!","error")}},children:e=>{let{errors:n,handleBlur:t,handleChange:a,handleSubmit:i,isSubmitting:r,touched:l,values:s}=e;return(0,L.jsx)("form",{noValidate:!0,onSubmit:i,children:(0,L.jsxs)(o.Ay,{container:!0,spacing:1,children:[(0,L.jsx)(o.Ay,{item:!0,xs:12,md:12,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"email-login",children:"CRM callback URL"}),(0,L.jsx)(d.A,{id:"crmCallBackUrl",type:"url",defaultValue:s.crmCallBackUrl,name:"crmCallBackUrl",onBlur:t,onChange:a,fullWidth:!0,autoComplete:"off",error:Boolean(l.crmCallBackUrl&&n.crmCallBackUrl)}),l.crmCallBackUrl&&n.crmCallBackUrl&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-crm-url",children:n.crmCallBackUrl})]})}),n.submit&&(0,L.jsx)(o.Ay,{item:!0,xs:12,children:(0,L.jsx)(c.A,{error:!0,children:n.submit})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,container:!0,justifyContent:"flex-end",children:(0,L.jsx)(U.A,{children:(0,L.jsx)(E.A,{isLoading:r,disabled:r,color:"primary",size:"large",type:"submit",variant:"contained",children:"Add"})})})]})})}})})};var O=t(89379),F=t(44364),M=t(32026);function W(e){"Enter"===e.key&&e.preventDefault()}const K=function(e){let{botId:n,organizationId:t,setPopUpDialog:a,whatsappIntegrationObj:i,edit:r}=e;return(0,L.jsx)(o.Ay,{item:!0,xs:12,children:(0,L.jsx)(v.l1,{initialValues:{webHookUrl:"".concat(F.DX,"/whatsapp/").concat(t,"/").concat(n,"/").concat(null===i||void 0===i?void 0:i._id,"/entrypoint"),webHookSecret:(0,M.qW)(t,n),appId:(null===i||void 0===i?void 0:i.appId)||"",appName:(null===i||void 0===i?void 0:i.appName)||"",phoneNumberId:(null===i||void 0===i?void 0:i.phoneNumberId)||"",verificationToken:(null===i||void 0===i?void 0:i.verificationToken)||"",channelId:"whatsapp_123",channelName:"whatsapp",source:(null===i||void 0===i?void 0:i.source)||"",campaignData:null!==i&&void 0!==i&&i.campaignData?JSON.stringify(i.campaignData,null,2):"",leadCategory:(null===i||void 0===i?void 0:i.leadCategory)||"preSale",leadUpgradeToPreSaleCount:(null===i||void 0===i?void 0:i.leadUpgradeToPreSaleCount)||""},validationSchema:C.Ik().shape({appId:C.ai().required("App ID must be a number"),appName:C.Yj().required("App name is required"),phoneNumberId:C.ai().min(10,"Please enter a valid phone number id").required("Phone number Id is required"),source:C.ai().min(10,"Please enter a valid phone number (eg:- 919988776655)").required("Phone number is required"),verificationToken:C.Yj().required("Access Token  is required"),leadUpgradeToPreSaleCount:C.gl().test("is-null-or-positive","Categorize to Presale after no of conversations must be greater than 0",e=>void 0===e||null===e||e>0),campaignData:C.Yj().test("is-valid-json","Campaign Data must be a valid JSON object",e=>{if(!e||""===e.trim())return!0;try{const n=JSON.parse(e);return"object"===typeof n&&!Array.isArray(n)}catch(n){return!1}})}),onSubmit:async(e,n)=>{let{setErrors:t,setStatus:o,setSubmitting:r}=n;try{let n=(0,O.A)({},e);e.campaignData&&""!==e.campaignData.trim()?n.campaignData=JSON.parse(e.campaignData):n.campaignData=null;const t=null===i||void 0===i?void 0:i._id;t&&(n.objId=t),await(0,k.u4)(n),o({success:!0}),r(!0),a(!1),(0,_.i)(!0,"The WhatsApp integration added successfully!","success")}catch(l){o({success:!1}),t({submit:l.message}),r(!1),(0,_.i)(!0,"Not able to activate WhatsApp integration. Try after sometime!","error")}},children:e=>{let{errors:n,handleBlur:t,handleChange:a,handleSubmit:i,isSubmitting:l,touched:s,values:u}=e;return(0,L.jsx)("form",{noValidate:!0,onSubmit:i,children:(0,L.jsxs)(o.Ay,{container:!0,spacing:1,children:[(0,L.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"webhook-url",children:"Webhook Callback URL *"}),(0,L.jsx)(d.A,{id:"webHookUrl",type:"url",defaultValue:u.webHookUrl,name:"webHookUrl",onBlur:t,onChange:a,fullWidth:!0,autoComplete:"off",onKeyDown:W,disabled:!0,onCopy:e=>e.preventDefault(),onPaste:e=>e.preventDefault(),error:Boolean(s.webHookUrl&&n.webHookUrl)}),s.webHookUrl&&n.webHookUrl&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-webHookUrl",children:n.webHookUrl})]})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"webHookSecret",children:"Webhook Verify token *"}),(0,L.jsx)(D(),{text:u.webHookSecret,onCopy:()=>(0,_.i)(!0,"Webhook Verify Token copied to clipboard","success"),children:(0,L.jsx)(d.A,{id:"webHookSecret",type:"url",defaultValue:u.webHookSecret,name:"webHookSecret",onBlur:t,onChange:a,fullWidth:!0,autoComplete:"off",onKeyDown:W,error:Boolean(s.webHookSecret&&n.webHookSecret)})}),s.webHookSecret&&n.webHookSecret&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-webHookSecret",children:n.webHookSecret})]})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"app-id",children:"App ID *"}),(0,L.jsx)(d.A,{id:"appId",type:"text",defaultValue:u.appId,name:"appId",onBlur:t,onChange:a,fullWidth:!0,autoComplete:"off",onKeyDown:W,error:Boolean(s.appId&&n.appId)}),s.appId&&n.appId&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-appId",children:n.appId})]})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"app-name",children:"App Name *"}),(0,L.jsx)(d.A,{id:"appName",type:"text",defaultValue:u.appName,name:"appName",onBlur:t,onChange:a,fullWidth:!0,autoComplete:"off",onKeyDown:W,error:Boolean(s.appName&&n.appName)}),s.appName&&n.appName&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-appName",children:n.appName})]})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"phone-number",children:"Phone Number ID*"}),(0,L.jsx)(d.A,{id:"phoneNumberId",type:"text",defaultValue:u.phoneNumberId,name:"phoneNumberId",onBlur:t,onChange:a,fullWidth:!0,autoComplete:"off",onKeyDown:W,error:Boolean(s.phoneNumberId&&n.phoneNumberId)}),s.phoneNumberId&&n.phoneNumberId&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-phoneNumberId",children:n.phoneNumberId})]})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"verification-token",children:"Access Token *"}),(0,L.jsx)(d.A,{id:"verificationToken",type:"phone",defaultValue:u.verificationToken,name:"verificationToken",onBlur:t,onChange:a,fullWidth:!0,autoComplete:"off",onKeyDown:W,error:Boolean(s.verificationToken&&n.verificationToken)}),s.verificationToken&&n.verificationToken&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-verificationToken",children:n.verificationToken})]})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"lead-category",children:"Initial Lead Category"}),(0,L.jsxs)("select",{id:"leadCategory",title:"Select Category",style:{height:"45px",border:"1px solid #d9d9d9",borderRadius:"5px"},value:u.leadCategory||"preSale",onBlur:t,onChange:a,children:[(0,L.jsx)("option",{value:"preSale",children:"Presale"}),(0,L.jsx)("option",{value:"general",children:"General"}),(0,L.jsx)("option",{value:"others",children:"Others"})]}),s.leadCategory&&n.leadCategory&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-leadCategory",children:n.leadCategory})]})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"categorize-ToPresale-After",children:"Categorize to Presale after conversations"}),(0,L.jsx)(d.A,{id:"leadUpgradeToPreSaleCount",type:"text",defaultValue:u.leadUpgradeToPreSaleCount,name:"leadUpgradeToPreSaleCount",onBlur:t,onChange:a,fullWidth:!0,autoComplete:"off",onKeyDown:W,error:Boolean(s.leadUpgradeToPreSaleCount&&n.leadUpgradeToPreSaleCount)}),s.leadUpgradeToPreSaleCount&&n.leadUpgradeToPreSaleCount&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-leadUpgradeToPreSaleCount",children:n.leadUpgradeToPreSaleCount})]})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"source-phone-number",children:"Phone Number*"}),(0,L.jsx)(d.A,{id:"source",type:"text",defaultValue:u.source,name:"source",onBlur:t,onChange:a,fullWidth:!0,autoComplete:"off",onKeyDown:W,error:Boolean(s.source&&n.source)}),s.source&&n.source&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-source",children:n.source})]})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"campaign-data",children:"Campaign Data"}),(0,L.jsx)(d.A,{id:"campaignData",type:"text",defaultValue:u.campaignData,name:"campaignData",multiline:!0,rows:4,onBlur:t,onChange:a,fullWidth:!0,autoComplete:"off",onKeyDown:W,placeholder:"{ 'source':'google', 'secondarySource':'chat' }",error:Boolean(s.campaignData&&n.campaignData)}),s.campaignData&&n.campaignData&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-campaignData",children:n.campaignData})]})}),n.submit&&(0,L.jsx)(o.Ay,{item:!0,xs:12,children:(0,L.jsx)(c.A,{error:!0,children:n.submit})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,container:!0,justifyContent:"flex-end",children:(0,L.jsx)(U.A,{children:(0,L.jsx)(E.A,{isLoading:l,disabled:l,color:"primary",size:"large",type:"submit",variant:"contained",children:r?"Edit":"Add"})})})]})})}})})};var V=t(74745),H=t(47813);const q=function(e){var n,t,a,i,r,l,s,u,p,h,m,g,x,A,j,b,f,y,v,C,S,I,k,w;let{admins:D,index:P,handleBlur:_,handleChange:T,errors:N,touched:U,remove:E}=e;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(o.Ay,{container:!0,spacing:1,children:[(0,L.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:3,lg:3,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"admins.".concat(P,".adminName"),children:"Admin Name"}),(0,L.jsx)(d.A,{id:"admins.".concat(P,".adminName"),type:"text",value:D.adminName,name:"admins.".concat(P,".adminName"),autoComplete:"off",onBlur:_,onChange:T,fullWidth:!0,disabled:0===P,error:Boolean((null===(n=U.admins)||void 0===n||null===(t=n[P])||void 0===t?void 0:t.adminName)&&(null===(a=N.adminss)||void 0===a||null===(i=a[P])||void 0===i?void 0:i.adminName))}),(null===(r=U.admins)||void 0===r||null===(l=r[P])||void 0===l?void 0:l.adminName)&&(null===(s=N.admins)||void 0===s||null===(u=s[P])||void 0===u?void 0:u.adminName)&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-admins.".concat(P,".adminName"),children:N.admins[P].adminName})]})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:3,lg:3,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"admins.".concat(P,".role"),children:"Role"}),(0,L.jsx)(d.A,{id:"admins.".concat(P,".role"),type:"text",value:D.role,name:"admins.".concat(P,".role"),autoComplete:"off",onBlur:_,onChange:T,fullWidth:!0,disabled:0===P,error:Boolean((null===(p=U.admins)||void 0===p||null===(h=p[P])||void 0===h?void 0:h.role)&&(null===(m=N.admins)||void 0===m||null===(g=m[P])||void 0===g?void 0:g.role))}),(null===(x=U.admins)||void 0===x||null===(A=x[P])||void 0===A?void 0:A.role)&&(null===(j=N.admins)||void 0===j||null===(b=j[P])||void 0===b?void 0:b.role)&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-role.".concat(P,".role"),children:N.admins[P].role})]})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:5,lg:5,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"admins.".concat(P,".email"),children:"Email"}),(0,L.jsx)(d.A,{id:"admins.".concat(P,".email"),type:"text",value:D.email,name:"admins.".concat(P,".email"),autoComplete:"off",onBlur:_,onChange:T,fullWidth:!0,disabled:0===P,error:Boolean((null===(f=U.admins)||void 0===f||null===(y=f[P])||void 0===y?void 0:y.email)&&(null===(v=N.admins)||void 0===v||null===(C=v[P])||void 0===C?void 0:C.email))}),(null===(S=U.admins)||void 0===S||null===(I=S[P])||void 0===I?void 0:I.email)&&(null===(k=N.admins)||void 0===k||null===(w=k[P])||void 0===w?void 0:w.email)&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-email.".concat(P,".email"),children:N.admins[P].email})]})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:1,lg:1,children:0!=P&&(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"admins.".concat(P,".delete"),children:"Delete"}),(0,L.jsx)(H.A,{sx:{cursor:"pointer",color:"#ee2a2a"},onClick:()=>E(P)})]})})]}),(0,L.jsx)(V.A,{sx:{mt:2,mb:2}})]})};var J=t(41507);const G=function(e){let{organizationId:n}=e;const t={admins:(0,S.nc)(e=>{var n;return null===(n=e.organization)||void 0===n?void 0:n.admins})||[]},a=new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),i=C.Ik().shape({admins:C.YO().of(C.Ik().shape({adminName:C.Yj().required("Admin Name is required"),role:C.Yj().required("Role is required"),email:C.Yj().trim().required("Email is required").email("Invalid email id").matches(a,"Invalid email id")}))});return(0,L.jsx)(T.A,{contentSX:{p:2.25},children:(0,L.jsxs)(u.A,{style:{padding:0},children:[(0,L.jsxs)(r.A,{variant:"h6",children:[(0,L.jsx)("strong",{children:"Lead emails are sending to below given email ids"}),(0,L.jsx)("br",{}),(0,L.jsx)("br",{})]}),(0,L.jsx)(v.l1,{initialValues:t,onSubmit:async(e,t)=>{let{setErrors:a,setStatus:i,setSubmitting:o}=t;try{o(!0),await(0,J.L_)(e,n),i({success:!0})}catch(r){i({success:!1}),a({submit:r.message}),o(!1),alertSnackbar(!0,r.message,"error")}},validationSchema:i,children:e=>{let{errors:n,handleBlur:t,handleChange:a,handleSubmit:i,touched:r,values:s,setFieldValue:d,isSubmitting:c}=e;return(0,L.jsx)("form",{onSubmit:e=>{i(e)},children:(0,L.jsx)(v.ED,{name:"admins",children:e=>{let{push:i,remove:u}=e;return(0,L.jsxs)(L.Fragment,{children:[s.admins.map((e,i)=>(0,L.jsx)(q,{admins:e,index:i,handleBlur:t,handleChange:a,errors:n,touched:r,remove:e=>{u(e);const n=s.admins.filter((n,t)=>t!==e).map((e,n)=>(0,O.A)((0,O.A)({},e),{},{itemNo:n+1}));d("admins",n)}},i)),(0,L.jsxs)(o.Ay,{container:!0,justifyContent:"flex-end",children:[(0,L.jsx)(o.Ay,{item:!0,children:(0,L.jsx)(l.A,{sx:{marginLeft:2},variant:"contained",size:"large",onClick:()=>{i({adminName:"",role:"",email:""})},children:"Add Email"})}),(0,L.jsx)(o.Ay,{item:!0,sx:{marginLeft:2},children:(0,L.jsx)(U.A,{children:(0,L.jsx)(E.A,{isLoading:c,disabled:c,color:"primary",size:"large",type:"submit",variant:"contained",id:"updateEmailsBtn",children:"Save Changes"})})})]})]})}})})}})]})})};function Y(e){"Enter"===e.key&&e.preventDefault()}const X=function(e){let{botId:n,organizationId:t,setPopUpDialog:a,gupshupIntegrationObj:i,edit:r}=e;return(0,L.jsx)(o.Ay,{item:!0,xs:12,children:(0,L.jsx)(v.l1,{initialValues:{webHookUrl:"".concat(F.DX,"/gupshup/").concat(t,"/").concat(n,"/").concat(null===i||void 0===i?void 0:i._id,"/entrypoint"),appId:(null===i||void 0===i?void 0:i.appId)||"",appName:(null===i||void 0===i?void 0:i.appName)||"",phoneNumberId:(null===i||void 0===i?void 0:i.phoneNumberId)||"",channelId:"gupshup_123",channelName:"gupshup",campaignData:null!==i&&void 0!==i&&i.campaignData?JSON.stringify(i.campaignData,null,2):"",leadCategory:(null===i||void 0===i?void 0:i.leadCategory)||"preSale",leadUpgradeToPreSaleCount:(null===i||void 0===i?void 0:i.leadUpgradeToPreSaleCount)||""},validationSchema:C.Ik().shape({appId:C.Yj().required("App ID must is required"),appName:C.Yj().required("App name is required"),phoneNumberId:C.ai().min(10,"Please enter a valid phone number id").required("Phone number is required"),leadUpgradeToPreSaleCount:C.gl().test("is-null-or-positive","Categorize to Presale after no of conversations must be greater than 0",e=>void 0===e||null===e||e>0),campaignData:C.Yj().test("is-valid-json","Campaign Data must be a valid JSON object",e=>{if(!e||""===e.trim())return!0;try{const n=JSON.parse(e);return"object"===typeof n&&!Array.isArray(n)}catch(n){return!1}})}),onSubmit:async(e,n)=>{let{setErrors:t,setStatus:o,setSubmitting:r}=n;try{let n=(0,O.A)({},e);e.campaignData&&""!==e.campaignData.trim()?n.campaignData=JSON.parse(e.campaignData):n.campaignData=null;(null===i||void 0===i?void 0:i._id)&&(n.objId=i),await(0,k.u4)(n),o({success:!0}),r(!0),a(!1),(0,_.i)(!0,"The Gupshup integration added successfully!","success")}catch(l){o({success:!1}),t({submit:l.message}),r(!1),(0,_.i)(!0,"Not able to activate Gupshup integration. Try after sometime!","error")}},children:e=>{let{errors:n,handleBlur:t,handleChange:a,handleSubmit:i,isSubmitting:l,touched:s,values:u}=e;return(0,L.jsx)("form",{noValidate:!0,onSubmit:i,children:(0,L.jsxs)(o.Ay,{container:!0,spacing:1,children:[(0,L.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"webhook-url",children:"Gupshup Callback URL *"}),(0,L.jsx)(d.A,{id:"webHookUrl",type:"url",defaultValue:u.webHookUrl,name:"webHookUrl",onBlur:t,onChange:a,fullWidth:!0,autoComplete:"off",disabled:!0,onKeyDown:Y,error:Boolean(s.webHookUrl&&n.webHookUrl),onCopy:e=>e.preventDefault(),onPaste:e=>e.preventDefault()}),s.webHookUrl&&n.webHookUrl&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-webHookUrl",children:n.webHookUrl})]})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"app-id",children:"Gupshup App ID *"}),(0,L.jsx)(d.A,{id:"appId",type:"appId",defaultValue:u.appId,name:"appId",onBlur:t,onChange:a,fullWidth:!0,autoComplete:"off",onKeyDown:Y,error:Boolean(s.appId&&n.appId)}),s.appId&&n.appId&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-appId",children:n.appId})]})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"app-name",children:"Gupshup App Name *"}),(0,L.jsx)(d.A,{id:"appName",type:"url",defaultValue:u.appName,name:"appName",onBlur:t,onChange:a,fullWidth:!0,autoComplete:"off",onKeyDown:Y,error:Boolean(s.appName&&n.appName)}),s.appName&&n.appName&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-appName",children:n.appName})]})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"phone-number",children:"Phone Number *"}),(0,L.jsx)(d.A,{id:"phoneNumberId",type:"number",defaultValue:u.phoneNumberId,name:"phoneNumberId",onBlur:t,onChange:a,fullWidth:!0,autoComplete:"off",onKeyDown:Y,error:Boolean(s.phoneNumberId&&n.phoneNumberId)}),s.phoneNumberId&&n.phoneNumberId&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-phoneNumberId",children:n.phoneNumberId})]})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"lead-category",children:"Initial Lead Category"}),(0,L.jsxs)("select",{id:"leadCategory",title:"Select Category",style:{height:"45px",border:"1px solid #d9d9d9",borderRadius:"5px"},value:u.leadCategory||"preSale",onBlur:t,onChange:a,children:[(0,L.jsx)("option",{value:"preSale",children:"Presale"}),(0,L.jsx)("option",{value:"general",children:"General"}),(0,L.jsx)("option",{value:"others",children:"Others"})]}),s.leadCategory&&n.leadCategory&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-leadCategory",children:n.leadCategory})]})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"categorize-ToPresale-After",children:"Categorize to Presale after conversations"}),(0,L.jsx)(d.A,{id:"leadUpgradeToPreSaleCount",type:"text",defaultValue:u.leadUpgradeToPreSaleCount,name:"leadUpgradeToPreSaleCount",onBlur:t,onChange:a,fullWidth:!0,autoComplete:"off",onKeyDown:Y,error:Boolean(s.leadUpgradeToPreSaleCount&&n.leadUpgradeToPreSaleCount)}),s.leadUpgradeToPreSaleCount&&n.leadUpgradeToPreSaleCount&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-leadUpgradeToPreSaleCount",children:n.leadUpgradeToPreSaleCount})]})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,L.jsxs)(R.A,{spacing:1,children:[(0,L.jsx)(z.A,{htmlFor:"campaign-data",children:"Campaign Data"}),(0,L.jsx)(d.A,{id:"campaignData",type:"text",defaultValue:u.campaignData,name:"campaignData",multiline:!0,rows:4,onBlur:t,onChange:a,fullWidth:!0,autoComplete:"off",onKeyDown:Y,placeholder:"{ 'source':'google', 'secondarySource':'chat' }",error:Boolean(s.campaignData&&n.campaignData)}),s.campaignData&&n.campaignData&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-campaignData",children:n.campaignData})]})}),n.submit&&(0,L.jsx)(o.Ay,{item:!0,xs:12,children:(0,L.jsx)(c.A,{error:!0,children:n.submit})}),(0,L.jsx)(o.Ay,{item:!0,xs:12,container:!0,justifyContent:"flex-end",children:(0,L.jsx)(U.A,{children:(0,L.jsx)(E.A,{isLoading:l,disabled:l,color:"primary",size:"large",type:"submit",variant:"contained",children:r?"Edit":"Add"})})})]})})}})})};var Q=t(37324),Z=t(16497),$=t(98415);const ee=(0,p.Ay)(h.A)(e=>{let{theme:n}=e;return{position:"fixed","#trainingDocumentsSpeedDial &":{"&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight":{left:"auto",right:n.spacing(2)},"&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft":{right:"auto",left:n.spacing(2)}}}});const ne=function(){var e;const[n]=(0,I.G)(),t=(0,S.nc)(e=>e.botsList),l=t.find(e=>e._id===n),s=(0,S.nc)(e=>e.organizationId),d=(0,S.nc)(e=>e.isSuperUser);a.useEffect(()=>{(async()=>{const e={organizationId:s,botId:n};try{await(0,k.Yl)(e)}catch(t){(0,_.i)(!0,"Not able to fetch integrations details. Try after sometime!","error")}})()},[n,s,null===l||void 0===l?void 0:l.sendLeadToCrm]);const c=null===(e=t.find(e=>e._id===n))||void 0===e?void 0:e.integrations;return(0,L.jsxs)(i.A,{children:[(0,L.jsxs)(o.Ay,{container:!0,spacing:3,children:[(0,L.jsxs)(o.Ay,{item:!0,xs:11,children:[(0,L.jsx)(r.A,{variant:"h5",children:"Integrations"}),(0,L.jsx)("br",{})]}),(0,L.jsx)(o.Ay,{item:!0,xs:1,sx:{position:"relative"},id:"trainingDocumentsSpeedDial",children:(0,L.jsx)(te,{botId:n,organizationId:s,integrations:c})})]}),(0,L.jsxs)(o.Ay,{container:!0,spacing:3,children:[c&&c.map((e,n)=>"callConnect_123"!==e.channelId&&(0,L.jsx)(o.Ay,{item:!0,xs:12,children:(0,L.jsx)(ae,{integrationObj:e,bot:l})},n)),d&&(0,L.jsx)(o.Ay,{item:!0,xs:12,children:(0,L.jsx)(G,{organizationId:s})})]})]})};function te(e){let{botId:n,organizationId:t,integrations:i}=e;const o=(0,S.nc)(e=>e.isSuperUser);let r=null;void 0!==i&&(r=i.find(e=>"CRM_Callback"===e.channelName));const[l,s]=a.useState(!1),[d,c]=a.useState(!1),[u,p]=a.useState(!1),h=[{icon:(0,L.jsx)(x.A,{style:{fill:"#45B735"}}),name:"WhatsApp integration",method:()=>{s(!0)}},{icon:(0,L.jsx)(A.A,{style:{fill:"#7476EF"}}),name:"Add crm callback url",method:()=>{c(!0)}},{icon:(0,L.jsx)(x.A,{style:{fill:"#7476EF"}}),name:"Gupshup Integration",method:()=>{p(!0)}}],j=o?h:h.filter(e=>"Gupshup Integration"!==e.name);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(ee,{ariaLabel:"Integration Url",hidden:!1,icon:(0,L.jsx)(m.A,{}),direction:"down",sx:{"& .MuiFab-primary":{width:40,height:40}},children:j.map(e=>(0,L.jsx)(g.A,{icon:e.icon,tooltipTitle:e.name,onClick:e.method},e.name))}),(0,L.jsx)(P.A,{openPopUpDialog:l,setPopUpDialog:s,title:"WhatsApp integration",children:(0,L.jsx)(K,{botId:n,organizationId:t,setPopUpDialog:s})}),(0,L.jsx)(P.A,{openPopUpDialog:d,setPopUpDialog:c,title:"Add CRM callback URL",children:r?"The CRM Callback URL has been successfully configured.":(0,L.jsx)(B,{botId:n,organizationId:t,setPopUpDialog:c})}),(0,L.jsx)(P.A,{openPopUpDialog:u,setPopUpDialog:p,title:"Gupshup integration",children:(0,L.jsx)(X,{botId:n,organizationId:t,setPopUpDialog:p})})]})}function ae(e){let{integrationObj:n,bot:t}=e;const[i,p]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!1),[A,S]=(0,a.useState)(!1),I=async(e,n)=>{try{await(0,k.qo)(e)&&"CRM_Callback_123"===e.channelId&&await $.yo(e.botId,{sendLeadToCrm:!1},!1),(0,_.i)(!0,"The  ".concat(n," deleted successfully!"),"success")}catch(t){(0,_.i)(!0,"Not able to delete the ".concat(n,". Try after sometime!"),"error")}},D=async(e,n)=>{let{setErrors:t,setStatus:a,setSubmitting:i}=n;try{await(0,k.Ay)(e),a({success:!0}),i(!0),(0,_.i)(!0,"The CRM callback url updated successfully!","success"),p(!1)}catch(o){a({success:!1}),t({submit:o.message}),i(!1),(0,_.i)(!0,"Not able to update CRM callback url. Try after sometime!","error")}},R=e=>{const n=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}).format(n)},z=async e=>await $.yo(t._id,{[e.target.name]:e.target.checked},!1);let B=null;"Webchat"===n.channelName&&(B=(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(r.A,{variant:"h5",children:(0,L.jsx)("strong",{children:"Chat window Script Tag"})}),(0,L.jsxs)(o.Ay,{container:!0,children:[(0,L.jsx)(o.Ay,{item:!0,xs:10,md:10,children:(0,L.jsx)(r.A,{variant:"h6",children:n.scriptTag})}),(0,L.jsx)(o.Ay,{children:(0,L.jsx)(U.A,{children:(0,L.jsx)(l.A,{startIcon:(0,L.jsx)(y.A,{}),variant:"outlined",size:"medium",children:(0,L.jsx)(w.CopyToClipboard,{text:n.scriptTag,onCopy:()=>(0,_.i)(!0,"chat script copied to clipboard","success"),children:(0,L.jsx)("span",{children:"Copy"})})})})})]}),(0,L.jsxs)(r.A,{variant:"h6",children:[(0,L.jsx)("strong",{children:"Integrated At : "}),R(n.integratedAt)]})]}));const O={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"500px",display:"inline-block",verticalAlign:"bottom"};if("whatsapp"===n.channelName){const e="".concat(F.DX,"/whatsapp/").concat(n.organizationId,"/").concat(n.botId,"/").concat(n._id,"/entrypoint"),t=(0,M.qW)(n.organizationId,n.botId);B=(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(o.Ay,{container:!0,children:[(0,L.jsx)(o.Ay,{item:!0,children:(0,L.jsx)(r.A,{variant:"h5",children:(0,L.jsx)("strong",{children:"WhatsApp Integration"})})}),(0,L.jsxs)(o.Ay,{item:!0,children:[(0,L.jsx)(s.A,{title:"Edit",children:(0,L.jsx)(f.A,{sx:{color:"#3386FF"},size:"small",onClick:()=>m(!0),children:(0,L.jsx)(j.A,{})})}),(0,L.jsx)(s.A,{title:"Delete",children:(0,L.jsx)(f.A,{sx:{color:"#FF5733"},size:"small",onClick:()=>S(!0),children:(0,L.jsx)(b.A,{})})}),(0,L.jsx)(N.A,{title:"Delete Whatsapp integration?",open:A,setOpen:S,onConfirm:()=>I(n,"Whatsapp integration"),children:"Confirm the deletion of Whatsapp integration."})]})]}),(0,L.jsxs)(r.A,{children:[(0,L.jsx)("strong",{children:"App Name :"})," ",n.appName]}),(0,L.jsxs)(r.A,{children:[(0,L.jsx)("strong",{children:"App Id :"})," ",n.appId]}),(0,L.jsxs)(r.A,{children:[(0,L.jsx)("strong",{children:"Phone Number ID :"})," ",n.phoneNumberId]}),(0,L.jsxs)(r.A,{children:[(0,L.jsx)("strong",{children:"Phone Number :"})," ",n.source]}),(null===n||void 0===n?void 0:n.campaignData)&&(0,L.jsxs)(r.A,{children:[(0,L.jsx)("strong",{children:"Campaign Data :"})," ",JSON.stringify(null===n||void 0===n?void 0:n.campaignData)]}),(0,L.jsx)("div",{children:(0,L.jsx)(w.CopyToClipboard,{text:e,onCopy:()=>(0,_.i)(!0,"Web hook callback url copied to clipboard","success"),children:(0,L.jsxs)("span",{children:[(0,L.jsx)("strong",{children:"Webhook Callback Url : "})," ",(0,L.jsx)("div",{style:O,children:e})," ",(0,L.jsx)(s.A,{title:"Copy",children:(0,L.jsx)(y.A,{style:{cursor:"pointer",fontSize:"14px"}})})]})})}),(0,L.jsx)("div",{children:(0,L.jsx)(w.CopyToClipboard,{text:t,onCopy:()=>(0,_.i)(!0,"Webhook Verification Token copied to clipboard","success"),children:(0,L.jsxs)("span",{children:[(0,L.jsx)("strong",{children:"Webhook Verification Token : "})," ",(0,L.jsx)("div",{style:O,children:t})," ",(0,L.jsx)(s.A,{title:"Copy",children:(0,L.jsx)(y.A,{style:{cursor:"pointer",fontSize:"14px"}})})]})})}),(0,L.jsxs)("div",{children:[(0,L.jsx)("strong",{children:"Access Token : "})," ",(0,L.jsx)("div",{style:O,children:n.verificationToken})," ",(0,L.jsx)(w.CopyToClipboard,{text:n.verificationToken,onCopy:()=>(0,_.i)(!0,"Web hook callback url Access Token copied to clipboard","success"),children:(0,L.jsx)(s.A,{title:"Copy",children:(0,L.jsx)(y.A,{style:{cursor:"pointer",fontSize:"14px"}})})})]}),(0,L.jsxs)(r.A,{children:[(0,L.jsx)("strong",{children:"Initial Lead Category :"})," ",n.leadCategory||"preSales"]}),(0,L.jsxs)(r.A,{children:[(0,L.jsx)("strong",{children:"Categorize to Presale after no of conversations :"})," ",n.leadUpgradeToPreSaleCount||""]}),(0,L.jsxs)(r.A,{variant:"h6",children:[(0,L.jsx)("strong",{children:"Integrated At : "}),R(n.integratedAt)]}),h&&(0,L.jsx)(P.A,{openPopUpDialog:h,setPopUpDialog:m,title:"Update WhatsApp integration",children:(0,L.jsx)(K,{botId:n.botId,organizationId:n.organizationId,setPopUpDialog:m,whatsappIntegrationObj:n,edit:!0})})]})}else if("gupshup"===n.channelName){const e="".concat(F.DX,"/gupshup/").concat(n.organizationId,"/").concat(n.botId,"/").concat(n._id,"/entrypoint");B=(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(o.Ay,{container:!0,children:[(0,L.jsx)(o.Ay,{item:!0,children:(0,L.jsx)(r.A,{variant:"h5",children:(0,L.jsx)("strong",{children:"Gupshup Integration"})})}),(0,L.jsxs)(o.Ay,{item:!0,children:[(0,L.jsx)(s.A,{title:"Edit",children:(0,L.jsx)(f.A,{sx:{color:"#3386FF"},size:"small",onClick:()=>x(!0),children:(0,L.jsx)(j.A,{})})}),(0,L.jsx)(s.A,{title:"Delete",children:(0,L.jsx)(f.A,{sx:{color:"#FF5733"},size:"small",onClick:()=>S(!0),children:(0,L.jsx)(b.A,{})})}),(0,L.jsx)(N.A,{title:"Delete Gupshup integration?",open:A,setOpen:S,onConfirm:()=>I(n,"Gupshup integration"),children:"Confirm the deletion of Gupshup integration."})]})]}),(0,L.jsxs)(r.A,{children:[(0,L.jsx)("strong",{children:"App Name :"})," ",n.appName]}),(0,L.jsxs)(r.A,{children:[(0,L.jsx)("strong",{children:"App Id :"})," ",n.appId]}),(0,L.jsxs)(r.A,{children:[(0,L.jsx)("strong",{children:"Phone Number :"})," ",n.phoneNumberId]}),(null===n||void 0===n?void 0:n.campaignData)&&(0,L.jsxs)(r.A,{children:[(0,L.jsx)("strong",{children:"Campaign Data :"})," ",JSON.stringify(null===n||void 0===n?void 0:n.campaignData)]}),(0,L.jsx)("div",{children:(0,L.jsx)(w.CopyToClipboard,{text:e,onCopy:()=>(0,_.i)(!0,"Web hook callback url copied to clipboard","success"),children:(0,L.jsxs)("span",{children:[(0,L.jsx)("strong",{children:"Webhook Callback Url : "})," ",(0,L.jsx)("div",{style:O,children:e})," ",(0,L.jsx)(s.A,{title:"Copy",children:(0,L.jsx)(y.A,{style:{cursor:"pointer",fontSize:"14px"}})})]})})}),(0,L.jsxs)(r.A,{children:[(0,L.jsx)("strong",{children:"Initial Lead Category :"})," ",n.leadCategory||"preSales"]}),(0,L.jsxs)(r.A,{children:[(0,L.jsx)("strong",{children:"Categorize to Presale after no of conversations :"})," ",n.leadUpgradeToPreSaleCount||""]}),(0,L.jsxs)(r.A,{variant:"h6",children:[(0,L.jsx)("strong",{children:"Integrated At : "}),R(n.integratedAt)]}),g&&(0,L.jsx)(P.A,{openPopUpDialog:g,setPopUpDialog:x,title:"Update Gupshup integration",children:(0,L.jsx)(X,{botId:n.botId,organizationId:n.organizationId,setPopUpDialog:x,gupshupIntegrationObj:n,edit:!0})})]})}else"CRM_Callback"===n.channelName&&(B=(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(r.A,{variant:"h6",children:(0,L.jsx)("strong",{children:"CRM Callback URL"})}),i?(0,L.jsx)(v.l1,{initialValues:n,validationSchema:C.Ik().shape({callbackURL:C.Yj().url("Enter valid url!").required("CRM Callback URL is required")}),onSubmit:D,children:e=>{let{errors:n,handleBlur:t,handleChange:a,handleSubmit:i,isSubmitting:r,touched:l,values:s}=e;return(0,L.jsx)("form",{noValidate:!0,onSubmit:i,children:(0,L.jsxs)(o.Ay,{container:!0,spacing:1,children:[(0,L.jsxs)(o.Ay,{item:!0,xs:10,md:10,children:[(0,L.jsx)(d.A,{id:"callbackURL",type:"url",defaultValue:s.callbackURL,name:"callbackURL",onBlur:t,onChange:a,fullWidth:!0,autoComplete:"off",error:Boolean(l.callbackURL&&n.callbackURL)}),l.callbackURL&&n.callbackURL&&(0,L.jsx)(c.A,{error:!0,id:"helper-text-crm-url",children:n.callbackURL})]}),(0,L.jsx)(o.Ay,{item:!0,xs:2,md:2,children:(0,L.jsx)(U.A,{children:(0,L.jsx)(E.A,{isLoading:r,disabled:r,color:"primary",size:"large",type:"submit",variant:"contained",children:"Update"})})}),n.submit&&(0,L.jsx)(o.Ay,{item:!0,xs:12,children:(0,L.jsx)(c.A,{error:!0,children:n.submit})})]})})}}):(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(o.Ay,{container:!0,children:[(0,L.jsx)(o.Ay,{item:!0,xs:10,md:10,children:(0,L.jsxs)(o.Ay,{container:!0,children:[(0,L.jsx)(o.Ay,{item:!0,children:(0,L.jsx)(r.A,{variant:"h6",children:n.callbackURL})}),(0,L.jsxs)(o.Ay,{item:!0,display:"flex",justifyContent:"flex-end",children:[(0,L.jsx)(s.A,{title:"Edit",children:(0,L.jsx)(f.A,{sx:{color:"#3386FF"},size:"small",onClick:()=>p(!0),children:(0,L.jsx)(j.A,{})})}),(0,L.jsx)(s.A,{title:"Delete",children:(0,L.jsx)(f.A,{sx:{color:"#FF5733"},size:"small",onClick:()=>S(!0),children:(0,L.jsx)(b.A,{})})}),(0,L.jsx)(N.A,{title:"Delete CRM callback URL?",open:A,setOpen:S,onConfirm:()=>I(n,"crm callback url"),children:"Confirm the deletion of CRM callback URL."})]})]})}),(0,L.jsx)(o.Ay,{item:!0,xs:2,md:2,children:(0,L.jsx)(U.A,{children:(0,L.jsx)(l.A,{startIcon:(0,L.jsx)(y.A,{}),variant:"outlined",size:"medium",children:(0,L.jsx)(w.CopyToClipboard,{text:n.callbackURL,onCopy:()=>(0,_.i)(!0,"CRM callback URL copied to clipboard","success"),children:(0,L.jsx)("span",{children:"Copy"})})})})})]})}),(0,L.jsx)(o.Ay,{item:!0,children:(0,L.jsx)(Z.A,{label:"Activate CRM Integration",control:(0,L.jsx)(Q.A,{checked:t.sendLeadToCrm,onChange:z,name:"sendLeadToCrm"})})}),(0,L.jsxs)(r.A,{variant:"h6",children:[(0,L.jsx)("strong",{children:"Integrated At : "}),R(n.integratedAt)]})]}));return(0,L.jsx)(T.A,{contentSX:{p:2.25},children:(0,L.jsx)(u.A,{style:{padding:0},children:B})})}},8478(e,n,t){t.d(n,{Jt:()=>d,TF:()=>p,bE:()=>c,yJ:()=>u});var a=t(89379),i=t(80045),o=t(32026),r=t(44364);const l=["headers","noAuth"],s=["data"];async function d(e,n){return h("GET",e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function c(e,n){return h("POST",e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function u(e,n){return h("PUT",e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function p(e,n){return h("DELETE",e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function h(e,n,t){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{headers:r,noAuth:d}=o,c=(0,i.A)(o,l);const u="POST"===e||"PUT"===e||"DELETE"===e;n=function(e,n){if(!e)return e;const t=n&&Object.keys(n);if(null!==t&&void 0!==t&&t.length){const a=t.reduce((e,t)=>{let a=n[t];return null===a||void 0===a?e:(a="".concat(t,"=").concat(encodeURIComponent(a)),e?"".concat(e,"&").concat(a):a)},"");a&&(e="".concat(e).concat(e.includes("?")?"&":"?").concat(a))}if(e.startsWith("https://"))return e;return"".concat(m).concat(e)}(n,u?void 0:t);const p=t instanceof FormData;if(p||(t=t&&"object"===typeof t&&u?JSON.stringify(t):void 0),r||(r={}),p||(r["Content-Type"]="application/json"),r.Accept="application/json",!1!==d){const e=sessionStorage.getItem("token");e&&(r.Authorization="Bearer ".concat(e))}try{const o=await fetch(n,(0,a.A)((0,a.A)({},c),{},{headers:r,body:t,method:e}));if("blob"===c.responseType){const e=await o.blob(),n=function(e,n){var t;const a=e.headers.get("content-disposition");return(null===a||void 0===a||null===(t=a.match(/filename="?([^"]+)"?/))||void 0===t?void 0:t[1])||n||"download.xlsx"}(o,c.fileName);return void function(e,n){const t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=n,a.click(),URL.revokeObjectURL(t)}(e,n)}const l=await o.json();if(o.ok){const{data:e}=l,n=(0,i.A)(l,s);return delete n.status,e&&!Object.keys(n).length?e:l}throw l.message?new Error(l.message):l}catch(g){var h;throw console.error("Error calling API: ",g),null!==(h=g.message)&&void 0!==h&&h.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error(g.message)}}const m=(0,o.s8)(r.jn,"/")},98415(e,n,t){t.d(n,{Ci:()=>p,I4:()=>u,TF:()=>d,gI:()=>l,gR:()=>m,jo:()=>c,rv:()=>g,so:()=>h,yo:()=>s});var a=t(89379),i=t(8478),o=t(33340),r=t(32026);async function l(e){const{organization:{websiteUrl:n,_id:t}}=o.nc.getState(),a={organizationId:t,websiteUrl:n,botName:e,botDesign:{visitorMessageLogo:{name:"",url:""},botMessageLogo:{name:"",url:""},botChatButton:{name:"",url:""},botLogo:{name:"",url:""},backgroundColor:"#e7a654",textColor:"#ffffff",dimensions:{heightInPixel:"500px",heightInPercent:"70%",widthInPixel:"350px",widthInPercent:"25%"},botLogoDimensions:{heightInPixel:"30px",heightInPercent:"100%",widthInPixel:"30px",widthInPercent:"100%"}}};x(await i.bE("/bot/".concat(t),a),!0)}async function s(e,n,t){const{organizationId:a}=o.nc.getState();if(!a||!e)throw new Error("Bot details not found");const r=await i.yJ("/bot/".concat(a,"/").concat(e),n);return x(r,t),r}async function d(e){const{organizationId:n,selectedBotId:t}=o.nc.getState();if(!n||!e)throw new Error("Bot details not found");const{deleted:r}=await i.TF("/bot/".concat(n,"/").concat(e));if(r){let{botsMap:e,botsList:n}=o.nc.getState();e=(0,a.A)({},e),n=[...n],delete e[r];const i=n.findIndex(e=>e._id===r);i>=0&&n.splice(i,1);const s={botsMap:e,botsList:n};var l;if(t===r)s.selectedBotId=(null===(l=n[0])||void 0===l?void 0:l._id)||null;o.nc.setState(s)}return!!r}function c(e,n){let{botDesign:t}=o.nc.getState();return t=(0,a.A)((0,a.A)({},t),n),s(e,{botDesign:t})}async function u(e,n){const{organizationId:t,selectedBotId:a}=o.nc.getState(),r=new FormData;r.append("file",n);const l=await i.bE("/bot/".concat(t,"/").concat(a,"/update-logo/").concat(e),r);return g(a,l),l["botDesign.".concat(e)]}async function p(e){const{organizationId:n,selectedBotId:t}=o.nc.getState(),a=await i.TF("/bot/".concat(n,"/").concat(t,"/update-logo/").concat(e));return g(t,a),a["botDesign.".concat(e)]}function h(e,n){return s(e,{botName:n})}function m(e,n){let{botSettings:t={}}=o.nc.getState();return t=(0,a.A)((0,a.A)({},t),n),s(e,{botSettings:t})}function g(e,n){const{botsMap:t}=o.nc.getState(),a=t[e];if(!a)return;x(Object.keys(n).reduce((e,t)=>(0,r.G6)(e,t,n[t]),a))}function x(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const t=e._id;let{botsMap:i,botsList:r}=o.nc.getState();i=(0,a.A)((0,a.A)({},i),{},{[t]:e}),r=[...r];const l=r.findIndex(e=>e._id===t);l>=0?r[l]=e:r.push(e);const s={botsMap:i,botsList:r};n&&(s.selectedBotId=t),o.nc.setState(s)}},43983(e,n,t){t.d(n,{Ay:()=>d,Yl:()=>l,qo:()=>s,u4:()=>u,uV:()=>c});var a=t(89379),i=t(8478),o=t(33340),r=t(97601);async function l(e){const n=await i.Jt("/integrations/".concat(e.organizationId,"/").concat(e.botId,"/list")),{botId:t}=e;((e,n)=>{o.nc.setState(t=>{const i=t.botsList.map(t=>t._id===e?(0,a.A)((0,a.A)({},t),{},{integrations:n}):t);return(0,a.A)((0,a.A)({},t),{},{botsList:i})})})(t,n)}async function s(e){const n=await i.TF("/integrations/".concat(e.organizationId,"/").concat(e.botId,"/").concat(e._id),e);try{await l(e)}catch(t){(0,r.i)(!0,"Not able to fetch all integrations. Try after sometime!","error")}return n}async function d(e){const n=await i.bE("/integrations/".concat(e.organizationId,"/").concat(e.botId,"/crm-callback-integration"),e),t={organizationId:n.organizationId,botId:n.botId};try{await l(t)}catch(a){(0,r.i)(!0,"Not able to fetch all integrations. Try after sometime!","error")}}async function c(e){const n=await i.bE("/integrations/".concat(e.organizationId,"/").concat(e.botId),e),t={organizationId:n.organizationId,botId:n.botId};try{await l(t)}catch(a){(0,r.i)(!0,"Not able to fetch all integrations. Try after sometime!","error")}}async function u(e){const{organizationId:n,selectedBotId:t}=o.nc.getState();await i.bE("/integrations/".concat(n,"/").concat(t,"/whatsapp"),e);try{await l({organizationId:n,botId:t})}catch(a){(0,r.i)(!0,"Not able to fetch all integrations. Try after sometime!","error")}}},41507(e,n,t){t.d(n,{Ds:()=>d,L_:()=>l,NC:()=>s,YS:()=>r,cw:()=>u,qb:()=>c});var a=t(89379),i=t(8478),o=t(33340);async function r(e,n){const t=await async function(){const e=o.nc.getState();let{organizationList:n,organizationId:t,organization:a}=e;if(!e.isSuperUser||Array.isArray(n))return;if(n=await i.bE("/organization/list"),n.length)if(t=t||sessionStorage.getItem("orgId"),t){if(!a){var r;a=null===(r=n)||void 0===r?void 0:r.filter(e=>e._id===t)[0]}}else{const e=n[0];t=e._id,a=e}return o.nc.setState({organizationList:n,organizationId:t,organization:a}),!0}(),{organizationId:a}=o.nc.getState();return e?e!==a&&o.nc.setState({organizationId:e}):e=a,!e||(t||await async function(e){const n=await i.bE("/organization/get-organization-by-id",{organizationId:e});o.nc.setState({organization:n})}(e),await d(e,n),!0)}async function l(e,n){n||(n=o.nc.getState().organizationId);const t=await i.yJ("/organization/".concat(n),e);o.nc.setState(e=>{const{organizationList:i,organizationId:o,organization:r}=e,l={};return o===n&&(l.organization=(0,a.A)((0,a.A)({},r),t)),i&&(l.organizationList=i.map(e=>e._id===n?(0,a.A)((0,a.A)({},e),t):e)),l})}function s(e){if(!e||"object"!==typeof e)return;let{organization:n}=o.nc.getState();n&&(n=(0,a.A)((0,a.A)({},n),e),o.nc.setState({organization:n}))}async function d(e,n){var t;const a=await i.Jt("/bot/".concat(e,"/list")),r=n||(null===(t=a[0])||void 0===t?void 0:t._id),l=a.reduce((e,n)=>(e[n._id]=n,e),{});return o.nc.setState({organizationId:e,botsList:a,botsMap:l,selectedBotId:r}),r}function c(e){o.nc.setState({selectedBotId:e})}async function u(){const e=await i.Jt("/organization/invoice/list");o.nc.setState({organizationsInvoiceList:e})}},70855(e,n,t){t.d(n,{G:()=>i});var a=t(33340);function i(e){const n=(0,a.nc)(e=>e.selectedBotId),t=(0,a.nc)(t=>t.botsMap[e||n]);return[e||n,t]}},32026(e,n,t){t.d(n,{G6:()=>s,Ke:()=>h,OX:()=>c,PE:()=>p,TZ:()=>m,Yq:()=>l,do:()=>u,qW:()=>d,s8:()=>o,wE:()=>g});var a=t(89379),i=t(44364);function o(e,n){return e.replace(new RegExp("".concat(r(n),"+$")),"")}function r(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function l(e){const n=new Date(e),t=n.getDate(),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n.getMonth()],i=n.getFullYear();return"".concat(a," ").concat(t,", ").concat(i)}function s(e,n,t){if(!n&&!e)return t;e=e||{};const i=Array.isArray(e)?[...e]:(0,a.A)({},e);if(n.includes(".")){const a=n.indexOf("."),o=n.substring(0,a),r=n.substring(a+1);i[o]=s(e[o],r,t)}else i[n]=t;return i}function d(e,n){return btoa("".concat(e,"_").concat(n,"_whatsapp_int"))}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const n="abcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let a=0;a<e;a++)t+=n.charAt(Math.floor(36*Math.random()));return t}function u(e,n,t){if(!n&&!e)return t;e=e||{};const i=Array.isArray(e)?[...e]:(0,a.A)({},e);if(n.includes(".")){const a=n.indexOf("."),o=n.substring(0,a),r=n.substring(a+1);i[o]=u(e[o],r,t)}else i[n]=t;return i}function p(e,n){const t=new Blob([e],{type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/csv"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download=n,document.body.appendChild(a),a.click(),document.body.removeChild(a)}function h(e,n){return!n||n.startsWith("http")?n:(n.startsWith("/")&&(n=n.substring(1)),"".concat(i.J,"/").concat(e,"/").concat(n))}function m(e){let n=document.querySelector("link[rel~='icon']");n||(n=document.createElement("link"),n.rel="icon",document.getElementsByTagName("head")[0].appendChild(n)),null!==e&&void 0!==e&&e.domain?null!==e&&void 0!==e&&e.favicon&&(n.href=h(null===e||void 0===e?void 0:e.domain,null===e||void 0===e?void 0:e.favicon)):n.href="/favicon.png"}function g(e){null!==e&&void 0!==e&&e.domain?null!==e&&void 0!==e&&e.displayName&&(document.title=null===e||void 0===e?void 0:e.displayName):document.title="LivServ"}},44364(e,n,t){t.d(n,{DX:()=>d,J:()=>s,Og:()=>o,Rc:()=>c,jn:()=>a,mB:()=>l,pA:()=>r,pR:()=>i});const a="https://devbackend.livhousing.com",i="c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_WEB_SOCKET_AUTH_KEY:"wFSMmt7sfsbNJLabQvVdKNrjga6diuvwuLaD3to2RbQ=",REACT_APP_RVM_BACKEND_URL:"https://devbackend.livhousing.com/",REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com",REACT_APP_RVM_WEB_SOCKET_URL:"wss://devbackend.livhousing.com/voice/ws"}.TRAINING_MEDIA_MAXSIZE,r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_WEB_SOCKET_AUTH_KEY:"wFSMmt7sfsbNJLabQvVdKNrjga6diuvwuLaD3to2RbQ=",REACT_APP_RVM_BACKEND_URL:"https://devbackend.livhousing.com/",REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com",REACT_APP_RVM_WEB_SOCKET_URL:"wss://devbackend.livhousing.com/voice/ws"}.CONVERSATION_MEDIA_MAXSIZE,l="AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",s="https://livserv-organizations.s3.ap-south-1.amazonaws.com",d={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_WEB_SOCKET_AUTH_KEY:"wFSMmt7sfsbNJLabQvVdKNrjga6diuvwuLaD3to2RbQ=",REACT_APP_RVM_BACKEND_URL:"https://devbackend.livhousing.com/",REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com",REACT_APP_RVM_WEB_SOCKET_URL:"wss://devbackend.livhousing.com/voice/ws"}.REACT_APP_NGROK_BACKEND_URL||"https://devbackend.livhousing.com",c="https://devbackend.livhousing.com/"}}]);