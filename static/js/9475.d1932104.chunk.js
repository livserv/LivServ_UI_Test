"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[9475],{2933:(t,e,n)=>{n.d(e,{C:()=>r,c:()=>s});var o=n(4709);let a=null;function s(t){t.origin||(t.origin=null),t.botId||(t.botId=null);try{const{origin:e,botId:n}=t;a=new BroadcastChannel("lp_web_chat");const s=function(t){let{onHistoryChange:e,getHistory:n,origin:a=null,botId:s=null}=t;return t=>{const i=t.data||{};if(i.origin===a&&i.botId===s)try{if("GetConversationId"===i.action){r(n(),a,s)}else if("SetConversationId"===i.action){const{conversationId:t,history:n}=i;t?o.d6(t||void 0):o.oy(),n&&(null===e||void 0===e||e(n))}}catch(c){console.log("Error occurred when trying to handle session sharing:",c)}}}(t);return a.addEventListener("message",s),a.postMessage({action:"GetConversationId",origin:e,botId:n}),()=>{a&&(a.removeEventListener("message",s),a.close(),a=null)}}catch(e){console.error("Unable to start session sharing:",e)}}function r(t,e,n,s){if(a)try{const r=o.Db()||"";if(!s&&!r)return;a.postMessage({action:"SetConversationId",origin:e,botId:n,conversationId:r,history:t})}catch(r){console.error("Error sharing session:",r)}}},13938:()=>{},14623:(t,e,n)=>{n.d(e,{A:()=>s});var o=n(9950),a=n(44414);const s=function(t){let{text:e="We are Online!",onHide:n,design:s,isLeft:r}=t;const i=function(t,e){let{spacingCorner:n,spacingBottom:o}=(null===t||void 0===t?void 0:t.launcher)||{};n=parseFloat(n)||void 0,o=parseFloat(o)||void 0,n&&(n+=5);o&&(o+=75);if(n||o)return{bottom:o,[e?"left":"right"]:n}}(s,r),[c,l]=o.useState(!0),d=o.useCallback((t=>{t.preventDefault(),t.stopPropagation(),l(!1),null===n||void 0===n||n()}),[n]);return c?(0,a.jsxs)("div",{className:"button-tooltip",style:i,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("img",{draggable:!1,className:"chat-hand",alt:"\ud83d\udc4b",src:"https://cwc.livserv.in/uploads/Templates/cwc_trend1/hand.png"}),(0,a.jsx)("b",{children:e}),(0,a.jsx)("br",{})]}),(0,a.jsx)("a",{className:"close-indicator",onClick:d,children:(0,a.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M1490 1245q0 40-24 68l-136 136q-24 24-68 24t-68-28l-294-294-294 294q-24 24-68 24t-68-28l-136-136q-24-24-24-68t24-68l294-294-294-294q-24-24-24-68t24-68l136-136q24-24 68-24t68 28l294 294 294-294q24-24 68-28t68 28l136 136q28 24 24 68t-24 68l-294 294 294 294q24 24 24 68z",fill:"#fff"})})})]}):null}},26038:(t,e,n)=>{n.d(e,{CZ:()=>h,If:()=>g,SF:()=>p,TO:()=>l,o9:()=>d});var o=n(80045),a=n(89379),s=n(44364),r=n(8478),i=n(4709);const c=["startupFlow","hideChatWindow"];function l(){return{role:"assistant",type:"text",content:"Hello, greetings for the day, how may I assist you?"}}function d(t,e,n){var o,c,l;const{updateContact:d,onReceiveChatResponse:g,bot:h,locationDetails:p,onCallback:v,recipientId:b,history:f,chatFlowId:C,preferredLanguage:w}=e,{flowId:m,flowType:y}=(null===f||void 0===f||null===(o=f[f.length-1])||void 0===o?void 0:o.media)||{};return"string"===typeof t&&m&&(t={method:"flow-response",type:y,flowId:m,answer:t}),"customForm"===(null===(c=t)||void 0===c?void 0:c.type)&&null!==(l=t)&&void 0!==l&&l.answer&&(t={method:"flow-response",type:y,flowId:m,answer:t.answer}),n?async function(t,e,n,o){let{onReceiveChatResponse:r,updateContact:c,onCallback:l,recipientId:d,chatFlowId:g,language:h}=n;const p=i.Db(),{_id:v,organizationId:b,botSettings:f}=e,C={userQuery:t,recipientDetails:(0,a.A)({recipientId:d,conversationId:p,language:h},o),chatFlowId:g};r&&(C.testMode=!0);try{const t=await fetch("".concat(s.Rc,"voicebot/voiceChat?organizationId=").concat(b,"&botId=").concat(v),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)}),e=await t.json();null===r||void 0===r||r(e.data);return{data:u(e.data,{updateContact:c,botSettings:f,onCallback:l}),audioUri:e.data.audioUri}}catch(w){return console.log(w,"error"),[{role:"assistant",type:"text",content:w.message||"Unknown Server error"}]}}(t,h,{onReceiveChatResponse:g,updateContact:d,onCallback:v,recipientId:b,chatFlowId:C,language:w},p):async function(t,e,n,o){let{onReceiveChatResponse:s,updateContact:c,onCallback:l,recipientId:d,chatFlowId:g,language:h}=n;const p=i.Db(),{_id:v,organizationId:b,botSettings:f}=e,C={userQuery:t,recipientDetails:(0,a.A)({recipientId:d,conversationId:p,language:h},o),chatFlowId:g};s&&(C.testMode=!0);try{const t=await r.bE("/bot/".concat(b,"/").concat(v,"/chat"),C,{noAuth:!0});return null===s||void 0===s||s(t),u(t,{updateContact:c,botSettings:f,onCallback:l})}catch(w){return[{role:"assistant",type:"text",content:w.message||"Unknown Server error"}]}}(t,h,{onReceiveChatResponse:g,updateContact:d,onCallback:v,recipientId:b,chatFlowId:C,language:w},p)}function u(t,e){let{updateContact:n,botSettings:o,onCallback:a}=e;const{chatRefId:s,recipientId:r,messages:c}=t;return i.d6(s),null===a||void 0===a||a("set-visitor-id",{recipientId:r}),g(c,{updateContact:n,botSettings:o})}function g(t,e){let{updateContact:n,botSettings:o}=e;if(null===t||void 0===t||!t.length)return t;const a=t[t.length-1];return"form"===a.type&&t.push({role:"user",type:"lead",content:"",profile:a.media,updateContact:n,botSettings:o}),"customForm"===a.type&&("assistant"===a.role&&(a.role="user"),Object.assign(a,{type:"customForm",content:"",media:a.media,updateContact:n,botSettings:o})),t}async function h(t){try{const e=new URLSearchParams(window.location.search),n=e.get("token"),a={authToken:n,recipientId:t,sourceUrl:e.get("sourceUrl")},s=await r.Jt("/bot/get-bot-details-by-auth-token",a,{noAuth:!0}),{startupFlow:i,hideChatWindow:l}=s;return{startupFlow:i,hideChatWindow:l,bot:(0,o.A)(s,c)}}catch(e){console.log("Failed to init chat:-",e)}}async function p(t,e,n,o){let{autoLaunch:a,startupMessages:s}=o;const{_id:c,organizationId:l,botSettings:d={}}=t,u=i.Db();if(!e||!u)return a?s||[{role:"assistant",type:"text",content:"Hello, greetings for the day, how may I assist you?"}]:[];try{const t=await r.Jt("/bot/".concat(l,"/").concat(c,"/chat/history/").concat(e,"/").concat(u),null,{noAuth:!0}),{messages:o}=t||{};return g(o,{updateContact:n,botSettings:d})}catch(h){console.error("Failed to fetch chat history:-",h)}return a?[{role:"assistant",type:"text",content:"Hello, greetings for the day, how may I assist you?"}]:[]}},31739:(t,e,n)=>{n.d(e,{J:()=>s,u:()=>a});const o="lp-vid";function a(t,e){if("set-visitor-id"===t){const{recipientId:t}=e||{};t&&function(t){try{localStorage.setItem(o,t)}catch(e){console.error("Unable to use browser cache",e)}}(t)}}function s(){try{return localStorage.getItem(o)||void 0}catch(t){console.error("Unable to use browser cache",t)}}},47014:(t,e,n)=>{n.d(e,{A:()=>p});var o=n(9950),a=n(15820),s=n(4709),r=n(78023),i=n(26038),c=n(2933),l=n(96651),d=n(72438),u=(n(13938),n(44414));const g={window:{spacingCorner:"0px",spacingBottom:"7px"},launcher:{spacingCorner:"0px",spacingBottom:"7px"}},h=["lead","options","customForm","stop"];const p=function(t){var e,n;const{botDetails:p,botDesign:v,startupFlow:b,onReceiveChatResponse:f,autoLaunch:C,recipientId:w,origin:m,onCallback:y,optionsRenderer:I,fullscreen:x}=t,[S,k]=o.useState(C||!1),[j,F]=o.useState(v),[L,A]=o.useState(!1),[B,R]=o.useState(p),[T,H]=o.useState(b),[M,_]=o.useState(null===b||void 0===b?void 0:b.messages),[D,U]=o.useState(w),[N,E]=o.useState([]),[O,z]=o.useState(),[q,W]=o.useState(),J=o.useRef({autoLaunch:C});if(x)try{const t=window.innerWidth+"px",e=window.innerHeight+"px";j.window.width=t,j.window.height=e,j.window.spacingBottom="0px",j.window.spacingCorner="0px",j.launcher.spacingBottom="0px",j.launcher.spacingCorner="0px"}catch($){}J.current.recipientId=D,J.current.bot=B,J.current.chatFlowId=null===T||void 0===T?void 0:T.flowId,J.current.startupMessages=M,J.current.origin=m,J.current.preferredLanguage=q;const P=o.useCallback((t=>{s.eB(t),W(t)}),[]);J.current.setAndBroadcastHistory=o.useCallback((t=>{var e;"function"===typeof t?E((e=>{var n;const o=t(e);return(0,c.C)(o,J.current.origin,null===(n=J.current.bot)||void 0===n?void 0:n._id,!0),o})):(E(t),(0,c.C)(t,J.current.origin,null===(e=J.current.bot)||void 0===e?void 0:e._id,!0))}),[]),J.current.onCallback=o.useCallback(((t,e)=>{"set-visitor-id"===t&&e.recipientId&&U(e.recipientId),null===y||void 0===y||y(t,e)}),[y]),J.current.history=N,J.current.showBot=S,J.current.design=j,J.current.locationDetails=O,J.current.onReceiveChatResponse=f,J.current.isLoadedInConsole=!!f,o.useEffect((()=>{R(p)}),[p]),o.useEffect((()=>{var t;const{updateContact:e,bot:n}=J.current;H(b),null!==b&&void 0!==b&&null!==(t=b.messages)&&void 0!==t&&t.length?_((0,i.If)([...b.messages],{updateContact:e,botSettings:n.botSettings})):_(!1)}),[b]),o.useEffect((()=>{if(B&&!J.current.isLoadedInConsole)return(0,c.c)({botId:B._id,origin:J.current.origin,onHistoryChange:t=>{var e;(null!==t&&void 0!==t&&t.length||null!==(e=J.current.history)&&void 0!==e&&e.length)&&E(t)},getHistory:()=>J.current.history})}),[B]),o.useEffect((()=>{F(v)}),[v]),o.useEffect((()=>{W(s.cO());const{updateContact:t,bot:e,recipientId:n,autoLaunch:o,setAndBroadcastHistory:a,startupMessages:c}=J.current;e?(0,i.SF)(e,n,t,{autoLaunch:o,startupMessages:(0,i.If)(c,{updateContact:t,botSettings:e.botSettings})}).then(a):(0,i.CZ)(n).then((e=>{let{bot:s,startupFlow:c,hideChatWindow:l}=e;if(l)window.top.postMessage({lsMessage:"hide_ls_window"},"*");else{R(s),H(c);const e=(0,i.If)(null===c||void 0===c?void 0:c.messages,{updateContact:t,botSettings:s.botSettings});_(e);const{design:l,isLoadedInConsole:d}=J.current;!l&&s.botDesign&&F((0,r.Y)(s.botDesign,d?void 0:g)),(0,i.SF)(s,n,t,{autoLaunch:o,startupMessages:(0,i.If)(e,{updateContact:t,botSettings:s.botSettings})}).then(a)}})),s.a().then(z)}),[]);const G=o.useCallback(((t,e)=>{var n,o,a,s;let{showBot:r,design:i,onCallback:c}=J.current;r=t?!r:r,null===c||void 0===c||c("windowToggle",{state:r,design:r?{width:null===i||void 0===i||null===(n=i.window)||void 0===n?void 0:n.width,height:null===i||void 0===i||null===(o=i.window)||void 0===o?void 0:o.height,spacingBottom:null===i||void 0===i||null===(a=i.window)||void 0===a?void 0:a.spacingBottom,spacingCorner:null===i||void 0===i||null===(s=i.window)||void 0===s?void 0:s.spacingCorner}:e})}),[]),Q=o.useCallback((async t=>{var e;null!==(e=J.current.history)&&void 0!==e&&e.length||setTimeout((()=>{var t;if(null!==(t=J.current.startupMessages)&&void 0!==t&&t.length)return void J.current.setAndBroadcastHistory((t=>t.concat(...J.current.startupMessages)));const e=(0,i.TO)();J.current.setAndBroadcastHistory((t=>t?t.concat(e):[e]))}),t||1700)}),[]),Z=o.useCallback((()=>{G(!0),k((t=>!t)),A(!0),setTimeout((()=>A(!1)),1e3),Q()}),[G,Q]);o.useLayoutEffect((()=>{j&&G(!1,!0)}),[j,G]);const Y=o.useCallback((async function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,i.o9)(t,J.current,e)}),[]);J.current.updateContact=o.useCallback((async t=>{const e=await Y(t);J.current.setAndBroadcastHistory((t=>t.filter((t=>!h.includes(t.type))).concat(...e)))}),[Y]);const K=o.useCallback((()=>{J.current.setAndBroadcastHistory([]),s.oy(),delete J.current.history,Q(700)}),[Q]);if(!B||!O)return null;let V="hide-chat";S&&L?V="opening":S&&!L?V="show-chat":!S&&L&&(V="closing"),V+="bottomLeft"===(null===j||void 0===j||null===(e=j.window)||void 0===e?void 0:e.align)?" bottom-left ":" bottom-right ",f&&(V+=" test-console");const X=N&&h.includes(null===(n=N[N.length-1])||void 0===n?void 0:n.type);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(l.A,{design:j}),(0,u.jsxs)("div",{className:"chat-handler "+V,children:[S&&!!B&&(0,u.jsx)(a.A,{botDesign:j,messages:N,showTime:!0,onUserMessage:Y,disabledMessage:X,onHistoryChange:J.current.setAndBroadcastHistory,onClear:K,onHide:Z,onCallback:J.current.onCallback,optionsRenderer:I,language:q,setLanguage:P,fullscreen:x}),!S&&!L&&(0,u.jsx)(d.A,{design:j,onToggle:Z})]})]})}},72438:(t,e,n)=>{n.d(e,{A:()=>c});var o=n(89379),a=n(28891),s=n(14623),r=n(93436),i=n(44414);const c=function(t){let{design:e,onToggle:n}=t;const{launcher:{launcherType:c,buttonLogoUrl:l,buttonOnMobile:d,barText:u,fontSize:g,spacingCorner:h,spacingBottom:p,showMinimizeButtonToolTip:v=!0}={},header:{bgColor:b,secBgColor:f,fontColor:C}={},window:{fontFamily:w,align:m}={}}=e||{},y="bottomLeft"===m,I={bottom:p,[y?"left":"right"]:h};return"icon"===c||d?(0,i.jsxs)("div",{id:"lp-launcher",className:"lp-launcher button"+(l?"":" bordered"),onClick:n,style:(0,o.A)({borderColor:b,color:C,background:l?"transparent":"linear-gradient(to right,"+b+", "+f+")",verticalAlign:"middle",padding:l?void 0:"16px",display:"flex"},I),children:[v&&(0,i.jsx)(s.A,{design:e,isLeft:y}),l&&(0,i.jsx)("img",{src:l,alt:"Live Chat"}),!l&&a.Or]}):"expand"===c?(0,i.jsx)(r.A,{isLeft:y,color:C,style:I,bgColor:b,secBgColor:f,imageUrl:l,chatIcon:a.Or,barText:u,fontSize:g,onClick:n}):(0,i.jsxs)("div",{id:"lp-launcher",className:"lp-launcher bar",onClick:n,style:(0,o.A)({background:"linear-gradient(to right, "+b+", "+f+")",color:C,fontFamily:w},I),children:[a.Or,(0,i.jsx)("span",{children:u||"Live Chat"})]})}},93436:(t,e,n)=>{n.d(e,{A:()=>s});var o=n(9950),a=n(44414);const s=function(t){let{isLeft:e,bgColor:n,secBgColor:s,imageUrl:r,chatIcon:i,barText:c="Live Chat",fontSize:l,color:d,autoAnimate:u=!0,style:g,onClick:h}=t;const p=e?"bottom-left":"bottom-right",v={backgroundColor:n},b={backgroundImage:"linear-gradient(90deg, ".concat(n,", ").concat(s,")")},f=o.useRef(null);return o.useEffect((()=>{if(u){const t=setInterval((()=>{var t;null===(t=f.current)||void 0===t||t.classList.remove("bar-hide"),setTimeout((()=>{var t;return null===(t=f.current)||void 0===t?void 0:t.classList.add("bar-hide")}),7e3)}),35e3);return()=>clearInterval(t)}}),[u]),(0,a.jsxs)("div",{className:"lp-launcher expand-button ".concat(p),onClick:h,style:g,children:[(0,a.jsx)("div",{ref:f,className:"text-container bar-hide",style:b,children:(0,a.jsx)("div",{className:"bar-text",style:{minWidth:"150px",fontSize:l,color:d},children:(0,a.jsxs)("p",{children:["Hi there, ",(0,a.jsx)("img",{draggable:!1,className:"chat-hand",alt:"\ud83d\udc4b",src:"https://cwc.livserv.in/uploads/Templates/cwc_trend1/hand.png"})," We are online!"]})})}),(0,a.jsx)("div",{className:"image-container",style:v,children:(0,a.jsxs)("div",{className:"image-sub-container",children:[r&&(0,a.jsx)("img",{src:r,alt:c}),!r&&i]})})]})}},96651:(t,e,n)=>{n.d(e,{A:()=>s});var o=n(17119),a=n(44414);const s=function(t){let{design:e}=t;const n=null===e||void 0===e?void 0:e.remoteFontLink;return n?o.createPortal((0,a.jsx)("link",{rel:"stylesheet",href:n}),document.head,"remoteFont"):null}}}]);